var Li=Object.defineProperty;var Ii=(i,e,t)=>e in i?Li(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var V=(i,e,t)=>Ii(i,typeof e!="symbol"?e+"":e,t);import{b as F,S as G,g as Ri,m as ys}from"./index-B7uajRRb.js";var I=(i=>(i.persist="persist",i.session="session",i))(I||{});class Z{constructor(e,t){V(this,"storageAreaMap",{[I.session]:F.storage.session,[I.persist]:F.storage.local});V(this,"state");this.moduleName=e,this.moduleSchema=t,this.state=t.getDefaultValue()}async sync(){this.state=await this.get()}async set(e){const t=new Map;Object.entries(e).forEach(([s,n])=>{const r=this.moduleSchema.getPropDescription(s),a=t.get(r)??{};t.set(r,{...a,[s]:n})}),this.state=Object.assign({},...t.values()),await Promise.all([...t.entries()].map(([s,n])=>this.storageAreaMap[s].set({[this.moduleName]:n})))}async setItems(e){const t=await this.get(),s=Object.assign(t,e);await this.set(s)}async get(){const t=(await Promise.all(Object.values(this.storageAreaMap).map(a=>a.get(this.moduleName)))).map(a=>a[this.moduleName]),s=this.moduleSchema.getDefaultValue(),n=Object.assign({},s,...t);return this.moduleSchema.safeParseWithDefaults(n)}async getItems(...e){const t=await this.get();return Z.pickPartialObject(t,e)}async remove(){await Promise.all(Object.values(this.storageAreaMap).map(e=>e.remove(this.moduleName)))}async removeItems(...e){const t=await this.get(),s=Z.omitPartialObject(t,e);await this.set(s)}static omitPartialObject(e,t){return Object.fromEntries(Object.entries(e).filter(([n])=>!t.includes(n)))}static pickPartialObject(e,t){return Object.fromEntries(t.map(n=>[n,e[n]]))}}var M;(function(i){i.assertEqual=n=>n;function e(n){}i.assertIs=e;function t(n){throw new Error}i.assertNever=t,i.arrayToEnum=n=>{const r={};for(const a of n)r[a]=a;return r},i.getValidEnumValues=n=>{const r=i.objectKeys(n).filter(o=>typeof n[n[o]]!="number"),a={};for(const o of r)a[o]=n[o];return i.objectValues(a)},i.objectValues=n=>i.objectKeys(n).map(function(r){return n[r]}),i.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{const r=[];for(const a in n)Object.prototype.hasOwnProperty.call(n,a)&&r.push(a);return r},i.find=(n,r)=>{for(const a of n)if(r(a))return a},i.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&isFinite(n)&&Math.floor(n)===n;function s(n,r=" | "){return n.map(a=>typeof a=="string"?`'${a}'`:a).join(r)}i.joinValues=s,i.jsonStringifyReplacer=(n,r)=>typeof r=="bigint"?r.toString():r})(M||(M={}));var Us;(function(i){i.mergeShapes=(e,t)=>({...e,...t})})(Us||(Us={}));const T=M.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Se=i=>{switch(typeof i){case"undefined":return T.undefined;case"string":return T.string;case"number":return isNaN(i)?T.nan:T.number;case"boolean":return T.boolean;case"function":return T.function;case"bigint":return T.bigint;case"symbol":return T.symbol;case"object":return Array.isArray(i)?T.array:i===null?T.null:i.then&&typeof i.then=="function"&&i.catch&&typeof i.catch=="function"?T.promise:typeof Map<"u"&&i instanceof Map?T.map:typeof Set<"u"&&i instanceof Set?T.set:typeof Date<"u"&&i instanceof Date?T.date:T.object;default:return T.unknown}},S=M.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Pi=i=>JSON.stringify(i,null,2).replace(/"([^"]+)":/g,"$1:");class ie extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(r){return r.message},s={_errors:[]},n=r=>{for(const a of r.issues)if(a.code==="invalid_union")a.unionErrors.map(n);else if(a.code==="invalid_return_type")n(a.returnTypeError);else if(a.code==="invalid_arguments")n(a.argumentsError);else if(a.path.length===0)s._errors.push(t(a));else{let o=s,c=0;for(;c<a.path.length;){const u=a.path[c];c===a.path.length-1?(o[u]=o[u]||{_errors:[]},o[u]._errors.push(t(a))):o[u]=o[u]||{_errors:[]},o=o[u],c++}}};return n(this),s}static assert(e){if(!(e instanceof ie))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,M.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},s=[];for(const n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):s.push(e(n));return{formErrors:s,fieldErrors:t}}get formErrors(){return this.flatten()}}ie.create=i=>new ie(i);const lt=(i,e)=>{let t;switch(i.code){case S.invalid_type:i.received===T.undefined?t="Required":t=`Expected ${i.expected}, received ${i.received}`;break;case S.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(i.expected,M.jsonStringifyReplacer)}`;break;case S.unrecognized_keys:t=`Unrecognized key(s) in object: ${M.joinValues(i.keys,", ")}`;break;case S.invalid_union:t="Invalid input";break;case S.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${M.joinValues(i.options)}`;break;case S.invalid_enum_value:t=`Invalid enum value. Expected ${M.joinValues(i.options)}, received '${i.received}'`;break;case S.invalid_arguments:t="Invalid function arguments";break;case S.invalid_return_type:t="Invalid function return type";break;case S.invalid_date:t="Invalid date";break;case S.invalid_string:typeof i.validation=="object"?"includes"in i.validation?(t=`Invalid input: must include "${i.validation.includes}"`,typeof i.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${i.validation.position}`)):"startsWith"in i.validation?t=`Invalid input: must start with "${i.validation.startsWith}"`:"endsWith"in i.validation?t=`Invalid input: must end with "${i.validation.endsWith}"`:M.assertNever(i.validation):i.validation!=="regex"?t=`Invalid ${i.validation}`:t="Invalid";break;case S.too_small:i.type==="array"?t=`Array must contain ${i.exact?"exactly":i.inclusive?"at least":"more than"} ${i.minimum} element(s)`:i.type==="string"?t=`String must contain ${i.exact?"exactly":i.inclusive?"at least":"over"} ${i.minimum} character(s)`:i.type==="number"?t=`Number must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${i.minimum}`:i.type==="date"?t=`Date must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(i.minimum))}`:t="Invalid input";break;case S.too_big:i.type==="array"?t=`Array must contain ${i.exact?"exactly":i.inclusive?"at most":"less than"} ${i.maximum} element(s)`:i.type==="string"?t=`String must contain ${i.exact?"exactly":i.inclusive?"at most":"under"} ${i.maximum} character(s)`:i.type==="number"?t=`Number must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="bigint"?t=`BigInt must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="date"?t=`Date must be ${i.exact?"exactly":i.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(i.maximum))}`:t="Invalid input";break;case S.custom:t="Invalid input";break;case S.invalid_intersection_types:t="Intersection results could not be merged";break;case S.not_multiple_of:t=`Number must be a multiple of ${i.multipleOf}`;break;case S.not_finite:t="Number must be finite";break;default:t=e.defaultError,M.assertNever(i)}return{message:t}};let si=lt;function Di(i){si=i}function ss(){return si}const ns=i=>{const{data:e,path:t,errorMaps:s,issueData:n}=i,r=[...t,...n.path||[]],a={...n,path:r};if(n.message!==void 0)return{...n,path:r,message:n.message};let o="";const c=s.filter(u=>!!u).slice().reverse();for(const u of c)o=u(a,{data:e,defaultError:o}).message;return{...n,path:r,message:o}},ji=[];function E(i,e){const t=ss(),s=ns({issueData:e,data:i.data,path:i.path,errorMaps:[i.common.contextualErrorMap,i.schemaErrorMap,t,t===lt?void 0:lt].filter(n=>!!n)});i.common.issues.push(s)}class H{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const s=[];for(const n of t){if(n.status==="aborted")return R;n.status==="dirty"&&e.dirty(),s.push(n.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,t){const s=[];for(const n of t){const r=await n.key,a=await n.value;s.push({key:r,value:a})}return H.mergeObjectSync(e,s)}static mergeObjectSync(e,t){const s={};for(const n of t){const{key:r,value:a}=n;if(r.status==="aborted"||a.status==="aborted")return R;r.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),r.value!=="__proto__"&&(typeof a.value<"u"||n.alwaysSet)&&(s[r.value]=a.value)}return{status:e.value,value:s}}}const R=Object.freeze({status:"aborted"}),st=i=>({status:"dirty",value:i}),q=i=>({status:"valid",value:i}),zs=i=>i.status==="aborted",Bs=i=>i.status==="dirty",Ze=i=>i.status==="valid",It=i=>typeof Promise<"u"&&i instanceof Promise;function is(i,e,t,s){if(typeof e=="function"?i!==e||!0:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(i)}function ni(i,e,t,s,n){if(typeof e=="function"?i!==e||!0:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(i,t),t}var O;(function(i){i.errToObj=e=>typeof e=="string"?{message:e}:e||{},i.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(O||(O={}));var At,Et;class ge{constructor(e,t,s,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=s,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const fn=(i,e)=>{if(Ze(e))return{success:!0,data:e.value};if(!i.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new ie(i.common.issues);return this._error=t,this._error}}};function D(i){if(!i)return{};const{errorMap:e,invalid_type_error:t,required_error:s,description:n}=i;if(e&&(t||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(a,o)=>{var c,u;const{message:p}=i;return a.code==="invalid_enum_value"?{message:p??o.defaultError}:typeof o.data>"u"?{message:(c=p??s)!==null&&c!==void 0?c:o.defaultError}:a.code!=="invalid_type"?{message:o.defaultError}:{message:(u=p??t)!==null&&u!==void 0?u:o.defaultError}},description:n}}class N{get description(){return this._def.description}_getType(e){return Se(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Se(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new H,ctx:{common:e.parent.common,data:e.data,parsedType:Se(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(It(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const s=this.safeParse(e,t);if(s.success)return s.data;throw s.error}safeParse(e,t){var s;const n={common:{issues:[],async:(s=t==null?void 0:t.async)!==null&&s!==void 0?s:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Se(e)},r=this._parseSync({data:e,path:n.path,parent:n});return fn(n,r)}"~validate"(e){var t,s;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Se(e)};if(!this["~standard"].async)try{const r=this._parseSync({data:e,path:[],parent:n});return Ze(r)?{value:r.value}:{issues:n.common.issues}}catch(r){!((s=(t=r==null?void 0:r.message)===null||t===void 0?void 0:t.toLowerCase())===null||s===void 0)&&s.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(r=>Ze(r)?{value:r.value}:{issues:n.common.issues})}async parseAsync(e,t){const s=await this.safeParseAsync(e,t);if(s.success)return s.data;throw s.error}async safeParseAsync(e,t){const s={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Se(e)},n=this._parse({data:e,path:s.path,parent:s}),r=await(It(n)?n:Promise.resolve(n));return fn(s,r)}refine(e,t){const s=n=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(n):t;return this._refinement((n,r)=>{const a=e(n),o=()=>r.addIssue({code:S.custom,...s(n)});return typeof Promise<"u"&&a instanceof Promise?a.then(c=>c?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(e,t){return this._refinement((s,n)=>e(s)?!0:(n.addIssue(typeof t=="function"?t(s,n):t),!1))}_refinement(e){return new le({schema:this,typeName:L.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return pe.create(this,this._def)}nullable(){return Ne.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ce.create(this)}promise(){return dt.create(this,this._def)}or(e){return jt.create([this,e],this._def)}and(e){return Nt.create(this,e,this._def)}transform(e){return new le({...D(this._def),schema:this,typeName:L.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new Ut({...D(this._def),innerType:this,defaultValue:t,typeName:L.ZodDefault})}brand(){return new tn({typeName:L.ZodBranded,type:this,...D(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new zt({...D(this._def),innerType:this,catchValue:t,typeName:L.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Kt.create(this,e)}readonly(){return Bt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Ni=/^c[^\s-]{8,}$/i,$i=/^[0-9a-z]+$/,Mi=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Fi=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Vi=/^[a-z0-9_-]{21}$/i,Ui=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,zi=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Bi=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Zi="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let As;const Wi=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Hi=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Ki=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,qi=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Gi=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Ji=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,ii="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Yi=new RegExp(`^${ii}$`);function ri(i){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return i.precision?e=`${e}\\.\\d{${i.precision}}`:i.precision==null&&(e=`${e}(\\.\\d+)?`),e}function Xi(i){return new RegExp(`^${ri(i)}$`)}function ai(i){let e=`${ii}T${ri(i)}`;const t=[];return t.push(i.local?"Z?":"Z"),i.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function Qi(i,e){return!!((e==="v4"||!e)&&Wi.test(i)||(e==="v6"||!e)&&Ki.test(i))}function er(i,e){if(!Ui.test(i))return!1;try{const[t]=i.split("."),s=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),n=JSON.parse(atob(s));return!(typeof n!="object"||n===null||!n.typ||!n.alg||e&&n.alg!==e)}catch{return!1}}function tr(i,e){return!!((e==="v4"||!e)&&Hi.test(i)||(e==="v6"||!e)&&qi.test(i))}class oe extends N{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==T.string){const r=this._getOrReturnCtx(e);return E(r,{code:S.invalid_type,expected:T.string,received:r.parsedType}),R}const s=new H;let n;for(const r of this._def.checks)if(r.kind==="min")e.data.length<r.value&&(n=this._getOrReturnCtx(e,n),E(n,{code:S.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),s.dirty());else if(r.kind==="max")e.data.length>r.value&&(n=this._getOrReturnCtx(e,n),E(n,{code:S.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),s.dirty());else if(r.kind==="length"){const a=e.data.length>r.value,o=e.data.length<r.value;(a||o)&&(n=this._getOrReturnCtx(e,n),a?E(n,{code:S.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):o&&E(n,{code:S.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),s.dirty())}else if(r.kind==="email")Bi.test(e.data)||(n=this._getOrReturnCtx(e,n),E(n,{validation:"email",code:S.invalid_string,message:r.message}),s.dirty());else if(r.kind==="emoji")As||(As=new RegExp(Zi,"u")),As.test(e.data)||(n=this._getOrReturnCtx(e,n),E(n,{validation:"emoji",code:S.invalid_string,message:r.message}),s.dirty());else if(r.kind==="uuid")Fi.test(e.data)||(n=this._getOrReturnCtx(e,n),E(n,{validation:"uuid",code:S.invalid_string,message:r.message}),s.dirty());else if(r.kind==="nanoid")Vi.test(e.data)||(n=this._getOrReturnCtx(e,n),E(n,{validation:"nanoid",code:S.invalid_string,message:r.message}),s.dirty());else if(r.kind==="cuid")Ni.test(e.data)||(n=this._getOrReturnCtx(e,n),E(n,{validation:"cuid",code:S.invalid_string,message:r.message}),s.dirty());else if(r.kind==="cuid2")$i.test(e.data)||(n=this._getOrReturnCtx(e,n),E(n,{validation:"cuid2",code:S.invalid_string,message:r.message}),s.dirty());else if(r.kind==="ulid")Mi.test(e.data)||(n=this._getOrReturnCtx(e,n),E(n,{validation:"ulid",code:S.invalid_string,message:r.message}),s.dirty());else if(r.kind==="url")try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),E(n,{validation:"url",code:S.invalid_string,message:r.message}),s.dirty()}else r.kind==="regex"?(r.regex.lastIndex=0,r.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),E(n,{validation:"regex",code:S.invalid_string,message:r.message}),s.dirty())):r.kind==="trim"?e.data=e.data.trim():r.kind==="includes"?e.data.includes(r.value,r.position)||(n=this._getOrReturnCtx(e,n),E(n,{code:S.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),s.dirty()):r.kind==="toLowerCase"?e.data=e.data.toLowerCase():r.kind==="toUpperCase"?e.data=e.data.toUpperCase():r.kind==="startsWith"?e.data.startsWith(r.value)||(n=this._getOrReturnCtx(e,n),E(n,{code:S.invalid_string,validation:{startsWith:r.value},message:r.message}),s.dirty()):r.kind==="endsWith"?e.data.endsWith(r.value)||(n=this._getOrReturnCtx(e,n),E(n,{code:S.invalid_string,validation:{endsWith:r.value},message:r.message}),s.dirty()):r.kind==="datetime"?ai(r).test(e.data)||(n=this._getOrReturnCtx(e,n),E(n,{code:S.invalid_string,validation:"datetime",message:r.message}),s.dirty()):r.kind==="date"?Yi.test(e.data)||(n=this._getOrReturnCtx(e,n),E(n,{code:S.invalid_string,validation:"date",message:r.message}),s.dirty()):r.kind==="time"?Xi(r).test(e.data)||(n=this._getOrReturnCtx(e,n),E(n,{code:S.invalid_string,validation:"time",message:r.message}),s.dirty()):r.kind==="duration"?zi.test(e.data)||(n=this._getOrReturnCtx(e,n),E(n,{validation:"duration",code:S.invalid_string,message:r.message}),s.dirty()):r.kind==="ip"?Qi(e.data,r.version)||(n=this._getOrReturnCtx(e,n),E(n,{validation:"ip",code:S.invalid_string,message:r.message}),s.dirty()):r.kind==="jwt"?er(e.data,r.alg)||(n=this._getOrReturnCtx(e,n),E(n,{validation:"jwt",code:S.invalid_string,message:r.message}),s.dirty()):r.kind==="cidr"?tr(e.data,r.version)||(n=this._getOrReturnCtx(e,n),E(n,{validation:"cidr",code:S.invalid_string,message:r.message}),s.dirty()):r.kind==="base64"?Gi.test(e.data)||(n=this._getOrReturnCtx(e,n),E(n,{validation:"base64",code:S.invalid_string,message:r.message}),s.dirty()):r.kind==="base64url"?Ji.test(e.data)||(n=this._getOrReturnCtx(e,n),E(n,{validation:"base64url",code:S.invalid_string,message:r.message}),s.dirty()):M.assertNever(r);return{status:s.value,value:e.data}}_regex(e,t,s){return this.refinement(n=>e.test(n),{validation:t,code:S.invalid_string,...O.errToObj(s)})}_addCheck(e){return new oe({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...O.errToObj(e)})}url(e){return this._addCheck({kind:"url",...O.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...O.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...O.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...O.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...O.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...O.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...O.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...O.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...O.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...O.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...O.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...O.errToObj(e)})}datetime(e){var t,s;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,local:(s=e==null?void 0:e.local)!==null&&s!==void 0?s:!1,...O.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...O.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...O.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...O.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...O.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...O.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...O.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...O.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...O.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...O.errToObj(t)})}nonempty(e){return this.min(1,O.errToObj(e))}trim(){return new oe({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new oe({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new oe({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}oe.create=i=>{var e;return new oe({checks:[],typeName:L.ZodString,coerce:(e=i==null?void 0:i.coerce)!==null&&e!==void 0?e:!1,...D(i)})};function sr(i,e){const t=(i.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,n=t>s?t:s,r=parseInt(i.toFixed(n).replace(".","")),a=parseInt(e.toFixed(n).replace(".",""));return r%a/Math.pow(10,n)}class Pe extends N{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==T.number){const r=this._getOrReturnCtx(e);return E(r,{code:S.invalid_type,expected:T.number,received:r.parsedType}),R}let s;const n=new H;for(const r of this._def.checks)r.kind==="int"?M.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),E(s,{code:S.invalid_type,expected:"integer",received:"float",message:r.message}),n.dirty()):r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(s=this._getOrReturnCtx(e,s),E(s,{code:S.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(s=this._getOrReturnCtx(e,s),E(s,{code:S.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty()):r.kind==="multipleOf"?sr(e.data,r.value)!==0&&(s=this._getOrReturnCtx(e,s),E(s,{code:S.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):r.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),E(s,{code:S.not_finite,message:r.message}),n.dirty()):M.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,O.toString(t))}gt(e,t){return this.setLimit("min",e,!1,O.toString(t))}lte(e,t){return this.setLimit("max",e,!0,O.toString(t))}lt(e,t){return this.setLimit("max",e,!1,O.toString(t))}setLimit(e,t,s,n){return new Pe({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:O.toString(n)}]})}_addCheck(e){return new Pe({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:O.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:O.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:O.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:O.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:O.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:O.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:O.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:O.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:O.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&M.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(t===null||s.value>t)&&(t=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Pe.create=i=>new Pe({checks:[],typeName:L.ZodNumber,coerce:(i==null?void 0:i.coerce)||!1,...D(i)});class De extends N{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==T.bigint)return this._getInvalidInput(e);let s;const n=new H;for(const r of this._def.checks)r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(s=this._getOrReturnCtx(e,s),E(s,{code:S.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(s=this._getOrReturnCtx(e,s),E(s,{code:S.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty()):r.kind==="multipleOf"?e.data%r.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),E(s,{code:S.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):M.assertNever(r);return{status:n.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return E(t,{code:S.invalid_type,expected:T.bigint,received:t.parsedType}),R}gte(e,t){return this.setLimit("min",e,!0,O.toString(t))}gt(e,t){return this.setLimit("min",e,!1,O.toString(t))}lte(e,t){return this.setLimit("max",e,!0,O.toString(t))}lt(e,t){return this.setLimit("max",e,!1,O.toString(t))}setLimit(e,t,s,n){return new De({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:O.toString(n)}]})}_addCheck(e){return new De({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:O.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:O.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:O.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:O.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:O.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}De.create=i=>{var e;return new De({checks:[],typeName:L.ZodBigInt,coerce:(e=i==null?void 0:i.coerce)!==null&&e!==void 0?e:!1,...D(i)})};class Rt extends N{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==T.boolean){const s=this._getOrReturnCtx(e);return E(s,{code:S.invalid_type,expected:T.boolean,received:s.parsedType}),R}return q(e.data)}}Rt.create=i=>new Rt({typeName:L.ZodBoolean,coerce:(i==null?void 0:i.coerce)||!1,...D(i)});class We extends N{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==T.date){const r=this._getOrReturnCtx(e);return E(r,{code:S.invalid_type,expected:T.date,received:r.parsedType}),R}if(isNaN(e.data.getTime())){const r=this._getOrReturnCtx(e);return E(r,{code:S.invalid_date}),R}const s=new H;let n;for(const r of this._def.checks)r.kind==="min"?e.data.getTime()<r.value&&(n=this._getOrReturnCtx(e,n),E(n,{code:S.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),s.dirty()):r.kind==="max"?e.data.getTime()>r.value&&(n=this._getOrReturnCtx(e,n),E(n,{code:S.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),s.dirty()):M.assertNever(r);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new We({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:O.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:O.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}We.create=i=>new We({checks:[],coerce:(i==null?void 0:i.coerce)||!1,typeName:L.ZodDate,...D(i)});class rs extends N{_parse(e){if(this._getType(e)!==T.symbol){const s=this._getOrReturnCtx(e);return E(s,{code:S.invalid_type,expected:T.symbol,received:s.parsedType}),R}return q(e.data)}}rs.create=i=>new rs({typeName:L.ZodSymbol,...D(i)});class Pt extends N{_parse(e){if(this._getType(e)!==T.undefined){const s=this._getOrReturnCtx(e);return E(s,{code:S.invalid_type,expected:T.undefined,received:s.parsedType}),R}return q(e.data)}}Pt.create=i=>new Pt({typeName:L.ZodUndefined,...D(i)});class Dt extends N{_parse(e){if(this._getType(e)!==T.null){const s=this._getOrReturnCtx(e);return E(s,{code:S.invalid_type,expected:T.null,received:s.parsedType}),R}return q(e.data)}}Dt.create=i=>new Dt({typeName:L.ZodNull,...D(i)});class ut extends N{constructor(){super(...arguments),this._any=!0}_parse(e){return q(e.data)}}ut.create=i=>new ut({typeName:L.ZodAny,...D(i)});class Be extends N{constructor(){super(...arguments),this._unknown=!0}_parse(e){return q(e.data)}}Be.create=i=>new Be({typeName:L.ZodUnknown,...D(i)});class Ee extends N{_parse(e){const t=this._getOrReturnCtx(e);return E(t,{code:S.invalid_type,expected:T.never,received:t.parsedType}),R}}Ee.create=i=>new Ee({typeName:L.ZodNever,...D(i)});class as extends N{_parse(e){if(this._getType(e)!==T.undefined){const s=this._getOrReturnCtx(e);return E(s,{code:S.invalid_type,expected:T.void,received:s.parsedType}),R}return q(e.data)}}as.create=i=>new as({typeName:L.ZodVoid,...D(i)});class ce extends N{_parse(e){const{ctx:t,status:s}=this._processInputParams(e),n=this._def;if(t.parsedType!==T.array)return E(t,{code:S.invalid_type,expected:T.array,received:t.parsedType}),R;if(n.exactLength!==null){const a=t.data.length>n.exactLength.value,o=t.data.length<n.exactLength.value;(a||o)&&(E(t,{code:a?S.too_big:S.too_small,minimum:o?n.exactLength.value:void 0,maximum:a?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),s.dirty())}if(n.minLength!==null&&t.data.length<n.minLength.value&&(E(t,{code:S.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),s.dirty()),n.maxLength!==null&&t.data.length>n.maxLength.value&&(E(t,{code:S.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),s.dirty()),t.common.async)return Promise.all([...t.data].map((a,o)=>n.type._parseAsync(new ge(t,a,t.path,o)))).then(a=>H.mergeArray(s,a));const r=[...t.data].map((a,o)=>n.type._parseSync(new ge(t,a,t.path,o)));return H.mergeArray(s,r)}get element(){return this._def.type}min(e,t){return new ce({...this._def,minLength:{value:e,message:O.toString(t)}})}max(e,t){return new ce({...this._def,maxLength:{value:e,message:O.toString(t)}})}length(e,t){return new ce({...this._def,exactLength:{value:e,message:O.toString(t)}})}nonempty(e){return this.min(1,e)}}ce.create=(i,e)=>new ce({type:i,minLength:null,maxLength:null,exactLength:null,typeName:L.ZodArray,...D(e)});function tt(i){if(i instanceof z){const e={};for(const t in i.shape){const s=i.shape[t];e[t]=pe.create(tt(s))}return new z({...i._def,shape:()=>e})}else return i instanceof ce?new ce({...i._def,type:tt(i.element)}):i instanceof pe?pe.create(tt(i.unwrap())):i instanceof Ne?Ne.create(tt(i.unwrap())):i instanceof me?me.create(i.items.map(e=>tt(e))):i}class z extends N{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=M.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==T.object){const u=this._getOrReturnCtx(e);return E(u,{code:S.invalid_type,expected:T.object,received:u.parsedType}),R}const{status:s,ctx:n}=this._processInputParams(e),{shape:r,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof Ee&&this._def.unknownKeys==="strip"))for(const u in n.data)a.includes(u)||o.push(u);const c=[];for(const u of a){const p=r[u],m=n.data[u];c.push({key:{status:"valid",value:u},value:p._parse(new ge(n,m,n.path,u)),alwaysSet:u in n.data})}if(this._def.catchall instanceof Ee){const u=this._def.unknownKeys;if(u==="passthrough")for(const p of o)c.push({key:{status:"valid",value:p},value:{status:"valid",value:n.data[p]}});else if(u==="strict")o.length>0&&(E(n,{code:S.unrecognized_keys,keys:o}),s.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const p of o){const m=n.data[p];c.push({key:{status:"valid",value:p},value:u._parse(new ge(n,m,n.path,p)),alwaysSet:p in n.data})}}return n.common.async?Promise.resolve().then(async()=>{const u=[];for(const p of c){const m=await p.key,v=await p.value;u.push({key:m,value:v,alwaysSet:p.alwaysSet})}return u}).then(u=>H.mergeObjectSync(s,u)):H.mergeObjectSync(s,c)}get shape(){return this._def.shape()}strict(e){return O.errToObj,new z({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,s)=>{var n,r,a,o;const c=(a=(r=(n=this._def).errorMap)===null||r===void 0?void 0:r.call(n,t,s).message)!==null&&a!==void 0?a:s.defaultError;return t.code==="unrecognized_keys"?{message:(o=O.errToObj(e).message)!==null&&o!==void 0?o:c}:{message:c}}}:{}})}strip(){return new z({...this._def,unknownKeys:"strip"})}passthrough(){return new z({...this._def,unknownKeys:"passthrough"})}extend(e){return new z({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new z({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:L.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new z({...this._def,catchall:e})}pick(e){const t={};return M.objectKeys(e).forEach(s=>{e[s]&&this.shape[s]&&(t[s]=this.shape[s])}),new z({...this._def,shape:()=>t})}omit(e){const t={};return M.objectKeys(this.shape).forEach(s=>{e[s]||(t[s]=this.shape[s])}),new z({...this._def,shape:()=>t})}deepPartial(){return tt(this)}partial(e){const t={};return M.objectKeys(this.shape).forEach(s=>{const n=this.shape[s];e&&!e[s]?t[s]=n:t[s]=n.optional()}),new z({...this._def,shape:()=>t})}required(e){const t={};return M.objectKeys(this.shape).forEach(s=>{if(e&&!e[s])t[s]=this.shape[s];else{let r=this.shape[s];for(;r instanceof pe;)r=r._def.innerType;t[s]=r}}),new z({...this._def,shape:()=>t})}keyof(){return oi(M.objectKeys(this.shape))}}z.create=(i,e)=>new z({shape:()=>i,unknownKeys:"strip",catchall:Ee.create(),typeName:L.ZodObject,...D(e)});z.strictCreate=(i,e)=>new z({shape:()=>i,unknownKeys:"strict",catchall:Ee.create(),typeName:L.ZodObject,...D(e)});z.lazycreate=(i,e)=>new z({shape:i,unknownKeys:"strip",catchall:Ee.create(),typeName:L.ZodObject,...D(e)});class jt extends N{_parse(e){const{ctx:t}=this._processInputParams(e),s=this._def.options;function n(r){for(const o of r)if(o.result.status==="valid")return o.result;for(const o of r)if(o.result.status==="dirty")return t.common.issues.push(...o.ctx.common.issues),o.result;const a=r.map(o=>new ie(o.ctx.common.issues));return E(t,{code:S.invalid_union,unionErrors:a}),R}if(t.common.async)return Promise.all(s.map(async r=>{const a={...t,common:{...t.common,issues:[]},parent:null};return{result:await r._parseAsync({data:t.data,path:t.path,parent:a}),ctx:a}})).then(n);{let r;const a=[];for(const c of s){const u={...t,common:{...t.common,issues:[]},parent:null},p=c._parseSync({data:t.data,path:t.path,parent:u});if(p.status==="valid")return p;p.status==="dirty"&&!r&&(r={result:p,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(r)return t.common.issues.push(...r.ctx.common.issues),r.result;const o=a.map(c=>new ie(c));return E(t,{code:S.invalid_union,unionErrors:o}),R}}get options(){return this._def.options}}jt.create=(i,e)=>new jt({options:i,typeName:L.ZodUnion,...D(e)});const ye=i=>i instanceof Mt?ye(i.schema):i instanceof le?ye(i.innerType()):i instanceof Ft?[i.value]:i instanceof je?i.options:i instanceof Vt?M.objectValues(i.enum):i instanceof Ut?ye(i._def.innerType):i instanceof Pt?[void 0]:i instanceof Dt?[null]:i instanceof pe?[void 0,...ye(i.unwrap())]:i instanceof Ne?[null,...ye(i.unwrap())]:i instanceof tn||i instanceof Bt?ye(i.unwrap()):i instanceof zt?ye(i._def.innerType):[];class ws extends N{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==T.object)return E(t,{code:S.invalid_type,expected:T.object,received:t.parsedType}),R;const s=this.discriminator,n=t.data[s],r=this.optionsMap.get(n);return r?t.common.async?r._parseAsync({data:t.data,path:t.path,parent:t}):r._parseSync({data:t.data,path:t.path,parent:t}):(E(t,{code:S.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),R)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,s){const n=new Map;for(const r of t){const a=ye(r.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of a){if(n.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);n.set(o,r)}}return new ws({typeName:L.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...D(s)})}}function Zs(i,e){const t=Se(i),s=Se(e);if(i===e)return{valid:!0,data:i};if(t===T.object&&s===T.object){const n=M.objectKeys(e),r=M.objectKeys(i).filter(o=>n.indexOf(o)!==-1),a={...i,...e};for(const o of r){const c=Zs(i[o],e[o]);if(!c.valid)return{valid:!1};a[o]=c.data}return{valid:!0,data:a}}else if(t===T.array&&s===T.array){if(i.length!==e.length)return{valid:!1};const n=[];for(let r=0;r<i.length;r++){const a=i[r],o=e[r],c=Zs(a,o);if(!c.valid)return{valid:!1};n.push(c.data)}return{valid:!0,data:n}}else return t===T.date&&s===T.date&&+i==+e?{valid:!0,data:i}:{valid:!1}}class Nt extends N{_parse(e){const{status:t,ctx:s}=this._processInputParams(e),n=(r,a)=>{if(zs(r)||zs(a))return R;const o=Zs(r.value,a.value);return o.valid?((Bs(r)||Bs(a))&&t.dirty(),{status:t.value,value:o.data}):(E(s,{code:S.invalid_intersection_types}),R)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([r,a])=>n(r,a)):n(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}Nt.create=(i,e,t)=>new Nt({left:i,right:e,typeName:L.ZodIntersection,...D(t)});class me extends N{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==T.array)return E(s,{code:S.invalid_type,expected:T.array,received:s.parsedType}),R;if(s.data.length<this._def.items.length)return E(s,{code:S.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),R;!this._def.rest&&s.data.length>this._def.items.length&&(E(s,{code:S.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...s.data].map((a,o)=>{const c=this._def.items[o]||this._def.rest;return c?c._parse(new ge(s,a,s.path,o)):null}).filter(a=>!!a);return s.common.async?Promise.all(r).then(a=>H.mergeArray(t,a)):H.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new me({...this._def,rest:e})}}me.create=(i,e)=>{if(!Array.isArray(i))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new me({items:i,typeName:L.ZodTuple,rest:null,...D(e)})};class $t extends N{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==T.object)return E(s,{code:S.invalid_type,expected:T.object,received:s.parsedType}),R;const n=[],r=this._def.keyType,a=this._def.valueType;for(const o in s.data)n.push({key:r._parse(new ge(s,o,s.path,o)),value:a._parse(new ge(s,s.data[o],s.path,o)),alwaysSet:o in s.data});return s.common.async?H.mergeObjectAsync(t,n):H.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,s){return t instanceof N?new $t({keyType:e,valueType:t,typeName:L.ZodRecord,...D(s)}):new $t({keyType:oe.create(),valueType:e,typeName:L.ZodRecord,...D(t)})}}class os extends N{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==T.map)return E(s,{code:S.invalid_type,expected:T.map,received:s.parsedType}),R;const n=this._def.keyType,r=this._def.valueType,a=[...s.data.entries()].map(([o,c],u)=>({key:n._parse(new ge(s,o,s.path,[u,"key"])),value:r._parse(new ge(s,c,s.path,[u,"value"]))}));if(s.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const c of a){const u=await c.key,p=await c.value;if(u.status==="aborted"||p.status==="aborted")return R;(u.status==="dirty"||p.status==="dirty")&&t.dirty(),o.set(u.value,p.value)}return{status:t.value,value:o}})}else{const o=new Map;for(const c of a){const u=c.key,p=c.value;if(u.status==="aborted"||p.status==="aborted")return R;(u.status==="dirty"||p.status==="dirty")&&t.dirty(),o.set(u.value,p.value)}return{status:t.value,value:o}}}}os.create=(i,e,t)=>new os({valueType:e,keyType:i,typeName:L.ZodMap,...D(t)});class He extends N{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==T.set)return E(s,{code:S.invalid_type,expected:T.set,received:s.parsedType}),R;const n=this._def;n.minSize!==null&&s.data.size<n.minSize.value&&(E(s,{code:S.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),n.maxSize!==null&&s.data.size>n.maxSize.value&&(E(s,{code:S.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());const r=this._def.valueType;function a(c){const u=new Set;for(const p of c){if(p.status==="aborted")return R;p.status==="dirty"&&t.dirty(),u.add(p.value)}return{status:t.value,value:u}}const o=[...s.data.values()].map((c,u)=>r._parse(new ge(s,c,s.path,u)));return s.common.async?Promise.all(o).then(c=>a(c)):a(o)}min(e,t){return new He({...this._def,minSize:{value:e,message:O.toString(t)}})}max(e,t){return new He({...this._def,maxSize:{value:e,message:O.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}He.create=(i,e)=>new He({valueType:i,minSize:null,maxSize:null,typeName:L.ZodSet,...D(e)});class at extends N{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==T.function)return E(t,{code:S.invalid_type,expected:T.function,received:t.parsedType}),R;function s(o,c){return ns({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ss(),lt].filter(u=>!!u),issueData:{code:S.invalid_arguments,argumentsError:c}})}function n(o,c){return ns({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ss(),lt].filter(u=>!!u),issueData:{code:S.invalid_return_type,returnTypeError:c}})}const r={errorMap:t.common.contextualErrorMap},a=t.data;if(this._def.returns instanceof dt){const o=this;return q(async function(...c){const u=new ie([]),p=await o._def.args.parseAsync(c,r).catch(b=>{throw u.addIssue(s(c,b)),u}),m=await Reflect.apply(a,this,p);return await o._def.returns._def.type.parseAsync(m,r).catch(b=>{throw u.addIssue(n(m,b)),u})})}else{const o=this;return q(function(...c){const u=o._def.args.safeParse(c,r);if(!u.success)throw new ie([s(c,u.error)]);const p=Reflect.apply(a,this,u.data),m=o._def.returns.safeParse(p,r);if(!m.success)throw new ie([n(p,m.error)]);return m.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new at({...this._def,args:me.create(e).rest(Be.create())})}returns(e){return new at({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,s){return new at({args:e||me.create([]).rest(Be.create()),returns:t||Be.create(),typeName:L.ZodFunction,...D(s)})}}class Mt extends N{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Mt.create=(i,e)=>new Mt({getter:i,typeName:L.ZodLazy,...D(e)});class Ft extends N{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return E(t,{received:t.data,code:S.invalid_literal,expected:this._def.value}),R}return{status:"valid",value:e.data}}get value(){return this._def.value}}Ft.create=(i,e)=>new Ft({value:i,typeName:L.ZodLiteral,...D(e)});function oi(i,e){return new je({values:i,typeName:L.ZodEnum,...D(e)})}class je extends N{constructor(){super(...arguments),At.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),s=this._def.values;return E(t,{expected:M.joinValues(s),received:t.parsedType,code:S.invalid_type}),R}if(is(this,At)||ni(this,At,new Set(this._def.values)),!is(this,At).has(e.data)){const t=this._getOrReturnCtx(e),s=this._def.values;return E(t,{received:t.data,code:S.invalid_enum_value,options:s}),R}return q(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return je.create(e,{...this._def,...t})}exclude(e,t=this._def){return je.create(this.options.filter(s=>!e.includes(s)),{...this._def,...t})}}At=new WeakMap;je.create=oi;class Vt extends N{constructor(){super(...arguments),Et.set(this,void 0)}_parse(e){const t=M.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==T.string&&s.parsedType!==T.number){const n=M.objectValues(t);return E(s,{expected:M.joinValues(n),received:s.parsedType,code:S.invalid_type}),R}if(is(this,Et)||ni(this,Et,new Set(M.getValidEnumValues(this._def.values))),!is(this,Et).has(e.data)){const n=M.objectValues(t);return E(s,{received:s.data,code:S.invalid_enum_value,options:n}),R}return q(e.data)}get enum(){return this._def.values}}Et=new WeakMap;Vt.create=(i,e)=>new Vt({values:i,typeName:L.ZodNativeEnum,...D(e)});class dt extends N{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==T.promise&&t.common.async===!1)return E(t,{code:S.invalid_type,expected:T.promise,received:t.parsedType}),R;const s=t.parsedType===T.promise?t.data:Promise.resolve(t.data);return q(s.then(n=>this._def.type.parseAsync(n,{path:t.path,errorMap:t.common.contextualErrorMap})))}}dt.create=(i,e)=>new dt({type:i,typeName:L.ZodPromise,...D(e)});class le extends N{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===L.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:s}=this._processInputParams(e),n=this._def.effect||null,r={addIssue:a=>{E(s,a),a.fatal?t.abort():t.dirty()},get path(){return s.path}};if(r.addIssue=r.addIssue.bind(r),n.type==="preprocess"){const a=n.transform(s.data,r);if(s.common.async)return Promise.resolve(a).then(async o=>{if(t.value==="aborted")return R;const c=await this._def.schema._parseAsync({data:o,path:s.path,parent:s});return c.status==="aborted"?R:c.status==="dirty"||t.value==="dirty"?st(c.value):c});{if(t.value==="aborted")return R;const o=this._def.schema._parseSync({data:a,path:s.path,parent:s});return o.status==="aborted"?R:o.status==="dirty"||t.value==="dirty"?st(o.value):o}}if(n.type==="refinement"){const a=o=>{const c=n.refinement(o,r);if(s.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(s.common.async===!1){const o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return o.status==="aborted"?R:(o.status==="dirty"&&t.dirty(),a(o.value),{status:t.value,value:o.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>o.status==="aborted"?R:(o.status==="dirty"&&t.dirty(),a(o.value).then(()=>({status:t.value,value:o.value}))))}if(n.type==="transform")if(s.common.async===!1){const a=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!Ze(a))return a;const o=n.transform(a.value,r);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(a=>Ze(a)?Promise.resolve(n.transform(a.value,r)).then(o=>({status:t.value,value:o})):a);M.assertNever(n)}}le.create=(i,e,t)=>new le({schema:i,typeName:L.ZodEffects,effect:e,...D(t)});le.createWithPreprocess=(i,e,t)=>new le({schema:e,effect:{type:"preprocess",transform:i},typeName:L.ZodEffects,...D(t)});class pe extends N{_parse(e){return this._getType(e)===T.undefined?q(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}pe.create=(i,e)=>new pe({innerType:i,typeName:L.ZodOptional,...D(e)});class Ne extends N{_parse(e){return this._getType(e)===T.null?q(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ne.create=(i,e)=>new Ne({innerType:i,typeName:L.ZodNullable,...D(e)});class Ut extends N{_parse(e){const{ctx:t}=this._processInputParams(e);let s=t.data;return t.parsedType===T.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Ut.create=(i,e)=>new Ut({innerType:i,typeName:L.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...D(e)});class zt extends N{_parse(e){const{ctx:t}=this._processInputParams(e),s={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return It(n)?n.then(r=>({status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new ie(s.common.issues)},input:s.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new ie(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}zt.create=(i,e)=>new zt({innerType:i,typeName:L.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...D(e)});class cs extends N{_parse(e){if(this._getType(e)!==T.nan){const s=this._getOrReturnCtx(e);return E(s,{code:S.invalid_type,expected:T.nan,received:s.parsedType}),R}return{status:"valid",value:e.data}}}cs.create=i=>new cs({typeName:L.ZodNaN,...D(i)});const nr=Symbol("zod_brand");class tn extends N{_parse(e){const{ctx:t}=this._processInputParams(e),s=t.data;return this._def.type._parse({data:s,path:t.path,parent:t})}unwrap(){return this._def.type}}class Kt extends N{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{const r=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return r.status==="aborted"?R:r.status==="dirty"?(t.dirty(),st(r.value)):this._def.out._parseAsync({data:r.value,path:s.path,parent:s})})();{const n=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return n.status==="aborted"?R:n.status==="dirty"?(t.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:s.path,parent:s})}}static create(e,t){return new Kt({in:e,out:t,typeName:L.ZodPipeline})}}class Bt extends N{_parse(e){const t=this._def.innerType._parse(e),s=n=>(Ze(n)&&(n.value=Object.freeze(n.value)),n);return It(t)?t.then(n=>s(n)):s(t)}unwrap(){return this._def.innerType}}Bt.create=(i,e)=>new Bt({innerType:i,typeName:L.ZodReadonly,...D(e)});function ci(i,e={},t){return i?ut.create().superRefine((s,n)=>{var r,a;if(!i(s)){const o=typeof e=="function"?e(s):typeof e=="string"?{message:e}:e,c=(a=(r=o.fatal)!==null&&r!==void 0?r:t)!==null&&a!==void 0?a:!0,u=typeof o=="string"?{message:o}:o;n.addIssue({code:"custom",...u,fatal:c})}}):ut.create()}const ir={object:z.lazycreate};var L;(function(i){i.ZodString="ZodString",i.ZodNumber="ZodNumber",i.ZodNaN="ZodNaN",i.ZodBigInt="ZodBigInt",i.ZodBoolean="ZodBoolean",i.ZodDate="ZodDate",i.ZodSymbol="ZodSymbol",i.ZodUndefined="ZodUndefined",i.ZodNull="ZodNull",i.ZodAny="ZodAny",i.ZodUnknown="ZodUnknown",i.ZodNever="ZodNever",i.ZodVoid="ZodVoid",i.ZodArray="ZodArray",i.ZodObject="ZodObject",i.ZodUnion="ZodUnion",i.ZodDiscriminatedUnion="ZodDiscriminatedUnion",i.ZodIntersection="ZodIntersection",i.ZodTuple="ZodTuple",i.ZodRecord="ZodRecord",i.ZodMap="ZodMap",i.ZodSet="ZodSet",i.ZodFunction="ZodFunction",i.ZodLazy="ZodLazy",i.ZodLiteral="ZodLiteral",i.ZodEnum="ZodEnum",i.ZodEffects="ZodEffects",i.ZodNativeEnum="ZodNativeEnum",i.ZodOptional="ZodOptional",i.ZodNullable="ZodNullable",i.ZodDefault="ZodDefault",i.ZodCatch="ZodCatch",i.ZodPromise="ZodPromise",i.ZodBranded="ZodBranded",i.ZodPipeline="ZodPipeline",i.ZodReadonly="ZodReadonly"})(L||(L={}));const rr=(i,e={message:`Input not instance of ${i.name}`})=>ci(t=>t instanceof i,e),li=oe.create,ui=Pe.create,ar=cs.create,or=De.create,di=Rt.create,cr=We.create,lr=rs.create,ur=Pt.create,dr=Dt.create,hr=ut.create,pr=Be.create,fr=Ee.create,gr=as.create,mr=ce.create,vr=z.create,br=z.strictCreate,yr=jt.create,wr=ws.create,Sr=Nt.create,_r=me.create,xr=$t.create,kr=os.create,Cr=He.create,Ar=at.create,Er=Mt.create,Tr=Ft.create,Or=je.create,Lr=Vt.create,Ir=dt.create,gn=le.create,Rr=pe.create,Pr=Ne.create,Dr=le.createWithPreprocess,jr=Kt.create,Nr=()=>li().optional(),$r=()=>ui().optional(),Mr=()=>di().optional(),Fr={string:i=>oe.create({...i,coerce:!0}),number:i=>Pe.create({...i,coerce:!0}),boolean:i=>Rt.create({...i,coerce:!0}),bigint:i=>De.create({...i,coerce:!0}),date:i=>We.create({...i,coerce:!0})},Vr=R;var d=Object.freeze({__proto__:null,defaultErrorMap:lt,setErrorMap:Di,getErrorMap:ss,makeIssue:ns,EMPTY_PATH:ji,addIssueToContext:E,ParseStatus:H,INVALID:R,DIRTY:st,OK:q,isAborted:zs,isDirty:Bs,isValid:Ze,isAsync:It,get util(){return M},get objectUtil(){return Us},ZodParsedType:T,getParsedType:Se,ZodType:N,datetimeRegex:ai,ZodString:oe,ZodNumber:Pe,ZodBigInt:De,ZodBoolean:Rt,ZodDate:We,ZodSymbol:rs,ZodUndefined:Pt,ZodNull:Dt,ZodAny:ut,ZodUnknown:Be,ZodNever:Ee,ZodVoid:as,ZodArray:ce,ZodObject:z,ZodUnion:jt,ZodDiscriminatedUnion:ws,ZodIntersection:Nt,ZodTuple:me,ZodRecord:$t,ZodMap:os,ZodSet:He,ZodFunction:at,ZodLazy:Mt,ZodLiteral:Ft,ZodEnum:je,ZodNativeEnum:Vt,ZodPromise:dt,ZodEffects:le,ZodTransformer:le,ZodOptional:pe,ZodNullable:Ne,ZodDefault:Ut,ZodCatch:zt,ZodNaN:cs,BRAND:nr,ZodBranded:tn,ZodPipeline:Kt,ZodReadonly:Bt,custom:ci,Schema:N,ZodSchema:N,late:ir,get ZodFirstPartyTypeKind(){return L},coerce:Fr,any:hr,array:mr,bigint:or,boolean:di,date:cr,discriminatedUnion:wr,effect:gn,enum:Or,function:Ar,instanceof:rr,intersection:Sr,lazy:Er,literal:Tr,map:kr,nan:ar,nativeEnum:Lr,never:fr,null:dr,nullable:Pr,number:ui,object:vr,oboolean:Mr,onumber:$r,optional:Rr,ostring:Nr,pipeline:jr,preprocess:Dr,promise:Ir,record:xr,set:Cr,strictObject:br,string:li,symbol:lr,transformer:gn,tuple:_r,undefined:ur,union:yr,unknown:pr,void:gr,NEVER:Vr,ZodIssueCode:S,quotelessJson:Pi,ZodError:ie});class X{constructor(e){this.schema=e}getDefaultValue(){return this.schema._def.defaultValue()}validate(e){return this.schema.safeParse(e).success}safeParse(e){return this.schema.safeParse(e)}safeParseWithDefaults(e){const t=this.safeParse(e),s=this.getDefaultValue();return t.success?Object.assign(s,t.data):s}getPropDescription(e){return this.schema._def.innerType.shape[e].description}}const Ur=["google-analytics","aws-kinesis","amplitude"],zr=d.object({types:d.array(d.enum(Ur)),name:d.string(),data:d.record(d.string(),d.union([d.string(),d.number(),d.boolean()])).optional()});class Kl{constructor(e){V(this,"type");V(this,"available",!1);V(this,"bootResolve");V(this,"bootReject");V(this,"bootPromise");this.type=e,this.bootResolve=()=>{},this.bootReject=()=>{},this.bootPromise=new Promise((t,s)=>{this.bootResolve=()=>{this.available=!0,t()},this.bootReject=()=>{this.available=!1,s(new Error("boot error AnalyticsEntity"))}})}}const Br=d.object({group:d.number(),slug:d.string()}),Zr=d.object({collectAnalytics:d.boolean(),privacyAgreement:d.boolean()}),Wr=d.object({privacy:Zr.optional().describe(I.persist),experiment:Br.optional().describe(I.session),eventsBuffer:d.array(zr).describe(I.session)}).default({eventsBuffer:[]}),Hr=new X(Wr);class Kr extends G{constructor(t){super();V(this,"services",new Map);V(this,"saveEventPromises",[]);this.analyticsStateStorage=t}get experiment(){return this.analyticsStateStorage.state.experiment??null}get needPrivacyAcceptance(){return!this.analyticsStateStorage.state.privacy}get canSendAnalytics(){const{privacy:t}=this.analyticsStateStorage.state;return!!(t!=null&&t.privacyAgreement)&&!!(t!=null&&t.collectAnalytics)}get eventsBuffer(){return this.analyticsStateStorage.state.eventsBuffer}async boot(){await this.analyticsStateStorage.sync(),this.needPrivacyAcceptance&&await this.setPrivacy({collectAnalytics:!0,privacyAgreement:!0}),this.bootResolve(),await this.bootPromise}use(t){this.services.has(t.type)||this.services.set(t.type,t)}sendEvent(t){if(this.needPrivacyAcceptance){this.saveEventPromises.push(this.saveEventToBuffer(t));return}this.canSendAnalytics&&t.types.forEach(s=>{const n=this.services.get(s);n==null||n.send(t).catch(()=>{})})}async setExperiment(t){await this.analyticsStateStorage.setItems({experiment:t})}async setPrivacy(t){await this.analyticsStateStorage.setItems({privacy:t}),this.canSendAnalytics&&this.sendBufferedEvents(),await this.clearEventsBuffer()}async saveEventToBuffer(t){await Promise.all([...this.saveEventPromises]);const s=this.analyticsStateStorage.state.eventsBuffer;await this.analyticsStateStorage.setItems({eventsBuffer:[...s,t]})}sendBufferedEvents(){[...this.eventsBuffer].forEach(s=>{this.sendEvent(s)})}async clearEventsBuffer(){await this.analyticsStateStorage.setItems({eventsBuffer:[]}),this.saveEventPromises.length=0}}const qr=new Z("analytics",Hr),qe=new Kr(qr),Es="https://veepn.com/",mn="udid",Gr=["local","cookie","new"],Jr=d.object({type:d.enum(Gr),value:d.string()}),Yr=d.object({width:d.number(),height:d.number()}),Xr=d.object({installedAt:d.number().optional().describe(I.persist),deviceScreen:Yr.describe(I.persist),criticalError:d.boolean().describe(I.persist),udid:Jr.describe(I.persist),hasInternetConnection:d.boolean().describe(I.session)}).default({deviceScreen:{width:0,height:0},criticalError:!1,udid:{type:"new",value:""},hasInternetConnection:navigator.onLine}),Qr=new X(Xr);class sn extends G{constructor(t){super();V(this,"glogalBootResolve");V(this,"appBooted");this.globalStateStorage=t,this.glogalBootResolve=()=>{},this.appBooted=new Promise(s=>{this.glogalBootResolve=s})}get udid(){return this.globalStateStorage.state.udid}get criticalError(){return this.globalStateStorage.state.criticalError}get hasInternetConnection(){return this.globalStateStorage.state.hasInternetConnection}get installedAt(){return this.globalStateStorage.state.installedAt??0}get deviceScreen(){return this.globalStateStorage.state.deviceScreen}async boot(){await this.globalStateStorage.sync(),this.globalStateStorage.state.installedAt||await this.setAppInstallationDate(Date.now());const t=await this.generateUdid();await this.setUdid(t),this.bootResolve(),await this.bootPromise}globalboot(){this.glogalBootResolve()}async setCriticalError(t){await this.globalStateStorage.setItems({criticalError:t})}async setDeviceScreenData(t){await this.globalStateStorage.setItems({deviceScreen:t})}async setAppInstallationDate(t){await this.globalStateStorage.setItems({installedAt:t})}async setUdid(t){await sn.setCookiesUdid(t.value),await this.globalStateStorage.setItems({udid:t})}async setHasInternetConnection(t){await this.globalStateStorage.setItems({hasInternetConnection:t})}async generateUdid(){const{udid:t}=await this.globalStateStorage.getItems("udid");if(t.value)return{type:"local",value:t.value};const s=await F.cookies.get({url:Es,name:"udid"});return s!=null&&s.value?{type:"cookie",value:s.value}:{type:"new",value:crypto.randomUUID()}}static async setCookiesUdid(t){const s=new URL(Es),n=new Date;n.setFullYear(n.getFullYear()+1),await F.cookies.set({name:mn,value:t,url:s.href,domain:`.${s.hostname}`,expirationDate:n.getTime()/1e3})}async getCookiesUdid(){Promise.resolve(this).catch(()=>{});const t=new URL(Es),s=await F.cookies.get({name:mn,url:t.href});return s==null?void 0:s.value}}const ea=new Z("global-state",Qr),ft=new sn(ea);function ta(i){return!!(typeof i=="object"&&i!==null&&"errors"in i&&Array.isArray(i.errors))}function sa(i){return typeof i=="object"&&i!==null&&"success"in i&&"data"in i}function na(i){return typeof i=="object"&&i!==null&&"name"in i&&"message"in i&&"code"in i}class fe{constructor(){V(this,"ABORT_FETCH_TIME",5e3)}async request(e){try{const t=new AbortController,s=e.timeout??this.ABORT_FETCH_TIME,n=setTimeout(()=>t.abort(),s),r=await fetch(e.url,{signal:t.signal,method:e.method,headers:{Accept:"application/json","Content-Type":"application/json",...e.headers??{}},...e.body?{body:JSON.stringify(e.body)}:{},...e.cache?{cache:e.cache}:{}});if(clearTimeout(n),!r.ok)throw r;const a=r.headers.get("content-type"),o=a!=null&&a.includes("application/json")?await r.json():await r.text();return sa(o)?o:{success:!0,data:o}}catch(t){if(t instanceof Response)try{const s=await t.json();return ta(s)?s:{success:!1,errors:[{name:"fetch",message:`Fetch error at ${e.url}. ${t.statusText}`,status:t.status,code:1}]}}catch{return{success:!1,errors:[{name:"fetch",message:`Fetch error at ${e.url}. ${t.statusText}`,status:t.status,code:2}]}}return na(t)?{success:!1,errors:[{name:t.name,message:"Server take long time to response. Please, try again or contact us for assistance.",status:0,code:t.code}]}:{success:!1,errors:[{name:"custom",message:`Fetch error at ${e.url}`,status:0,code:4}]}}}static getStatusCodeMessage(e){var s,n,r,a;return(((s=e.errors[0])==null?void 0:s.status)||((n=e.errors[0])==null?void 0:n.message)||((r=e.errors[0])==null?void 0:r.name)||((a=e.errors[0])==null?void 0:a.code)||"unknown").toString()}}const qt=new fe,hi=["en","ru","vi","uk","pl","no","it","he","fr","fi","nl","da","bg","es","de","zh_CN","ar","hi","bn","ta"],Ts="en",ia=new Map([["en","English"],["ru",""],["vi","Ting Vit"],["uk",""],["pl","Polskie"],["no","Norsk"],["it","Italiano"],["he",""],["fr","Franais"],["fi","Suomalainen"],["nl","Nederlands"],["da","Dansk"],["bg",""],["es","Espaol"],["de","Deutsche"],["zh_CN",""],["ar",""],["hi",""],["bn",""],["ta",""]]),ra=d.object({locale:d.enum(hi).optional().describe(I.persist)}).default({}),aa=new X(ra);function vn(i){return!!(i&&typeof i=="string"&&hi.includes(i))}const oa={"connect-status":{off:"  ",on:"   {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"     .","not-controllable":"       .","no-location":"     .","server-config":"       .",captive:"      .","no-internet":"      ."},"disconnect-errors":{"remove-proxy":"        ."},"download-notification":{title:"  VPN  ",message:"      "},"update-notification":{title:"  ",message:"   {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"      .","not-controllable":"          .","remove-webrtc":"    WebRTC."}},ca=Object.freeze(Object.defineProperty({__proto__:null,default:oa},Symbol.toStringTag,{value:"Module"})),la={"connect-status":{off:"  ",on:"   {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"  , ,   .","not-controllable":"  ,        .","no-location":"  ,    .","server-config":"  ,        .",captive:"  ,       .","no-internet":"  ,   ."},"disconnect-errors":{"remove-proxy":"    ,      ."},"download-notification":{title:"      VPN",message:"     ,     "},"update-notification":{title:"  ",message:"   {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":",    .","not-controllable":"          .","remove-webrtc":"       WebRTC."}},ua=Object.freeze(Object.defineProperty({__proto__:null,default:la},Symbol.toStringTag,{value:"Module"})),da={"connect-status":{off:"  ",on:"   {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"  ,      ","not-controllable":"  ,    ","no-location":" ,   .","server-config":" ,     ",captive:"  ,      ","no-internet":" ,    ."},"disconnect-errors":{"remove-proxy":"  ,     "},"download-notification":{title:"     ",message:"  ,      "},"update-notification":{title:"   ",message:" {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"    ","not-controllable":"      ","remove-webrtc":"WebRTC     "}},ha=Object.freeze(Object.defineProperty({__proto__:null,default:da},Symbol.toStringTag,{value:"Module"})),pa={"connect-status":{off:"Du er ikke forbundet",on:"Du er forbundet til {{tr_location}}."},"connect-errors":{"controlled-by-other-extensions":"Forbindelsen mislykkedes. Deaktiver venligst andre udvidelser.","not-controllable":"Forbindelsen mislykkedes, browserproxy kan ikke kontrolleres.","no-location":"Forbindelsesfejl, manglende forbindelsesplacering.","server-config":"Forbindelsesfejl, serverkonfigurationen kan ikke hentes.",captive:"Forbindelsen mislykkedes, kan ikke oprette proxyforbindelse.","no-internet":"Forbindelsesfejl, ingen netvrksforbindelse."},"disconnect-errors":{"remove-proxy":"Afbrydelsesfejl, fjernelse af proxyregler mislykkedes."},"download-notification":{title:"Prv vores VPN-klient til skrivebordet",message:"Beskyt hele din internetforbindelse, ikke kun browseren"},"update-notification":{title:"Udvidelse opdateret",message:"Velkommen til {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"Indstilling kontrolleret af anden udvidelse.","not-controllable":"Indstillingen kan ikke kontrolleres via dine browserindstillinger.","remove-webrtc":"Kan ikke rydde WebRTC-indstillinger."}},fa=Object.freeze(Object.defineProperty({__proto__:null,default:pa},Symbol.toStringTag,{value:"Module"})),ga={"connect-status":{off:"Sie sind nicht verbunden",on:"Sie sind mit {{tr_location}} verbunden"},"connect-errors":{"controlled-by-other-extensions":"Die Verbindung ist fehlgeschlagen. Bitte deaktivieren Sie andere Erweiterungen.","not-controllable":"Verbindung fehlgeschlagen, Browser-Proxy ist nicht steuerbar.","no-location":"Verbindungsfehler, Verbindungsstandort fehlt.","server-config":"Verbindungsfehler, Serverkonfiguration kann nicht abgerufen werden.",captive:"Verbindung fehlgeschlagen, Proxy-Verbindung kann nicht hergestellt werden.","no-internet":"Verbindungsfehler, keine Netzwerkverbindung."},"disconnect-errors":{"remove-proxy":"Fehler beim Trennen der Verbindung. Das Entfernen der Proxy-Regeln ist fehlgeschlagen."},"download-notification":{title:"Testen Sie unseren Desktop VPN Client",message:"Schtzen Sie Ihre gesamte Internetverbindung, nicht nur den Browser"},"update-notification":{title:"Erweiterung aktualisiert",message:"Willkommen zu {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"Einstellung wird von einer anderen Nebenstelle gesteuert.","not-controllable":"Die Einstellung kann nicht ber Ihre Browsereinstellungen gesteuert werden.","remove-webrtc":"WebRTC-Einstellungen knnen nicht gelscht werden."}},ma=Object.freeze(Object.defineProperty({__proto__:null,default:ga},Symbol.toStringTag,{value:"Module"})),va={"connect-status":{off:"You are not connected",on:"You are connected to {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"Connection failed. Please disable other extensions.","not-controllable":"Connection failed. Browser proxy is not controllable.","no-location":"Connection Error. Missing connection location.","server-config":"Connection Error. Can't fetch server config.",captive:"Connection failed. Cannot establish proxy connection.","no-internet":"Connection Error. No Network connection."},"disconnect-errors":{"remove-proxy":"Disconnect Error. Proxy rules remove failed."},"download-notification":{title:"Try our Desktop VPN Client",message:"Protect your entire internet connection, not just browser"},"update-notification":{title:"Extension updated",message:"Welcome to {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"Setting controlled by other extension.","not-controllable":"Setting not controllable through your browser settings.","remove-webrtc":"Can't clear WebRTC settings."}},ba=Object.freeze(Object.defineProperty({__proto__:null,default:va},Symbol.toStringTag,{value:"Module"})),ya={"connect-status":{off:"No est conectado",on:"Ests conectado a {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"La conexin fall. Desactive otras extensiones.","not-controllable":"La conexin fall, el proxy del navegador no es controlable.","no-location":"Error de conexin, falta ubicacin de conexin.","server-config":"Error de conexin, no se puede recuperar la configuracin del servidor.",captive:"La conexin fall, no se puede establecer la conexin proxy.","no-internet":"Error de conexin, sin conexin de red."},"disconnect-errors":{"remove-proxy":"Error de desconexin, error al eliminar las reglas de proxy."},"download-notification":{title:"Pruebe nuestro cliente VPN de escritorio",message:"Proteja toda su conexin a Internet, no slo el navegador"},"update-notification":{title:"Extensin actualizada",message:"Bienvenido a {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"Configuracin controlada por otra extensin.","not-controllable":"Configuracin no controlable a travs de la configuracin de su navegador.","remove-webrtc":"No se puede borrar la configuracin de WebRTC."}},wa=Object.freeze(Object.defineProperty({__proto__:null,default:ya},Symbol.toStringTag,{value:"Module"})),Sa={"connect-status":{off:"Et ole yhteydess",on:"Olet yhteydess {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"Yhteys eponnistui. Poista muut laajennukset kytst.","not-controllable":"Yhteys eponnistui, selaimen vlityspalvelinta ei voida ohjata.","no-location":"Yhteysvirhe, yhteyspaikka puuttuu.","server-config":"Yhteysvirhe, palvelimen konfiguraatiota ei voi noutaa.",captive:"Yhteys eponnistui, vlityspalvelinyhteytt ei voi muodostaa.","no-internet":"Yhteysvirhe, ei verkkoyhteytt."},"disconnect-errors":{"remove-proxy":"Yhteyden katkaisuvirhe, vlityspalvelimen sntjen poistaminen eponnistui."},"download-notification":{title:"Kokeile typydn VPN-asiakasta",message:"Suojaa koko internet-yhteys, ei vain selainta."},"update-notification":{title:"Laajennus pivitetty",message:"Tervetuloa {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"Asetusta ohjaa toinen laajennus.","not-controllable":"Asetusta ei voi hallita selaimesi asetuksista.","remove-webrtc":"WebRTC-asetuksia ei voi tyhjent."}},_a=Object.freeze(Object.defineProperty({__proto__:null,default:Sa},Symbol.toStringTag,{value:"Module"})),xa={"connect-status":{off:"Vous n'tes pas connect",on:"Vous tes connect  {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"La connexion a chou. Veuillez dsactiver les autres extensions.","not-controllable":"La connexion a chou, le proxy du navigateur n'est pas contrlable.","no-location":"Erreur de connexion, emplacement de connexion manquant.","server-config":"Erreur de connexion, impossible de rcuprer la configuration du serveur.",captive:"chec de la connexion, impossible d'tablir une connexion proxy.","no-internet":"Erreur de connexion, pas de connexion rseau."},"disconnect-errors":{"remove-proxy":"Erreur de dconnexion. La suppression des rgles de proxy a chou."},"download-notification":{title:"Essayez notre client VPN de bureau",message:"Protgez l'ensemble de votre connexion Internet, et pas seulement votre navigateur"},"update-notification":{title:"Extension mise  jour",message:"Bienvenue  {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"Paramtre contrl par une autre extension.","not-controllable":"Paramtre non contrlable via les paramtres de votre navigateur.","remove-webrtc":"Impossible d'effacer les paramtres WebRTC."}},ka=Object.freeze(Object.defineProperty({__proto__:null,default:xa},Symbol.toStringTag,{value:"Module"})),Ca={"connect-status":{off:"  ",on:"   {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":" ,    .","not-controllable":" , -proxy     .","no-location":" ,   .","server-config":" ,      .",captive:" ,     proxy.","no-internet":" ,   ."},"disconnect-errors":{"remove-proxy":" ,   Proxy ."},"download-notification":{title:"   -VPN   ",message:"     ,    "},"update-notification":{title:" ",message:"   {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"     .","not-controllable":"       .","remove-webrtc":"     WebRTC."}},Aa=Object.freeze(Object.defineProperty({__proto__:null,default:Ca},Symbol.toStringTag,{value:"Module"})),Ea={"connect-status":{off:"   ",on:"    {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":" ,     ","not-controllable":" ,     ","no-location":" ,   ","server-config":" ,      ",captive:" ,       ","no-internet":" ,    ."},"disconnect-errors":{"remove-proxy":" ,     "},"download-notification":{title:"     ",message:"   ,        "},"update-notification":{title:"   ",message:"   {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"    .","not-controllable":"           ","remove-webrtc":"WebRTC      ."}},Ta=Object.freeze(Object.defineProperty({__proto__:null,default:Ea},Symbol.toStringTag,{value:"Module"})),Oa={"connect-status":{off:"Non siete connessi",on:"Sei connesso a {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"Connessione non riuscita. Disattiva le altre estensioni.","not-controllable":"Connessione non riuscita, il proxy del browser non  controllabile.","no-location":"Errore di connessione, posizione della connessione mancante.","server-config":"Errore di connessione, impossibile recuperare la configurazione del server.",captive:"Connessione non riuscita, impossibile stabilire una connessione proxy.","no-internet":"Errore di connessione, nessuna connessione di rete."},"disconnect-errors":{"remove-proxy":"Errore di disconnessione, rimozione delle regole proxy non riuscita."},"download-notification":{title:"Provate il nostro client VPN per desktop",message:"Proteggere l'intera connessione a Internet, non solo il browser"},"update-notification":{title:"Estensione aggiornata",message:"Benvenuto a {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"Impostazione controllata da un altro interno.","not-controllable":"Impostazione non controllabile tramite le impostazioni del browser.","remove-webrtc":"Impossibile cancellare le impostazioni WebRTC."}},La=Object.freeze(Object.defineProperty({__proto__:null,default:Oa},Symbol.toStringTag,{value:"Module"})),Ia={"connect-status":{off:"U bent niet verbonden",on:"Je bent verbonden met {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"Verbinding mislukt. Schakel andere extensies uit.","not-controllable":"Verbinding mislukt, browserproxy kan niet worden beheerd.","no-location":"Verbindingsfout, ontbrekende verbindingslocatie.","server-config":"Verbindingsfout, kan serverconfiguratie niet ophalen.",captive:"Verbinding mislukt. Kan geen proxyverbinding tot stand brengen.","no-internet":"Verbindingsfout, geen netwerkverbinding."},"disconnect-errors":{"remove-proxy":"Verbindingsfout, verwijderen van proxyregels mislukt."},"download-notification":{title:"Probeer onze Desktop VPN-client",message:"Bescherm je hele internetverbinding, niet alleen je browser"},"update-notification":{title:"Extensie bijgewerkt",message:"Welkom bij {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"Instelling beheerd door een ander toestel.","not-controllable":"Instelling kan niet worden beheerd via uw browserinstellingen.","remove-webrtc":"Kan WebRTC-instellingen niet wissen."}},Ra=Object.freeze(Object.defineProperty({__proto__:null,default:Ia},Symbol.toStringTag,{value:"Module"})),Pa={"connect-status":{off:"Du er ikke tilkoblet",on:"Du er koblet til {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"Tilkobling mislyktes. Deaktiver andre utvidelser.","not-controllable":"Tilkobling mislyktes, nettleserproxy er ikke kontrollerbar.","no-location":"Tilkoblingsfeil, manglende tilkoblingssted.","server-config":"Tilkoblingsfeil, kan ikke hente serverkonfig.",captive:"Tilkobling mislyktes. Kan ikke opprette proxy-tilkobling.","no-internet":"Tilkoblingsfeil, ingen nettverkstilkobling."},"disconnect-errors":{"remove-proxy":"Koble fra feil, fjerning av proxy-regler mislyktes."},"download-notification":{title:"Prv vr VPN-klient for skrivebordet",message:"Beskytt hele internettforbindelsen din, ikke bare nettleseren"},"update-notification":{title:"Utvidelsen er oppdatert",message:"Velkommen til {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"Innstilling kontrollert av annen utvidelse.","not-controllable":"Innstillingen kan ikke kontrolleres gjennom nettleserinnstillingene.","remove-webrtc":"Kan ikke slette WebRTC-innstillingene."}},Da=Object.freeze(Object.defineProperty({__proto__:null,default:Pa},Symbol.toStringTag,{value:"Module"})),ja={"connect-status":{off:"Nie jeste poczony",on:"Jeste poczony z {{tr_location}}."},"connect-errors":{"controlled-by-other-extensions":"Poczenie nie powiodo si. Wycz inne rozszerzenia.","not-controllable":"Poczenie nie powiodo si, nie mona kontrolowa serwera proxy przegldarki.","no-location":"Bd poczenia, brak lokalizacji poczenia.","server-config":"Bd poczenia. Nie mona pobra konfiguracji serwera.",captive:"Poczenie nie powiodo si. Nie mona nawiza poczenia proxy.","no-internet":"Bd poczenia, brak poczenia sieciowego."},"disconnect-errors":{"remove-proxy":"Bd rozczenia, usunicie regu proxy nie powiodo si."},"download-notification":{title:"Wyprbuj naszego klienta VPN dla komputerw stacjonarnych",message:"Ochrona caego poczenia internetowego, nie tylko przegldarki"},"update-notification":{title:"Rozszerzenie zaktualizowane",message:"Witamy w {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"Ustawienie kontrolowane przez inne rozszerzenie.","not-controllable":"Ustawienie, ktrego nie mona kontrolowa za pomoc ustawie przegldarki.","remove-webrtc":"Nie mona wyczyci ustawie WebRTC."}},Na=Object.freeze(Object.defineProperty({__proto__:null,default:ja},Symbol.toStringTag,{value:"Module"})),$a={"connect-status":{off:"  ",on:"   {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"  .   .","not-controllable":"  , -   .","no-location":" ,   .","server-config":" .    .",captive:"   .   -.","no-internet":" .    ."},"disconnect-errors":{"remove-proxy":" .     ."},"download-notification":{title:"   VPN-",message:"   -,    "},"update-notification":{title:" ",message:"   {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"   .","not-controllable":"      .","remove-webrtc":"    WebRTC."}},Ma=Object.freeze(Object.defineProperty({__proto__:null,default:$a},Symbol.toStringTag,{value:"Module"})),Fa={"connect-status":{off:" ",on:"  {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":" ,   .","not-controllable":" ,    .","no-location":" ,   .","server-config":" ,    .",captive:" ,    .","no-internet":" ,   ."},"disconnect-errors":{"remove-proxy":" ,    ."},"download-notification":{title:"  VPN  ",message:"      "},"update-notification":{title:" ",message:" {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"    .","not-controllable":"      .","remove-webrtc":"WebRTC   ."}},Va=Object.freeze(Object.defineProperty({__proto__:null,default:Fa},Symbol.toStringTag,{value:"Module"})),Ua={"connect-status":{off:"  ",on:"   {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":" .   .","not-controllable":" , - -  .","no-location":" ,   .","server-config":" ,     .",captive:" ,   -.","no-internet":" .   '."},"disconnect-errors":{"remove-proxy":" ,     ."},"download-notification":{title:"  VPN  ",message:"    ,     "},"update-notification":{title:" ",message:"   {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"   .","not-controllable":"      .","remove-webrtc":"    WebRTC."}},za=Object.freeze(Object.defineProperty({__proto__:null,default:Ua},Symbol.toStringTag,{value:"Module"})),Ba={"connect-status":{off:"Bn cha c kt ni",on:"Bn c kt ni vi {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"Kt ni khng thnh cng, vui lng tt cc tin ch m rng khc.","not-controllable":"Kt ni khng thnh cng, proxy trnh duyt khng th kim sot c.","no-location":"Li kt ni, Thiu v tr kt ni.","server-config":"Li kt ni, Khng th tm np cu hnh my ch.",captive:"Kt ni khng thnh cng, Khng th thit lp kt ni proxy.","no-internet":"Li kt ni, Khng c kt ni mng."},"disconnect-errors":{"remove-proxy":"Li ngt kt ni, xa quy tc proxy khng thnh cng."},"download-notification":{title:"Hy dng th My khch VPN my tnh  bn ca chng ti",message:"Bo v ton b kt ni internet ca bn, khng ch trnh duyt"},"update-notification":{title:" cp nht tin ch m rng",message:"Cho mng bn n {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"Ci t c kim sot bi tin ch m rng khc.","not-controllable":"Ci t khng th kim sot c thng qua ci t trnh duyt ca bn.","remove-webrtc":"Khng th xa ci t WebRTC."}},Za=Object.freeze(Object.defineProperty({__proto__:null,default:Ba},Symbol.toStringTag,{value:"Module"})),Wa={"connect-status":{off:"",on:" {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"","not-controllable":"","no-location":"","server-config":"",captive:"","no-internet":""},"disconnect-errors":{"remove-proxy":""},"download-notification":{title:"VPN",message:""},"update-notification":{title:"",message:" {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"","not-controllable":"","remove-webrtc":" WebRTC "}},Ha=Object.freeze(Object.defineProperty({__proto__:null,default:Wa},Symbol.toStringTag,{value:"Module"})),P=i=>typeof i=="string",bt=()=>{let i,e;const t=new Promise((s,n)=>{i=s,e=n});return t.resolve=i,t.reject=e,t},bn=i=>i==null?"":""+i,Ka=(i,e,t)=>{i.forEach(s=>{e[s]&&(t[s]=e[s])})},qa=/###/g,yn=i=>i&&i.indexOf("###")>-1?i.replace(qa,"."):i,wn=i=>!i||P(i),Ot=(i,e,t)=>{const s=P(e)?e.split("."):e;let n=0;for(;n<s.length-1;){if(wn(i))return{};const r=yn(s[n]);!i[r]&&t&&(i[r]=new t),Object.prototype.hasOwnProperty.call(i,r)?i=i[r]:i={},++n}return wn(i)?{}:{obj:i,k:yn(s[n])}},Sn=(i,e,t)=>{const{obj:s,k:n}=Ot(i,e,Object);if(s!==void 0||e.length===1){s[n]=t;return}let r=e[e.length-1],a=e.slice(0,e.length-1),o=Ot(i,a,Object);for(;o.obj===void 0&&a.length;)r=`${a[a.length-1]}.${r}`,a=a.slice(0,a.length-1),o=Ot(i,a,Object),o!=null&&o.obj&&typeof o.obj[`${o.k}.${r}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${r}`]=t},Ga=(i,e,t,s)=>{const{obj:n,k:r}=Ot(i,e,Object);n[r]=n[r]||[],n[r].push(t)},ls=(i,e)=>{const{obj:t,k:s}=Ot(i,e);if(t&&Object.prototype.hasOwnProperty.call(t,s))return t[s]},Ja=(i,e,t)=>{const s=ls(i,t);return s!==void 0?s:ls(e,t)},pi=(i,e,t)=>{for(const s in e)s!=="__proto__"&&s!=="constructor"&&(s in i?P(i[s])||i[s]instanceof String||P(e[s])||e[s]instanceof String?t&&(i[s]=e[s]):pi(i[s],e[s],t):i[s]=e[s]);return i},Ye=i=>i.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Ya={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Xa=i=>P(i)?i.replace(/[&<>"'\/]/g,e=>Ya[e]):i;class Qa{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const s=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,s),this.regExpQueue.push(e),s}}const eo=[" ",",","?","!",";"],to=new Qa(20),so=(i,e,t)=>{e=e||"",t=t||"";const s=eo.filter(a=>e.indexOf(a)<0&&t.indexOf(a)<0);if(s.length===0)return!0;const n=to.getRegExp(`(${s.map(a=>a==="?"?"\\?":a).join("|")})`);let r=!n.test(i);if(!r){const a=i.indexOf(t);a>0&&!n.test(i.substring(0,a))&&(r=!0)}return r},Ws=function(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!i)return;if(i[e])return Object.prototype.hasOwnProperty.call(i,e)?i[e]:void 0;const s=e.split(t);let n=i;for(let r=0;r<s.length;){if(!n||typeof n!="object")return;let a,o="";for(let c=r;c<s.length;++c)if(c!==r&&(o+=t),o+=s[c],a=n[o],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&c<s.length-1)continue;r+=c-r+1;break}n=a}return n},us=i=>i==null?void 0:i.replace("_","-"),no={type:"logger",log(i){this.output("log",i)},warn(i){this.output("warn",i)},error(i){this.output("error",i)},output(i,e){var t,s;(s=(t=console==null?void 0:console[i])==null?void 0:t.apply)==null||s.call(t,console,e)}};class ds{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||no,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,s,n){return n&&!this.debug?null:(P(e[0])&&(e[0]=`${s}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new ds(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new ds(this.logger,e)}}var he=new ds;class Ss{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(s=>{this.observers[s]||(this.observers[s]=new Map);const n=this.observers[s].get(t)||0;this.observers[s].set(t,n+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),n=1;n<t;n++)s[n-1]=arguments[n];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(a=>{let[o,c]=a;for(let u=0;u<c;u++)o(...s)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(a=>{let[o,c]=a;for(let u=0;u<c;u++)o.apply(o,[e,...s])})}}class _n extends Ss{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,s){var u,p;let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const r=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,a=n.ignoreJSONStructure!==void 0?n.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,t],s&&(Array.isArray(s)?o.push(...s):P(s)&&r?o.push(...s.split(r)):o.push(s)));const c=ls(this.data,o);return!c&&!t&&!s&&e.indexOf(".")>-1&&(e=o[0],t=o[1],s=o.slice(2).join(".")),c||!a||!P(s)?c:Ws((p=(u=this.data)==null?void 0:u[e])==null?void 0:p[t],s,r)}addResource(e,t,s,n){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const a=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let o=[e,t];s&&(o=o.concat(a?s.split(a):s)),e.indexOf(".")>-1&&(o=e.split("."),n=t,t=o[1]),this.addNamespaces(t),Sn(this.data,o,n),r.silent||this.emit("added",e,t,s,n)}addResources(e,t,s){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const r in s)(P(s[r])||Array.isArray(s[r]))&&this.addResource(e,t,r,s[r],{silent:!0});n.silent||this.emit("added",e,t,s)}addResourceBundle(e,t,s,n,r){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),n=s,s=t,t=o[1]),this.addNamespaces(t);let c=ls(this.data,o)||{};a.skipCopy||(s=JSON.parse(JSON.stringify(s))),n?pi(c,s,r):c={...c,...s},Sn(this.data,o,c),a.silent||this.emit("added",e,t,s)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(n=>t[n]&&Object.keys(t[n]).length>0)}toJSON(){return this.data}}var fi={processors:{},addPostProcessor(i){this.processors[i.name]=i},handle(i,e,t,s,n){return i.forEach(r=>{var a;e=((a=this.processors[r])==null?void 0:a.process(e,t,s,n))??e}),e}};const xn={},kn=i=>!P(i)&&typeof i!="boolean"&&typeof i!="number";class hs extends Ss{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Ka(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=he.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const s=this.resolve(e,t);return(s==null?void 0:s.res)!==void 0}extractFromKey(e,t){let s=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;s===void 0&&(s=":");const n=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let r=t.ns||this.options.defaultNS||[];const a=s&&e.indexOf(s)>-1,o=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!so(e,s,n);if(a&&!o){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:P(r)?[r]:r};const u=e.split(s);(s!==n||s===n&&this.options.ns.indexOf(u[0])>-1)&&(r=u.shift()),e=u.join(n)}return{key:e,namespaces:P(r)?[r]:r}}translate(e,t,s){if(typeof t!="object"&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),typeof t=="object"&&(t={...t}),t||(t={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const n=t.returnDetails!==void 0?t.returnDetails:this.options.returnDetails,r=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator,{key:a,namespaces:o}=this.extractFromKey(e[e.length-1],t),c=o[o.length-1],u=t.lng||this.language,p=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((u==null?void 0:u.toLowerCase())==="cimode"){if(p){const ee=t.nsSeparator||this.options.nsSeparator;return n?{res:`${c}${ee}${a}`,usedKey:a,exactUsedKey:a,usedLng:u,usedNS:c,usedParams:this.getUsedParamsDetails(t)}:`${c}${ee}${a}`}return n?{res:a,usedKey:a,exactUsedKey:a,usedLng:u,usedNS:c,usedParams:this.getUsedParamsDetails(t)}:a}const m=this.resolve(e,t);let v=m==null?void 0:m.res;const b=(m==null?void 0:m.usedKey)||a,l=(m==null?void 0:m.exactUsedKey)||a,h=["[object Number]","[object Function]","[object RegExp]"],f=t.joinArrays!==void 0?t.joinArrays:this.options.joinArrays,g=!this.i18nFormat||this.i18nFormat.handleAsObject,x=t.count!==void 0&&!P(t.count),C=hs.hasDefaultValue(t),$=x?this.pluralResolver.getSuffix(u,t.count,t):"",Te=t.ordinal&&x?this.pluralResolver.getSuffix(u,t.count,{ordinal:!1}):"",Oe=x&&!t.ordinal&&t.count===0,B=Oe&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${$}`]||t[`defaultValue${Te}`]||t.defaultValue;let Q=v;g&&!v&&C&&(Q=B);const Ge=kn(Q),Je=Object.prototype.toString.apply(Q);if(g&&Q&&Ge&&h.indexOf(Je)<0&&!(P(f)&&Array.isArray(Q))){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const ee=this.options.returnedObjectHandler?this.options.returnedObjectHandler(b,Q,{...t,ns:o}):`key '${a} (${this.language})' returned an object instead of string.`;return n?(m.res=ee,m.usedParams=this.getUsedParamsDetails(t),m):ee}if(r){const ee=Array.isArray(Q),ae=ee?[]:{},un=ee?l:b;for(const ue in Q)if(Object.prototype.hasOwnProperty.call(Q,ue)){const be=`${un}${r}${ue}`;C&&!v?ae[ue]=this.translate(be,{...t,defaultValue:kn(B)?B[ue]:void 0,joinArrays:!1,ns:o}):ae[ue]=this.translate(be,{...t,joinArrays:!1,ns:o}),ae[ue]===be&&(ae[ue]=Q[ue])}v=ae}}else if(g&&P(f)&&Array.isArray(v))v=v.join(f),v&&(v=this.extendTranslation(v,e,t,s));else{let ee=!1,ae=!1;!this.isValidLookup(v)&&C&&(ee=!0,v=B),this.isValidLookup(v)||(ae=!0,v=a);const ue=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&ae?void 0:v,be=C&&B!==v&&this.options.updateMissing;if(ae||ee||be){if(this.logger.log(be?"updateKey":"missingKey",u,c,a,be?B:v),r){const te=this.resolve(a,{...t,keySeparator:!1});te&&te.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let mt=[];const Gt=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Gt&&Gt[0])for(let te=0;te<Gt.length;te++)mt.push(Gt[te]);else this.options.saveMissingTo==="all"?mt=this.languageUtils.toResolveHierarchy(t.lng||this.language):mt.push(t.lng||this.language);const dn=(te,Me,vt)=>{var pn;const hn=C&&vt!==v?vt:ue;this.options.missingKeyHandler?this.options.missingKeyHandler(te,c,Me,hn,be,t):(pn=this.backendConnector)!=null&&pn.saveMissing&&this.backendConnector.saveMissing(te,c,Me,hn,be,t),this.emit("missingKey",te,c,Me,v)};this.options.saveMissing&&(this.options.saveMissingPlurals&&x?mt.forEach(te=>{const Me=this.pluralResolver.getSuffixes(te,t);Oe&&t[`defaultValue${this.options.pluralSeparator}zero`]&&Me.indexOf(`${this.options.pluralSeparator}zero`)<0&&Me.push(`${this.options.pluralSeparator}zero`),Me.forEach(vt=>{dn([te],a+vt,t[`defaultValue${vt}`]||B)})}):dn(mt,a,B))}v=this.extendTranslation(v,e,t,m,s),ae&&v===a&&this.options.appendNamespaceToMissingKey&&(v=`${c}:${a}`),(ae||ee)&&this.options.parseMissingKeyHandler&&(v=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}:${a}`:a,ee?v:void 0))}return n?(m.res=v,m.usedParams=this.getUsedParamsDetails(t),m):v}extendTranslation(e,t,s,n,r){var u,p;var a=this;if((u=this.i18nFormat)!=null&&u.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...s},s.lng||this.language||n.usedLng,n.usedNS,n.usedKey,{resolved:n});else if(!s.skipInterpolation){s.interpolation&&this.interpolator.init({...s,interpolation:{...this.options.interpolation,...s.interpolation}});const m=P(e)&&(((p=s==null?void 0:s.interpolation)==null?void 0:p.skipOnVariables)!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let v;if(m){const l=e.match(this.interpolator.nestingRegexp);v=l&&l.length}let b=s.replace&&!P(s.replace)?s.replace:s;if(this.options.interpolation.defaultVariables&&(b={...this.options.interpolation.defaultVariables,...b}),e=this.interpolator.interpolate(e,b,s.lng||this.language||n.usedLng,s),m){const l=e.match(this.interpolator.nestingRegexp),h=l&&l.length;v<h&&(s.nest=!1)}!s.lng&&n&&n.res&&(s.lng=this.language||n.usedLng),s.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var l=arguments.length,h=new Array(l),f=0;f<l;f++)h[f]=arguments[f];return(r==null?void 0:r[0])===h[0]&&!s.context?(a.logger.warn(`It seems you are nesting recursively key: ${h[0]} in key: ${t[0]}`),null):a.translate(...h,t)},s)),s.interpolation&&this.interpolator.reset()}const o=s.postProcess||this.options.postProcess,c=P(o)?[o]:o;return e!=null&&(c!=null&&c.length)&&s.applyPostProcessor!==!1&&(e=fi.handle(c,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...n,usedParams:this.getUsedParamsDetails(s)},...s}:s,this)),e}resolve(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s,n,r,a,o;return P(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(s))return;const u=this.extractFromKey(c,t),p=u.key;n=p;let m=u.namespaces;this.options.fallbackNS&&(m=m.concat(this.options.fallbackNS));const v=t.count!==void 0&&!P(t.count),b=v&&!t.ordinal&&t.count===0,l=t.context!==void 0&&(P(t.context)||typeof t.context=="number")&&t.context!=="",h=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);m.forEach(f=>{var g,x;this.isValidLookup(s)||(o=f,!xn[`${h[0]}-${f}`]&&((g=this.utils)!=null&&g.hasLoadedNamespace)&&!((x=this.utils)!=null&&x.hasLoadedNamespace(o))&&(xn[`${h[0]}-${f}`]=!0,this.logger.warn(`key "${n}" for languages "${h.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),h.forEach(C=>{var Oe;if(this.isValidLookup(s))return;a=C;const $=[p];if((Oe=this.i18nFormat)!=null&&Oe.addLookupKeys)this.i18nFormat.addLookupKeys($,p,C,f,t);else{let B;v&&(B=this.pluralResolver.getSuffix(C,t.count,t));const Q=`${this.options.pluralSeparator}zero`,Ge=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(v&&($.push(p+B),t.ordinal&&B.indexOf(Ge)===0&&$.push(p+B.replace(Ge,this.options.pluralSeparator)),b&&$.push(p+Q)),l){const Je=`${p}${this.options.contextSeparator}${t.context}`;$.push(Je),v&&($.push(Je+B),t.ordinal&&B.indexOf(Ge)===0&&$.push(Je+B.replace(Ge,this.options.pluralSeparator)),b&&$.push(Je+Q))}}let Te;for(;Te=$.pop();)this.isValidLookup(s)||(r=Te,s=this.getResource(C,f,Te,t))}))})}),{res:s,usedKey:n,exactUsedKey:r,usedLng:a,usedNS:o}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,s){var r;let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return(r=this.i18nFormat)!=null&&r.getResource?this.i18nFormat.getResource(e,t,s,n):this.resourceStore.getResource(e,t,s,n)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],s=e.replace&&!P(e.replace);let n=s?e.replace:e;if(s&&typeof e.count<"u"&&(n.count=e.count),this.options.interpolation.defaultVariables&&(n={...this.options.interpolation.defaultVariables,...n}),!s){n={...n};for(const r of t)delete n[r]}return n}static hasDefaultValue(e){const t="defaultValue";for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&t===s.substring(0,t.length)&&e[s]!==void 0)return!0;return!1}}class Cn{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=he.create("languageUtils")}getScriptPartFromCode(e){if(e=us(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=us(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(P(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(s=>{if(t)return;const n=this.formatLanguageCode(s);(!this.options.supportedLngs||this.isSupportedCode(n))&&(t=n)}),!t&&this.options.supportedLngs&&e.forEach(s=>{if(t)return;const n=this.getLanguagePartFromCode(s);if(this.isSupportedCode(n))return t=n;t=this.options.supportedLngs.find(r=>{if(r===n)return r;if(!(r.indexOf("-")<0&&n.indexOf("-")<0)&&(r.indexOf("-")>0&&n.indexOf("-")<0&&r.substring(0,r.indexOf("-"))===n||r.indexOf(n)===0&&n.length>1))return r})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),P(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let s=e[t];return s||(s=e[this.getScriptPartFromCode(t)]),s||(s=e[this.formatLanguageCode(t)]),s||(s=e[this.getLanguagePartFromCode(t)]),s||(s=e.default),s||[]}toResolveHierarchy(e,t){const s=this.getFallbackCodes(t||this.options.fallbackLng||[],e),n=[],r=a=>{a&&(this.isSupportedCode(a)?n.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return P(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&r(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&r(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&r(this.getLanguagePartFromCode(e))):P(e)&&r(this.formatLanguageCode(e)),s.forEach(a=>{n.indexOf(a)<0&&r(this.formatLanguageCode(a))}),n}}const An={zero:0,one:1,two:2,few:3,many:4,other:5},En={select:i=>i===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class io{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=he.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=us(e==="dev"?"en":e),n=t.ordinal?"ordinal":"cardinal",r=JSON.stringify({cleanedCode:s,type:n});if(r in this.pluralRulesCache)return this.pluralRulesCache[r];let a;try{a=new Intl.PluralRules(s,{type:n})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),En;if(!e.match(/-|_/))return En;const c=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(c,t)}return this.pluralRulesCache[r]=a,a}needsPlural(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getRule(e,t);return s||(s=this.getRule("dev",t)),(s==null?void 0:s.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,s).map(n=>`${t}${n}`)}getSuffixes(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getRule(e,t);return s||(s=this.getRule("dev",t)),s?s.resolvedOptions().pluralCategories.sort((n,r)=>An[n]-An[r]).map(n=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${n}`):[]}getSuffix(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=this.getRule(e,s);return n?`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${n.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,s))}}const Tn=function(i,e,t){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,r=Ja(i,e,t);return!r&&n&&P(t)&&(r=Ws(i,t,s),r===void 0&&(r=Ws(e,t,s))),r},Os=i=>i.replace(/\$/g,"$$$$");class ro{constructor(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=he.create("interpolator"),this.options=e,this.format=((t=e==null?void 0:e.interpolation)==null?void 0:t.format)||(s=>s),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:s,useRawValueToEscape:n,prefix:r,prefixEscaped:a,suffix:o,suffixEscaped:c,formatSeparator:u,unescapeSuffix:p,unescapePrefix:m,nestingPrefix:v,nestingPrefixEscaped:b,nestingSuffix:l,nestingSuffixEscaped:h,nestingOptionsSeparator:f,maxReplaces:g,alwaysFormat:x}=e.interpolation;this.escape=t!==void 0?t:Xa,this.escapeValue=s!==void 0?s:!0,this.useRawValueToEscape=n!==void 0?n:!1,this.prefix=r?Ye(r):a||"{{",this.suffix=o?Ye(o):c||"}}",this.formatSeparator=u||",",this.unescapePrefix=p?"":m||"-",this.unescapeSuffix=this.unescapePrefix?"":p||"",this.nestingPrefix=v?Ye(v):b||Ye("$t("),this.nestingSuffix=l?Ye(l):h||Ye(")"),this.nestingOptionsSeparator=f||",",this.maxReplaces=g||1e3,this.alwaysFormat=x!==void 0?x:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,s)=>(t==null?void 0:t.source)===s?(t.lastIndex=0,t):new RegExp(s,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,s,n){var b;let r,a,o;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=l=>{if(l.indexOf(this.formatSeparator)<0){const x=Tn(t,c,l,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(x,void 0,s,{...n,...t,interpolationkey:l}):x}const h=l.split(this.formatSeparator),f=h.shift().trim(),g=h.join(this.formatSeparator).trim();return this.format(Tn(t,c,f,this.options.keySeparator,this.options.ignoreJSONStructure),g,s,{...n,...t,interpolationkey:f})};this.resetRegExp();const p=(n==null?void 0:n.missingInterpolationHandler)||this.options.missingInterpolationHandler,m=((b=n==null?void 0:n.interpolation)==null?void 0:b.skipOnVariables)!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:l=>Os(l)},{regex:this.regexp,safeValue:l=>this.escapeValue?Os(this.escape(l)):Os(l)}].forEach(l=>{for(o=0;r=l.regex.exec(e);){const h=r[1].trim();if(a=u(h),a===void 0)if(typeof p=="function"){const g=p(e,r,n);a=P(g)?g:""}else if(n&&Object.prototype.hasOwnProperty.call(n,h))a="";else if(m){a=r[0];continue}else this.logger.warn(`missed to pass in variable ${h} for interpolating ${e}`),a="";else!P(a)&&!this.useRawValueToEscape&&(a=bn(a));const f=l.safeValue(a);if(e=e.replace(r[0],f),m?(l.regex.lastIndex+=a.length,l.regex.lastIndex-=r[0].length):l.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n,r,a;const o=(c,u)=>{const p=this.nestingOptionsSeparator;if(c.indexOf(p)<0)return c;const m=c.split(new RegExp(`${p}[ ]*{`));let v=`{${m[1]}`;c=m[0],v=this.interpolate(v,a);const b=v.match(/'/g),l=v.match(/"/g);(((b==null?void 0:b.length)??0)%2===0&&!l||l.length%2!==0)&&(v=v.replace(/'/g,'"'));try{a=JSON.parse(v),u&&(a={...u,...a})}catch(h){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,h),`${c}${p}${v}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,c};for(;n=this.nestingRegexp.exec(e);){let c=[];a={...s},a=a.replace&&!P(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let u=!1;if(n[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(n[1])){const p=n[1].split(this.formatSeparator).map(m=>m.trim());n[1]=p.shift(),c=p,u=!0}if(r=t(o.call(this,n[1].trim(),a),a),r&&n[0]===e&&!P(r))return r;P(r)||(r=bn(r)),r||(this.logger.warn(`missed to resolve ${n[1]} for nesting ${e}`),r=""),u&&(r=c.reduce((p,m)=>this.format(p,m,s.lng,{...s,interpolationkey:n[1].trim()}),r.trim())),e=e.replace(n[0],r),this.regexp.lastIndex=0}return e}}const ao=i=>{let e=i.toLowerCase().trim();const t={};if(i.indexOf("(")>-1){const s=i.split("(");e=s[0].toLowerCase().trim();const n=s[1].substring(0,s[1].length-1);e==="currency"&&n.indexOf(":")<0?t.currency||(t.currency=n.trim()):e==="relativetime"&&n.indexOf(":")<0?t.range||(t.range=n.trim()):n.split(";").forEach(a=>{if(a){const[o,...c]=a.split(":"),u=c.join(":").trim().replace(/^'+|'+$/g,""),p=o.trim();t[p]||(t[p]=u),u==="false"&&(t[p]=!1),u==="true"&&(t[p]=!0),isNaN(u)||(t[p]=parseInt(u,10))}})}return{formatName:e,formatOptions:t}},Xe=i=>{const e={};return(t,s,n)=>{let r=n;n&&n.interpolationkey&&n.formatParams&&n.formatParams[n.interpolationkey]&&n[n.interpolationkey]&&(r={...r,[n.interpolationkey]:void 0});const a=s+JSON.stringify(r);let o=e[a];return o||(o=i(us(s),n),e[a]=o),o(t)}};class oo{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=he.create("formatter"),this.options=e,this.formats={number:Xe((t,s)=>{const n=new Intl.NumberFormat(t,{...s});return r=>n.format(r)}),currency:Xe((t,s)=>{const n=new Intl.NumberFormat(t,{...s,style:"currency"});return r=>n.format(r)}),datetime:Xe((t,s)=>{const n=new Intl.DateTimeFormat(t,{...s});return r=>n.format(r)}),relativetime:Xe((t,s)=>{const n=new Intl.RelativeTimeFormat(t,{...s});return r=>n.format(r,s.range||"day")}),list:Xe((t,s)=>{const n=new Intl.ListFormat(t,{...s});return r=>n.format(r)})},this.init(e)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=Xe(t)}format(e,t,s){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const r=t.split(this.formatSeparator);if(r.length>1&&r[0].indexOf("(")>1&&r[0].indexOf(")")<0&&r.find(o=>o.indexOf(")")>-1)){const o=r.findIndex(c=>c.indexOf(")")>-1);r[0]=[r[0],...r.splice(1,o)].join(this.formatSeparator)}return r.reduce((o,c)=>{var m;const{formatName:u,formatOptions:p}=ao(c);if(this.formats[u]){let v=o;try{const b=((m=n==null?void 0:n.formatParams)==null?void 0:m[n.interpolationkey])||{},l=b.locale||b.lng||n.locale||n.lng||s;v=this.formats[u](o,l,{...p,...n,...b})}catch(b){this.logger.warn(b)}return v}else this.logger.warn(`there was no format function for ${u}`);return o},e)}}const co=(i,e)=>{i.pending[e]!==void 0&&(delete i.pending[e],i.pendingCount--)};class lo extends Ss{constructor(e,t,s){var r,a;let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=s,this.languageUtils=s.languageUtils,this.options=n,this.logger=he.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=n.maxParallelReads||10,this.readingCalls=0,this.maxRetries=n.maxRetries>=0?n.maxRetries:5,this.retryTimeout=n.retryTimeout>=1?n.retryTimeout:350,this.state={},this.queue=[],(a=(r=this.backend)==null?void 0:r.init)==null||a.call(r,s,n.backend,n)}queueLoad(e,t,s,n){const r={},a={},o={},c={};return e.forEach(u=>{let p=!0;t.forEach(m=>{const v=`${u}|${m}`;!s.reload&&this.store.hasResourceBundle(u,m)?this.state[v]=2:this.state[v]<0||(this.state[v]===1?a[v]===void 0&&(a[v]=!0):(this.state[v]=1,p=!1,a[v]===void 0&&(a[v]=!0),r[v]===void 0&&(r[v]=!0),c[m]===void 0&&(c[m]=!0)))}),p||(o[u]=!0)}),(Object.keys(r).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:n}),{toLoad:Object.keys(r),pending:Object.keys(a),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(c)}}loaded(e,t,s){const n=e.split("|"),r=n[0],a=n[1];t&&this.emit("failedLoading",r,a,t),!t&&s&&this.store.addResourceBundle(r,a,s,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&s&&(this.state[e]=0);const o={};this.queue.forEach(c=>{Ga(c.loaded,[r],a),co(c,e),t&&c.errors.push(t),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(u=>{o[u]||(o[u]={});const p=c.loaded[u];p.length&&p.forEach(m=>{o[u][m]===void 0&&(o[u][m]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(c=>!c.done)}read(e,t,s){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:s,tried:n,wait:r,callback:a});return}this.readingCalls++;const o=(u,p)=>{if(this.readingCalls--,this.waitingReads.length>0){const m=this.waitingReads.shift();this.read(m.lng,m.ns,m.fcName,m.tried,m.wait,m.callback)}if(u&&p&&n<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,s,n+1,r*2,a)},r);return}a(u,p)},c=this.backend[s].bind(this.backend);if(c.length===2){try{const u=c(e,t);u&&typeof u.then=="function"?u.then(p=>o(null,p)).catch(o):o(null,u)}catch(u){o(u)}return}return c(e,t,o)}prepareLoading(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),n&&n();P(e)&&(e=this.languageUtils.toResolveHierarchy(e)),P(t)&&(t=[t]);const r=this.queueLoad(e,t,s,n);if(!r.toLoad.length)return r.pending.length||n(),null;r.toLoad.forEach(a=>{this.loadOne(a)})}load(e,t,s){this.prepareLoading(e,t,{},s)}reload(e,t,s){this.prepareLoading(e,t,{reload:!0},s)}loadOne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const s=e.split("|"),n=s[0],r=s[1];this.read(n,r,"read",void 0,void 0,(a,o)=>{a&&this.logger.warn(`${t}loading namespace ${r} for language ${n} failed`,a),!a&&o&&this.logger.log(`${t}loaded namespace ${r} for language ${n}`,o),this.loaded(e,a,o)})}saveMissing(e,t,s,n,r){var c,u,p,m,v;let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if((u=(c=this.services)==null?void 0:c.utils)!=null&&u.hasLoadedNamespace&&!((m=(p=this.services)==null?void 0:p.utils)!=null&&m.hasLoadedNamespace(t))){this.logger.warn(`did not save key "${s}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(s==null||s==="")){if((v=this.backend)!=null&&v.create){const b={...a,isUpdate:r},l=this.backend.create.bind(this.backend);if(l.length<6)try{let h;l.length===5?h=l(e,t,s,n,b):h=l(e,t,s,n),h&&typeof h.then=="function"?h.then(f=>o(null,f)).catch(o):o(null,h)}catch(h){o(h)}else l(e,t,s,n,o,b)}!e||!e[0]||this.store.addResource(e[0],t,s,n)}}}const On=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:i=>{let e={};if(typeof i[1]=="object"&&(e=i[1]),P(i[1])&&(e.defaultValue=i[1]),P(i[2])&&(e.tDescription=i[2]),typeof i[2]=="object"||typeof i[3]=="object"){const t=i[3]||i[2];Object.keys(t).forEach(s=>{e[s]=t[s]})}return e},interpolation:{escapeValue:!0,format:i=>i,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),Ln=i=>{var e,t;return P(i.ns)&&(i.ns=[i.ns]),P(i.fallbackLng)&&(i.fallbackLng=[i.fallbackLng]),P(i.fallbackNS)&&(i.fallbackNS=[i.fallbackNS]),((t=(e=i.supportedLngs)==null?void 0:e.indexOf)==null?void 0:t.call(e,"cimode"))<0&&(i.supportedLngs=i.supportedLngs.concat(["cimode"])),typeof i.initImmediate=="boolean"&&(i.initAsync=i.initImmediate),i},Jt=()=>{},uo=i=>{Object.getOwnPropertyNames(Object.getPrototypeOf(i)).forEach(t=>{typeof i[t]=="function"&&(i[t]=i[t].bind(i))})};class Zt extends Ss{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(super(),this.options=Ln(e),this.services={},this.logger=he,this.modules={external:[]},uo(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof t=="function"&&(s=t,t={}),t.defaultNS==null&&t.ns&&(P(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const n=On();this.options={...n,...this.options,...Ln(t)},this.options.interpolation={...n.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const r=p=>p?typeof p=="function"?new p:p:null;if(!this.options.isClone){this.modules.logger?he.init(r(this.modules.logger),this.options):he.init(null,this.options);let p;this.modules.formatter?p=this.modules.formatter:p=oo;const m=new Cn(this.options);this.store=new _n(this.options.resources,this.options);const v=this.services;v.logger=he,v.resourceStore=this.store,v.languageUtils=m,v.pluralResolver=new io(m,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),p&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(v.formatter=r(p),v.formatter.init(v,this.options),this.options.interpolation.format=v.formatter.format.bind(v.formatter)),v.interpolator=new ro(this.options),v.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},v.backendConnector=new lo(r(this.modules.backend),v.resourceStore,v,this.options),v.backendConnector.on("*",function(b){for(var l=arguments.length,h=new Array(l>1?l-1:0),f=1;f<l;f++)h[f-1]=arguments[f];e.emit(b,...h)}),this.modules.languageDetector&&(v.languageDetector=r(this.modules.languageDetector),v.languageDetector.init&&v.languageDetector.init(v,this.options.detection,this.options)),this.modules.i18nFormat&&(v.i18nFormat=r(this.modules.i18nFormat),v.i18nFormat.init&&v.i18nFormat.init(this)),this.translator=new hs(this.services,this.options),this.translator.on("*",function(b){for(var l=arguments.length,h=new Array(l>1?l-1:0),f=1;f<l;f++)h[f-1]=arguments[f];e.emit(b,...h)}),this.modules.external.forEach(b=>{b.init&&b.init(this)})}if(this.format=this.options.interpolation.format,s||(s=Jt),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const p=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);p.length>0&&p[0]!=="dev"&&(this.options.lng=p[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(p=>{this[p]=function(){return e.store[p](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(p=>{this[p]=function(){return e.store[p](...arguments),e}});const c=bt(),u=()=>{const p=(m,v)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),c.resolve(v),s(m,v)};if(this.languages&&!this.isInitialized)return p(null,this.t.bind(this));this.changeLanguage(this.options.lng,p)};return this.options.resources||!this.options.initAsync?u():setTimeout(u,0),c}loadResources(e){var r,a;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Jt;const n=P(e)?e:this.language;if(typeof e=="function"&&(s=e),!this.options.resources||this.options.partialBundledLanguages){if((n==null?void 0:n.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return s();const o=[],c=u=>{if(!u||u==="cimode")return;this.services.languageUtils.toResolveHierarchy(u).forEach(m=>{m!=="cimode"&&o.indexOf(m)<0&&o.push(m)})};n?c(n):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(p=>c(p)),(a=(r=this.options.preload)==null?void 0:r.forEach)==null||a.call(r,u=>c(u)),this.services.backendConnector.load(o,this.options.ns,u=>{!u&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),s(u)})}else s(null)}reloadResources(e,t,s){const n=bt();return typeof e=="function"&&(s=e,e=void 0),typeof t=="function"&&(s=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),s||(s=Jt),this.services.backendConnector.reload(e,t,r=>{n.resolve(),s(r)}),n}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&fi.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const s=this.languages[t];if(!(["cimode","dev"].indexOf(s)>-1)&&this.store.hasLanguageSomeTranslations(s)){this.resolvedLanguage=s;break}}}changeLanguage(e,t){var s=this;this.isLanguageChangingTo=e;const n=bt();this.emit("languageChanging",e);const r=c=>{this.language=c,this.languages=this.services.languageUtils.toResolveHierarchy(c),this.resolvedLanguage=void 0,this.setResolvedLanguage(c)},a=(c,u)=>{u?(r(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,n.resolve(function(){return s.t(...arguments)}),t&&t(c,function(){return s.t(...arguments)})},o=c=>{var p,m;!e&&!c&&this.services.languageDetector&&(c=[]);const u=P(c)?c:this.services.languageUtils.getBestMatchFromCodes(c);u&&(this.language||r(u),this.translator.language||this.translator.changeLanguage(u),(m=(p=this.services.languageDetector)==null?void 0:p.cacheUserLanguage)==null||m.call(p,u)),this.loadResources(u,v=>{a(v,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),n}getFixedT(e,t,s){var n=this;const r=function(a,o){let c;if(typeof o!="object"){for(var u=arguments.length,p=new Array(u>2?u-2:0),m=2;m<u;m++)p[m-2]=arguments[m];c=n.options.overloadTranslationOptionHandler([a,o].concat(p))}else c={...o};c.lng=c.lng||r.lng,c.lngs=c.lngs||r.lngs,c.ns=c.ns||r.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||s||r.keyPrefix);const v=n.options.keySeparator||".";let b;return c.keyPrefix&&Array.isArray(a)?b=a.map(l=>`${c.keyPrefix}${v}${l}`):b=c.keyPrefix?`${c.keyPrefix}${v}${a}`:a,n.t(b,c)};return P(e)?r.lng=e:r.lngs=e,r.ns=t,r.keyPrefix=s,r}t(){var n;for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return(n=this.translator)==null?void 0:n.translate(...t)}exists(){var n;for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return(n=this.translator)==null?void 0:n.exists(...t)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const s=t.lng||this.resolvedLanguage||this.languages[0],n=this.options?this.options.fallbackLng:!1,r=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;const a=(o,c)=>{const u=this.services.backendConnector.state[`${o}|${c}`];return u===-1||u===0||u===2};if(t.precheck){const o=t.precheck(this,a);if(o!==void 0)return o}return!!(this.hasResourceBundle(s,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(s,e)&&(!n||a(r,e)))}loadNamespaces(e,t){const s=bt();return this.options.ns?(P(e)&&(e=[e]),e.forEach(n=>{this.options.ns.indexOf(n)<0&&this.options.ns.push(n)}),this.loadResources(n=>{s.resolve(),t&&t(n)}),s):(t&&t(),Promise.resolve())}loadLanguages(e,t){const s=bt();P(e)&&(e=[e]);const n=this.options.preload||[],r=e.filter(a=>n.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return r.length?(this.options.preload=n.concat(r),this.loadResources(a=>{s.resolve(),t&&t(a)}),s):(t&&t(),Promise.resolve())}dir(e){var n,r;if(e||(e=this.resolvedLanguage||(((n=this.languages)==null?void 0:n.length)>0?this.languages[0]:this.language)),!e)return"rtl";const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],s=((r=this.services)==null?void 0:r.languageUtils)||new Cn(On());return t.indexOf(s.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new Zt(e,t)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Jt;const s=e.forkResourceStore;s&&delete e.forkResourceStore;const n={...this.options,...e,isClone:!0},r=new Zt(n);if((e.debug!==void 0||e.prefix!==void 0)&&(r.logger=r.logger.clone(e)),["store","services","language"].forEach(o=>{r[o]=this[o]}),r.services={...this.services},r.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},s){const o=Object.keys(this.store.data).reduce((c,u)=>(c[u]={...this.store.data[u]},Object.keys(c[u]).reduce((p,m)=>(p[m]={...c[u][m]},p),{})),{});r.store=new _n(o,n),r.services.resourceStore=r.store}return r.translator=new hs(r.services,n),r.translator.on("*",function(o){for(var c=arguments.length,u=new Array(c>1?c-1:0),p=1;p<c;p++)u[p-1]=arguments[p];r.emit(o,...u)}),r.init(n,t),r.translator.options=n,r.translator.backendConnector.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},r}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const K=Zt.createInstance();K.createInstance=Zt.createInstance;K.createInstance;K.dir;K.init;K.loadResources;K.reloadResources;K.use;K.changeLanguage;K.getFixedT;K.t;K.exists;K.setDefaultNamespace;K.hasLoadedNamespace;K.loadNamespaces;K.loadLanguages;class ps extends G{constructor(t){super();V(this,"translator",K);this.i18nStorage=t}get activeLocale(){return this.i18nStorage.state.locale??Ts}get languageList(){return[...ia.entries()].map(([t,s])=>({code:t,label:s}))}async boot(){if(await this.i18nStorage.sync(),!this.i18nStorage.state.locale){const s=ps.getUILanguage();await this.setLocale(s)}const t=ps.buildResources();await this.translator.init({resources:t,lng:this.activeLocale,fallbackLng:Ts,interpolation:{escapeValue:!1}}),this.bootResolve(),await this.bootPromise}t(t,s={}){return this.translator.t(t,s)}async setLocale(t){await this.i18nStorage.setItems({locale:t})}static getUILanguage(){const t=F.i18n.getUILanguage(),s=t.replaceAll("-","_");if(vn(s))return s;const n=t.substring(0,2);return vn(n)?n:Ts}static buildResources(){return Object.entries(Object.assign({"./locales/ar/base.json":ca,"./locales/bg/base.json":ua,"./locales/bn/base.json":ha,"./locales/da/base.json":fa,"./locales/de/base.json":ma,"./locales/en/base.json":ba,"./locales/es/base.json":wa,"./locales/fi/base.json":_a,"./locales/fr/base.json":ka,"./locales/he/base.json":Aa,"./locales/hi/base.json":Ta,"./locales/it/base.json":La,"./locales/nl/base.json":Ra,"./locales/no/base.json":Da,"./locales/pl/base.json":Na,"./locales/ru/base.json":Ma,"./locales/ta/base.json":Va,"./locales/uk/base.json":za,"./locales/vi/base.json":Za,"./locales/zh_CN/base.json":Ha})).reduce((s,[n,r])=>{const a=n.split("/").at(-2),o=n.split("/").at(-1).split(".").at(0);return s[a]={...s[a],[o]:r.default},s},{})}}const ho=new Z("i18n",aa),nn=new ps(ho);var gi=(i=>(i[i.regular=0]="regular",i[i.lifeTime=1]="lifeTime",i))(gi||{}),rn=(i=>(i[i.prepaid=0]="prepaid",i[i.trial=1]="trial",i))(rn||{}),_e=(i=>(i[i.disabled=0]="disabled",i[i.active=1]="active",i))(_e||{}),mi=(i=>(i[i.noSlots=0]="noSlots",i[i.hasSlots=1]="hasSlots",i))(mi||{}),fs=(i=>(i[i.missing=0]="missing",i[i.vpn=1]="vpn",i[i.slot=2]="slot",i[i.antivirus=3]="antivirus",i[i.bundle=4]="bundle",i))(fs||{}),Ve=(i=>(i[i.disabled=0]="disabled",i[i.active=1]="active",i))(Ve||{}),vi=(i=>(i[i.needConfirm=0]="needConfirm",i[i.confirmed=1]="confirmed",i))(vi||{});const po=d.object({name:d.string(),infinity:d.nativeEnum(gi),trial:d.nativeEnum(rn),status:d.nativeEnum(_e),slot:d.nativeEnum(mi),startTime:d.number(),endTime:d.number(),countdown:d.number(),today:d.number()}),fo=d.object({id:d.number(),username:d.string(),email:d.string().email(),status:d.nativeEnum(Ve),confirm:d.nativeEnum(vi),registeredAt:d.number(),registeredCountryCode:d.string(),lastLoggedAt:d.number(),lastCountryCode:d.string(),confirmedEmailAt:d.number(),shareUrl:d.string().url()}),go=d.object({id:d.number(),user_id:d.number(),product_id:d.number(),name:d.string(),base_transaction_id:d.string(),status:d.number(),status_auto_renew:d.number(),last_order_type:d.number(),recurring_type:d.number(),type:d.number(),gateway:d.number(),start_time:d.number(),expiry_time:d.number(),infinity:d.number()}),mo=d.object({id:d.number(),user_id:d.number(),product_id:d.number(),name:d.string(),base_transaction_id:d.string(),status:d.nativeEnum(_e),status_auto_renew:d.number(),last_order_type:d.number(),recurring_type:d.number(),type:d.nativeEnum(fs),gateway:d.number(),start_time:d.number(),expiry_time:d.number(),infinity:d.number()}),vo=d.object({subscription:po.optional().describe(I.persist),user:fo.optional().describe(I.persist),slots:go.optional().describe(I.session),bundle:mo.optional().describe(I.persist)}).default({}),bo=new X(vo);class yo extends G{constructor(e){super(),this.userStorage=e}get user(){return this.userStorage.state.user??null}get subscription(){return this.userStorage.state.subscription??null}get canUsePremium(){var s,n;const e=((s=this.userStorage.state.user)==null?void 0:s.status)===Ve.active,t=((n=this.userStorage.state.subscription)==null?void 0:n.status)===_e.active;return e&&t}get hasBundleSubscription(){var r,a,o,c,u;const e=((r=this.userStorage.state.user)==null?void 0:r.status)===Ve.active,t=((a=this.userStorage.state.subscription)==null?void 0:a.status)===_e.active,s=((o=this.userStorage.state.bundle)==null?void 0:o.status)===_e.active,n=((c=this.userStorage.state.bundle)==null?void 0:c.type)===fs.antivirus||((u=this.userStorage.state.bundle)==null?void 0:u.type)===fs.bundle;return e&&t&&s&&n}get userType(){var n,r,a;const e=((n=this.userStorage.state.user)==null?void 0:n.status)===Ve.active,t=((r=this.userStorage.state.subscription)==null?void 0:r.status)===_e.active,s=((a=this.userStorage.state.subscription)==null?void 0:a.trial)===rn.trial;return e&&t&&s?"trial":e&&t?"premium":"free"}get subscriptionSlots(){return this.userStorage.state.slots??null}get subscriptionBundle(){return this.userStorage.state.bundle??null}async boot(){await this.userStorage.sync(),this.bootResolve(),await this.bootPromise}async setUser(e){await this.userStorage.setItems({user:e})}async removeUser(){await this.userStorage.removeItems("user")}async setSubscription(e){await this.userStorage.setItems({subscription:e})}async removeSubscription(){await this.userStorage.removeItems("subscription")}async setSubscriptionSlots(e){await this.userStorage.setItems({slots:e})}async removeSubscriptionSlots(){await this.userStorage.removeItems("slots")}async setSubscriptionBundle(e){await this.userStorage.setItems({bundle:e})}async removeSubscriptionBundle(){await this.userStorage.removeItems("bundle")}hasPermitions(e,t){const n={domain:{free:!0,premium:()=>{var a;return((a=this.userStorage.state.user)==null?void 0:a.status)===Ve.active}},locations:{free:!0,premium:()=>{var o,c;const r=((o=this.userStorage.state.user)==null?void 0:o.status)===Ve.active,a=((c=this.userStorage.state.subscription)==null?void 0:c.status)===_e.active;return r&&a}}}[e][t];return typeof n=="boolean"?n:n()}}const wo=new Z("user",bo),bi=new yo(wo),yi="default",So=[yi,"light","dark"],_o=14*24*60*60*1e3,xo=16*24*60*60*1e3,ko="app",Co="chrome_extension",Ao={macos:"https://download.veepn.com/mac/VeePN.dmg",windows:"https://download.veepn.com/windows/VeePNInstaller.exe",linux:"https://veepn.com/vpn-apps/vpn-for-linux/",other:`https://order.veepn.com/pricing/extension/?utm_source=${Co}&utm_medium=${ko}&utm_campaign=download`},Eo=7*24*60*60*1e3,To="https://www.cloudflare.com/cdn-cgi/trace",Oo=20*60*1e3,Lo=7*24*60*60*1e3,Io=4,Ro="https://chromewebstore.google.com/detail/free-vpn-for-chrome-vpn-p/_runtime_id_/reviews",Po=15*60*1e3,Do=24*60*60*1e3,jo=24*60*60*1e3,No=d.object({country:d.string(),region:d.string()}),$o=d.object({needShow:d.boolean(),nextTimestamp:d.number(),showCount:d.number()}),Mo=d.object({needShow:d.boolean()}),Fo=d.object({needShow:d.boolean(),count:d.number(),nextTimestamp:d.number()}),Vo=d.object({close:Fo,active:d.boolean(),nextTimestamp:d.number()}),Uo=d.object({colorTheme:d.enum(So).describe(I.persist),showOnboarding:d.boolean().describe(I.persist),sessionCount:d.number().describe(I.persist),premiumBannerTimestamp:d.number().describe(I.persist),downloadNotificationTimestamp:d.number().describe(I.persist),geolocation:No.optional().describe(I.persist),blockAds:d.boolean().describe(I.persist),rateUs:$o.describe(I.persist),exitOffer:Mo.describe(I.persist),connectionSurvey:Vo.describe(I.persist)}).default({colorTheme:yi,showOnboarding:!0,sessionCount:0,premiumBannerTimestamp:0,downloadNotificationTimestamp:0,blockAds:!1,rateUs:{needShow:!0,nextTimestamp:Date.now()+Oo,showCount:1},exitOffer:{needShow:!0},connectionSurvey:{close:{needShow:!0,count:0,nextTimestamp:Date.now()},active:!0,nextTimestamp:Date.now()}}),zo=new X(Uo);var Bo="2.0.0",ht="",In="?",gs="function",Re="undefined",pt="object",Hs="string",Wt="major",k="model",w="name",y="type",A="vendor",_="version",J="architecture",nt="console",j="mobile",U="tablet",W="smarttv",Tt="wearable",Ls="xr",Ks="embedded",yt="inapp",Rn="user-agent",qs=500,an="brands",Ue="formFactors",on="fullVersionList",ot="platform",cn="platformVersion",_s="bitness",$e="sec-ch-ua",Zo=$e+"-full-version-list",Wo=$e+"-arch",Ho=$e+"-"+_s,Ko=$e+"-form-factors",qo=$e+"-"+j,Go=$e+"-"+k,wi=$e+"-"+ot,Jo=wi+"-version",Si=[an,on,j,k,ot,cn,J,Ue,_s],se="browser",xe="cpu",de="device",ke="engine",re="os",ct="result",Yt="Amazon",wt="Apple",Pn="ASUS",Dn="BlackBerry",Fe="Google",jn="Huawei",Nn="Lenovo",Yo="Honor",Is="LG",es="Microsoft",$n="Motorola",St="Samsung",Mn="Sharp",Xt="Sony",Rs="Xiaomi",Ps="Zebra",Qe="Mobile ",_t=" Browser",Fn="Chrome",Le="Chromecast",Xo="Edge",xt="Firefox",kt="Opera",Vn="Facebook",Un="Sogou",Gs="Windows",Qo=typeof window!==Re,Y=Qo&&window.navigator?window.navigator:void 0,Ie=Y&&Y.userAgentData?Y.userAgentData:void 0,ec=function(i,e){var t={},s=e;if(!ms(e)){s={};for(var n in e)for(var r in e[n])s[r]=e[n][r].concat(s[r]?s[r]:[])}for(var a in i)t[a]=s[a]&&s[a].length%2===0?s[a].concat(i[a]):i[a];return t},xs=function(i){for(var e={},t=0;t<i.length;t++)e[i[t].toUpperCase()]=i[t];return e},Js=function(i,e){if(typeof i===pt&&i.length>0){for(var t in i)if(Ce(i[t])==Ce(e))return!0;return!1}return gt(i)?Ce(e).indexOf(Ce(i))!==-1:!1},ms=function(i,e){for(var t in i)return/^(browser|cpu|device|engine|os)$/.test(t)||(e?ms(i[t]):!1)},gt=function(i){return typeof i===Hs},Ds=function(i){if(i){for(var e=[],t=Ke(/\\?\"/g,i).split(","),s=0;s<t.length;s++)if(t[s].indexOf(";")>-1){var n=Ht(t[s]).split(";v=");e[s]={brand:n[0],version:n[1]}}else e[s]=Ht(t[s]);return e}},Ce=function(i){return gt(i)?i.toLowerCase():i},js=function(i){return gt(i)?Ke(/[^\d\.]/g,i).split(".")[0]:void 0},Ae=function(i){for(var e in i){var t=i[e];typeof t==pt&&t.length==2?this[t[0]]=t[1]:this[t]=void 0}return this},Ke=function(i,e){return gt(e)?e.replace(i,ht):e},Ct=function(i){return Ke(/\\?\"/g,i)},Ht=function(i,e){if(gt(i))return i=Ke(/^\s\s*/,i),typeof e===Re?i:i.substring(0,qs)},zn=function(i,e){if(!(!i||!e))for(var t=0,s,n,r,a,o,c;t<e.length&&!o;){var u=e[t],p=e[t+1];for(s=n=0;s<u.length&&!o&&u[s];)if(o=u[s++].exec(i),o)for(r=0;r<p.length;r++)c=o[++n],a=p[r],typeof a===pt&&a.length>0?a.length===2?typeof a[1]==gs?this[a[0]]=a[1].call(this,c):this[a[0]]=a[1]:a.length===3?typeof a[1]===gs&&!(a[1].exec&&a[1].test)?this[a[0]]=c?a[1].call(this,c,a[2]):void 0:this[a[0]]=c?c.replace(a[1],a[2]):void 0:a.length===4&&(this[a[0]]=c?a[3].call(this,c.replace(a[1],a[2])):void 0):this[a]=c||void 0;t+=2}},Lt=function(i,e){for(var t in e)if(typeof e[t]===pt&&e[t].length>0){for(var s=0;s<e[t].length;s++)if(Js(e[t][s],i))return t===In?void 0:t}else if(Js(e[t],i))return t===In?void 0:t;return e.hasOwnProperty("*")?e["*"]:i},Bn={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Zn={embedded:"Automotive",mobile:"Mobile",tablet:["Tablet","EInk"],smarttv:"TV",wearable:"Watch",xr:["VR","XR"],"?":["Desktop","Unknown"],"*":void 0},Wn={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[_,[w,Qe+"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[_,[w,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[w,_],[/opios[\/ ]+([\w\.]+)/i],[_,[w,kt+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[_,[w,kt+" GX"]],[/\bopr\/([\w\.]+)/i],[_,[w,kt]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[_,[w,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[_,[w,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\/([-\w\.]+)/i,/(heytap|ovi|115)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[w,_],[/quark(?:pc)?\/([-\w\.]+)/i],[_,[w,"Quark"]],[/\bddg\/([\w\.]+)/i],[_,[w,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[_,[w,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[_,[w,"WeChat"]],[/konqueror\/([\w\.]+)/i],[_,[w,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[_,[w,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[_,[w,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[_,[w,"Smart "+Nn+_t]],[/(avast|avg)\/([\w\.]+)/i],[[w,/(.+)/,"$1 Secure"+_t],_],[/\bfocus\/([\w\.]+)/i],[_,[w,xt+" Focus"]],[/\bopt\/([\w\.]+)/i],[_,[w,kt+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[_,[w,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[_,[w,"Dolphin"]],[/coast\/([\w\.]+)/i],[_,[w,kt+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[_,[w,"MIUI"+_t]],[/fxios\/([\w\.-]+)/i],[_,[w,Qe+xt]],[/\bqihoobrowser\/?([\w\.]*)/i],[_,[w,"360"]],[/\b(qq)\/([\w\.]+)/i],[[w,/(.+)/,"$1Browser"],_],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[w,/(.+)/,"$1"+_t],_],[/samsungbrowser\/([\w\.]+)/i],[_,[w,St+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[_,[w,Un+" Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[w,Un+" Mobile"],_],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[w,_],[/(lbbrowser|rekonq)/i],[w],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[_,w],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[w,Vn],_,[y,yt]],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(instagram|snapchat)[\/ ]([-\w\.]+)/i],[w,_,[y,yt]],[/\bgsa\/([\w\.]+) .*safari\//i],[_,[w,"GSA"],[y,yt]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[_,[w,"TikTok"],[y,yt]],[/\[(linkedin)app\]/i],[w,[y,yt]],[/(chromium)[\/ ]([-\w\.]+)/i],[w,_],[/headlesschrome(?:\/([\w\.]+)| )/i],[_,[w,Fn+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[w,Fn+" WebView"],_],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[_,[w,"Android"+_t]],[/chrome\/([\w\.]+) mobile/i],[_,[w,Qe+"Chrome"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[w,_],[/version\/([\w\.\,]+) .*mobile(?:\/\w+ | ?)safari/i],[_,[w,Qe+"Safari"]],[/iphone .*mobile(?:\/\w+ | ?)safari/i],[[w,Qe+"Safari"]],[/version\/([\w\.\,]+) .*(safari)/i],[_,w],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[w,[_,"1"]],[/(webkit|khtml)\/([\w\.]+)/i],[w,_],[/(?:mobile|tablet);.*(firefox)\/([\w\.-]+)/i],[[w,Qe+xt],_],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[w,"Netscape"],_],[/(wolvic|librewolf)\/([\w\.]+)/i],[w,_],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[_,[w,xt+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/\b(links) \(([\w\.]+)/i],[w,[_,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[w,[_,/[^\d\.]+./,ht]]],cpu:[[/\b(?:(amd|x|x86[-_]?|wow|win)64)\b/i],[[J,"amd64"]],[/(ia32(?=;))/i,/((?:i[346]|x)86)[;\)]/i],[[J,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[J,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[J,"armhf"]],[/windows (ce|mobile); ppc;/i],[[J,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[J,/ower/,ht,Ce]],[/(sun4\w)[;\)]/i],[[J,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[J,Ce]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[k,[A,St],[y,U]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[k,[A,St],[y,j]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[k,[A,wt],[y,j]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[k,[A,wt],[y,U]],[/(macintosh);/i],[k,[A,wt]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[k,[A,Mn],[y,j]],[/(?:honor)([-\w ]+)[;\)]/i],[k,[A,Yo],[y,j]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[k,[A,jn],[y,U]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[k,[A,jn],[y,j]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[k,/_/g," "],[A,Rs],[y,j]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[k,/_/g," "],[A,Rs],[y,U]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[k,[A,"OPPO"],[y,j]],[/\b(opd2\d{3}a?) bui/i],[k,[A,"OPPO"],[y,U]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[k,[A,"Vivo"],[y,j]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[k,[A,"Realme"],[y,j]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[k,[A,$n],[y,j]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[k,[A,$n],[y,U]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[k,[A,Is],[y,U]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[k,[A,Is],[y,j]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[k,[A,Nn],[y,U]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[k,/_/g," "],[A,"Nokia"],[y,j]],[/(pixel c)\b/i],[k,[A,Fe],[y,U]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[k,[A,Fe],[y,j]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[k,[A,Xt],[y,j]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[k,"Xperia Tablet"],[A,Xt],[y,U]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[k,[A,"OnePlus"],[y,j]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[k,[A,Yt],[y,U]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[k,/(.+)/g,"Fire Phone $1"],[A,Yt],[y,j]],[/(playbook);[-\w\),; ]+(rim)/i],[k,A,[y,U]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[k,[A,Dn],[y,j]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[k,[A,Pn],[y,U]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[k,[A,Pn],[y,j]],[/(nexus 9)/i],[k,[A,"HTC"],[y,U]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[A,[k,/_/g," "],[y,j]],[/tcl (xess p17aa)/i,/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])(_\w(\w|\w\w))?(\)| bui)/i],[k,[A,"TCL"],[y,U]],[/droid [\w\.]+; (418(?:7d|8v)|5087z|5102l|61(?:02[dh]|25[adfh]|27[ai]|56[dh]|59k|65[ah])|a509dl|t(?:43(?:0w|1[adepqu])|50(?:6d|7[adju])|6(?:09dl|10k|12b|71[efho]|76[hjk])|7(?:66[ahju]|67[hw]|7[045][bh]|71[hk]|73o|76[ho]|79w|81[hks]?|82h|90[bhsy]|99b)|810[hs]))(_\w(\w|\w\w))?(\)| bui)/i],[k,[A,"TCL"],[y,j]],[/(itel) ((\w+))/i],[[A,Ce],k,[y,Lt,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[k,[A,"Acer"],[y,U]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[k,[A,"Meizu"],[y,j]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[k,[A,"Ulefone"],[y,j]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[k,[A,"Energizer"],[y,j]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[k,[A,"Cat"],[y,j]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[k,[A,"Smartfren"],[y,j]],[/droid.+; (a(?:015|06[35]|142p?))/i],[k,[A,"Nothing"],[y,j]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (imo) ((?!tab)[\w ]+?)(?: bui|\))/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[A,k,[y,j]],[/(imo) (tab \w+)/i,/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i],[A,k,[y,U]],[/(surface duo)/i],[k,[A,es],[y,U]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[k,[A,"Fairphone"],[y,j]],[/(shield[\w ]+) b/i],[k,[A,"Nvidia"],[y,U]],[/(sprint) (\w+)/i],[A,k,[y,j]],[/(kin\.[onetw]{3})/i],[[k,/\./g," "],[A,es],[y,j]],[/droid.+; ([c6]+|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[k,[A,Ps],[y,U]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[k,[A,Ps],[y,j]],[/smart-tv.+(samsung)/i],[A,[y,W]],[/hbbtv.+maple;(\d+)/i],[[k,/^/,"SmartTV"],[A,St],[y,W]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[A,Is],[y,W]],[/(apple) ?tv/i],[A,[k,wt+" TV"],[y,W]],[/crkey.*devicetype\/chromecast/i],[[k,Le+" Third Generation"],[A,Fe],[y,W]],[/crkey.*devicetype\/([^/]*)/i],[[k,/^/,"Chromecast "],[A,Fe],[y,W]],[/fuchsia.*crkey/i],[[k,Le+" Nest Hub"],[A,Fe],[y,W]],[/crkey/i],[[k,Le],[A,Fe],[y,W]],[/droid.+aft(\w+)( bui|\))/i],[k,[A,Yt],[y,W]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[k,[A,Mn],[y,W]],[/(bravia[\w ]+)( bui|\))/i],[k,[A,Xt],[y,W]],[/(mitv-\w{5}) bui/i],[k,[A,Rs],[y,W]],[/Hbbtv.*(technisat) (.*);/i],[A,k,[y,W]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[A,Ht],[k,Ht],[y,W]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[y,W]],[/(ouya)/i,/(nintendo) (\w+)/i],[A,k,[y,nt]],[/droid.+; (shield) bui/i],[k,[A,"Nvidia"],[y,nt]],[/(playstation \w+)/i],[k,[A,Xt],[y,nt]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[k,[A,es],[y,nt]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[k,[A,St],[y,Tt]],[/((pebble))app/i],[A,k,[y,Tt]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[k,[A,wt],[y,Tt]],[/droid.+; (wt63?0{2,3})\)/i],[k,[A,Ps],[y,Tt]],[/droid.+; (glass) \d/i],[k,[A,Fe],[y,Ls]],[/(pico) (4|neo3(?: link|pro)?)/i],[A,k,[y,Ls]],[/; (quest( \d| pro)?)/i],[k,[A,Vn],[y,Ls]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[A,[y,Ks]],[/(aeobc)\b/i],[k,[A,Yt],[y,Ks]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[k,[y,j]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[k,[y,U]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[y,U]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[y,j]],[/(android[-\w\. ]{0,9});.+buil/i],[k,[A,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[_,[w,Xo+"HTML"]],[/(arkweb)\/([\w\.]+)/i],[w,_],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[_,[w,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[w,_],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[_,w]],os:[[/microsoft (windows) (vista|xp)/i],[w,_],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[w,[_,Lt,Bn]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[_,Lt,Bn],[w,Gs]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[_,/_/g,"."],[w,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[w,"macOS"],[_,/_/g,"."]],[/android ([\d\.]+).*crkey/i],[_,[w,Le+" Android"]],[/fuchsia.*crkey\/([\d\.]+)/i],[_,[w,Le+" Fuchsia"]],[/crkey\/([\d\.]+).*devicetype\/smartspeaker/i],[_,[w,Le+" SmartSpeaker"]],[/linux.*crkey\/([\d\.]+)/i],[_,[w,Le+" Linux"]],[/crkey\/([\d\.]+)/i],[_,[w,Le]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[_,w],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish|openharmony)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[w,_],[/\(bb(10);/i],[_,[w,Dn]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[_,[w,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[_,[w,xt+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[_,[w,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[_,[w,"watchOS"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[w,"Chrome OS"],_],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) (\w+)/i,/(xbox); +xbox ([^\);]+)/i,/(pico) .+os([\w\.]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[w,_],[/(sunos) ?([\w\.\d]*)/i],[[w,"Solaris"],_],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[w,_]]},Qt=function(){var i={init:{},isIgnore:{},isIgnoreRgx:{},toString:{}};return Ae.call(i.init,[[se,[w,_,Wt,y]],[xe,[J]],[de,[y,k,A]],[ke,[w,_]],[re,[w,_]]]),Ae.call(i.isIgnore,[[se,[_,Wt]],[ke,[_]],[re,[_]]]),Ae.call(i.isIgnoreRgx,[[se,/ ?browser$/i],[re,/ ?os$/i]]),Ae.call(i.toString,[[se,[w,_]],[xe,[J]],[de,[A,k]],[ke,[w,_]],[re,[w,_]]]),i}(),tc=function(i,e){var t=Qt.init[e],s=Qt.isIgnore[e]||0,n=Qt.isIgnoreRgx[e]||0,r=Qt.toString[e]||0;function a(){Ae.call(this,t)}return a.prototype.getItem=function(){return i},a.prototype.withClientHints=function(){return Ie?Ie.getHighEntropyValues(Si).then(function(o){return i.setCH(new _i(o,!1)).parseCH().get()}):i.parseCH().get()},a.prototype.withFeatureCheck=function(){return i.detectFeature().get()},e!=ct&&(a.prototype.is=function(o){var c=!1;for(var u in this)if(this.hasOwnProperty(u)&&!Js(s,u)&&Ce(n?Ke(n,this[u]):this[u])==Ce(n?Ke(n,o):o)){if(c=!0,o!=Re)break}else if(o==Re&&c){c=!c;break}return c},a.prototype.toString=function(){var o=ht;for(var c in r)typeof this[r[c]]!==Re&&(o+=(o?" ":ht)+this[r[c]]);return o||Re}),Ie||(a.prototype.then=function(o){var c=this,u=function(){for(var m in c)c.hasOwnProperty(m)&&(this[m]=c[m])};u.prototype={is:a.prototype.is,toString:a.prototype.toString};var p=new u;return o(p),p}),new a};function _i(i,e){if(i=i||{},Ae.call(this,Si),e)Ae.call(this,[[an,Ds(i[$e])],[on,Ds(i[Zo])],[j,/\?1/.test(i[qo])],[k,Ct(i[Go])],[ot,Ct(i[wi])],[cn,Ct(i[Jo])],[J,Ct(i[Wo])],[Ue,Ds(i[Ko])],[_s,Ct(i[Ho])]]);else for(var t in i)this.hasOwnProperty(t)&&typeof i[t]!==Re&&(this[t]=i[t])}function Hn(i,e,t,s){return this.get=function(n){return n?this.data.hasOwnProperty(n)?this.data[n]:void 0:this.data},this.set=function(n,r){return this.data[n]=r,this},this.setCH=function(n){return this.uaCH=n,this},this.detectFeature=function(){if(Y&&Y.userAgent==this.ua)switch(this.itemType){case se:Y.brave&&typeof Y.brave.isBrave==gs&&this.set(w,"Brave");break;case de:!this.get(y)&&Ie&&Ie[j]&&this.set(y,j),this.get(k)=="Macintosh"&&Y&&typeof Y.standalone!==Re&&Y.maxTouchPoints&&Y.maxTouchPoints>2&&this.set(k,"iPad").set(y,U);break;case re:!this.get(w)&&Ie&&Ie[ot]&&this.set(w,Ie[ot]);break;case ct:var n=this.data,r=function(a){return n[a].getItem().detectFeature().get()};this.set(se,r(se)).set(xe,r(xe)).set(de,r(de)).set(ke,r(ke)).set(re,r(re))}return this},this.parseUA=function(){return this.itemType!=ct&&zn.call(this.data,this.ua,this.rgxMap),this.itemType==se&&this.set(Wt,js(this.get(_))),this},this.parseCH=function(){var n=this.uaCH,r=this.rgxMap;switch(this.itemType){case se:var a=n[on]||n[an],o;if(a)for(var c in a){var u=Ke(/(Google|Microsoft) /,a[c].brand||a[c]),p=a[c].version;!/not.a.brand/i.test(u)&&(!o||/chrom/i.test(o)&&!/chromi/i.test(u))&&(this.set(w,u).set(_,p).set(Wt,js(p)),o=u)}break;case xe:var m=n[J];m&&(m&&n[_s]=="64"&&(m+="64"),zn.call(this.data,m+";",r));break;case de:if(n[j]&&this.set(y,j),n[k]&&this.set(k,n[k]),n[k]=="Xbox"&&this.set(y,nt).set(A,es),n[Ue]){var v;if(typeof n[Ue]!="string")for(var b=0;!v&&b<n[Ue].length;)v=Lt(n[Ue][b++],Zn);else v=Lt(n[Ue],Zn);this.set(y,v)}break;case re:var l=n[ot];if(l){var h=n[cn];l==Gs&&(h=parseInt(js(h),10)>=13?"11":"10"),this.set(w,l).set(_,h)}this.get(w)==Gs&&n[k]=="Xbox"&&this.set(w,"Xbox").set(_,void 0);break;case ct:var f=this.data,g=function(x){return f[x].getItem().setCH(n).parseCH().get()};this.set(se,g(se)).set(xe,g(xe)).set(de,g(de)).set(ke,g(ke)).set(re,g(re))}return this},Ae.call(this,[["itemType",i],["ua",e],["uaCH",s],["rgxMap",t],["data",tc(this,i)]]),this}function ve(i,e,t){if(typeof i===pt?(ms(i,!0)?(typeof e===pt&&(t=e),e=i):(t=i,e=void 0),i=void 0):typeof i===Hs&&!ms(e,!0)&&(t=e,e=void 0),t&&typeof t.append===gs){var s={};t.forEach(function(c,u){s[u]=c}),t=s}if(!(this instanceof ve))return new ve(i,e,t).getResult();var n=typeof i===Hs?i:t&&t[Rn]?t[Rn]:Y&&Y.userAgent?Y.userAgent:ht,r=new _i(t,!0),a=e?ec(Wn,e):Wn,o=function(c){return c==ct?function(){return new Hn(c,n,a,r).set("ua",n).set(se,this.getBrowser()).set(xe,this.getCPU()).set(de,this.getDevice()).set(ke,this.getEngine()).set(re,this.getOS()).get()}:function(){return new Hn(c,n,a[c],r).parseUA().get()}};return Ae.call(this,[["getBrowser",o(se)],["getCPU",o(xe)],["getDevice",o(de)],["getEngine",o(ke)],["getOS",o(re)],["getResult",o(ct)],["getUA",function(){return n}],["setUA",function(c){return gt(c)&&(n=c.length>qs?Ht(c,qs):c),this}]]).setUA(n),this}ve.VERSION=Bo;ve.BROWSER=xs([w,_,Wt,y]);ve.CPU=xs([J]);ve.DEVICE=xs([k,A,y,nt,j,W,U,Tt,Ks]);ve.ENGINE=ve.OS=xs([w,_]);const sc=ve(navigator.userAgent);class nc extends G{constructor(e,t,s,n){super(),this.appStorage=e,this.fetchService=t,this.analyticsService=s,this.globalStateService=n}get colorTheme(){return this.appStorage.state.colorTheme}get version(){return F.runtime.getManifest().version}get showOnboarding(){return this.appStorage.state.showOnboarding}get sessionCount(){return this.appStorage.state.sessionCount}get premiumBannerTimestamp(){return this.appStorage.state.premiumBannerTimestamp}get downloadNotificationTimestamp(){return this.appStorage.state.downloadNotificationTimestamp}get geolocation(){return this.appStorage.state.geolocation??null}get isBlockAds(){return this.appStorage.state.blockAds}get majorBrowserVersion(){const e=Number(sc.browser.major);return Number.isNaN(e)?0:e}get rateUsData(){return this.appStorage.state.rateUs}get extensionStoreUrl(){const e=F.runtime.id;return Ro.replace("_runtime_id_",e)}get needShowExitOffer(){const e=this.appStorage.state.exitOffer.needShow,t=Date.now()>this.globalStateService.installedAt+xo;return e&&t}get needShowConnectionSurvey(){const{connectionSurvey:e}=this.appStorage.state,t=Date.now()>e.nextTimestamp;return e.active&&t}get connectionSurveyClose(){return this.appStorage.state.connectionSurvey.close}async boot(){await this.appStorage.sync(),this.appStorage.state.premiumBannerTimestamp===0&&await this.incrementPremiumBannerTimestamp(),this.appStorage.state.geolocation||await this.detectGeolocation(),this.bootResolve(),await this.bootPromise}async setColorTheme(e){await this.appStorage.setItems({colorTheme:e})}async setShowOnboarding(e){await this.appStorage.setItems({showOnboarding:e})}async incrementSessionCount(){const e=this.appStorage.state.sessionCount+1;await this.appStorage.setItems({sessionCount:e})}async incrementPremiumBannerTimestamp(){const e=Date.now()+_o;await this.appStorage.setItems({premiumBannerTimestamp:e})}async getDownloadLink(e){return await Promise.resolve(this),Ao[e]}async incrementDownloadNotificationTimestamp(){const e=Date.now()+Eo;await this.appStorage.setItems({downloadNotificationTimestamp:e})}async detectGeolocation(){const e=await this.fetchService.request({method:"GET",url:To});if(e.success)try{const t=e.data.trim().split(/\n/).map(r=>r.split("=")),s=Object.fromEntries(t),n={country:s.loc.toLocaleLowerCase(),region:s.colo.toLocaleLowerCase()};await this.appStorage.setItems({geolocation:n}),this.analyticsService.sendEvent({types:["google-analytics","amplitude"],name:"setup_user_country",data:{user_country:n.country}})}catch{this.analyticsService.sendEvent({types:["google-analytics","amplitude"],name:"country_check_failed_error"})}else this.analyticsService.sendEvent({types:["google-analytics","amplitude"],name:"country_check_failed"})}async setBlockAds(e){await this.appStorage.setItems({blockAds:e})}async incrementRateUs(){const e={needShow:this.rateUsData.showCount<Io,nextTimestamp:Date.now()+Lo,showCount:this.rateUsData.showCount+1};await this.appStorage.setItems({rateUs:e})}async setExitOfferShown(){await this.appStorage.setItems({exitOffer:{needShow:!1}})}async incrementConnectionSurvey(){const{connectionSurvey:e}=this.appStorage.state;await this.appStorage.setItems({connectionSurvey:{...e,nextTimestamp:Date.now()+Po}})}async closeConnectionSurvey(){const{close:e}=this.appStorage.state.connectionSurvey,t=e.count+1,s=e.nextTimestamp<Date.now()&&t%2===0,n=s?Date.now()+jo:e.nextTimestamp,r={needShow:s,count:t,nextTimestamp:n};await this.appStorage.setItems({connectionSurvey:{...this.appStorage.state.connectionSurvey,close:r}})}async delayConnectionSurvey(){const{connectionSurvey:e}=this.appStorage.state;await this.appStorage.setItems({connectionSurvey:{...e,nextTimestamp:Date.now()+Do}})}async disableConnectionSurvey(){const{connectionSurvey:e}=this.appStorage.state;await this.appStorage.setItems({connectionSurvey:{...e,active:!1}})}}const ic=new Z("app",zo),rc=new nc(ic,qt,qe,ft),ac=["allowed","denied"],oc="allowed",cc="/icons/128.png",lc=["download-app","extension-updated"],uc=d.object({id:d.string().uuid(),callback:d.enum(lc).optional()}),dc=d.object({permition:d.enum(ac).describe(I.persist),callbacks:d.array(uc).optional().describe(I.session)}).default({permition:oc}),hc=new X(dc);class pc extends G{constructor(e){super(),this.notificationStorage=e}get permition(){return this.notificationStorage.state.permition}get callbacks(){return this.notificationStorage.state.callbacks??[]}async boot(){await this.notificationStorage.sync(),this.bootResolve(),await this.bootPromise}async setNotificationPermition(e){await this.notificationStorage.setItems({permition:e})}getCallbackSettings(e){return this.callbacks.find(s=>s.id===e)??null}async removeCallbackSettings(e){const s=((await this.notificationStorage.getItems("callbacks")).callbacks??[]).filter(n=>n.id!==e);await this.notificationStorage.setItems({callbacks:s})}async notify(e){if(this.notificationStorage.state.permition==="denied")return;const t=F.runtime.getManifest(),s=F.runtime.getURL(cc),n={type:"basic",title:t.name,message:t.description??"",iconUrl:s},r=await F.notifications.create(crypto.randomUUID(),{...n,...e.options}),a=[...this.callbacks,{id:r,...e.callback?{callback:e.callback}:{}}];await this.notificationStorage.setItems({callbacks:a})}}const fc=new Z("notification",hc),gc=new pc(fc),mc=["disconnected","connecting","connected","disconnecting"],vc="disconnected",bc=d.object({status:d.enum(mc).describe(I.persist),ipAddress:d.string().optional().describe(I.session),connectionCount:d.number().describe(I.persist),useAutoConnect:d.boolean().describe(I.persist)}).default({status:vc,connectionCount:0,useAutoConnect:!1}),yc=new X(bc);class wc extends G{constructor(e){super(),this.connectionStorage=e}get currentIp(){return this.connectionStorage.state.ipAddress}get status(){return this.connectionStorage.state.status}get isConnected(){return this.connectionStorage.state.status==="connected"}get connectionCount(){return this.connectionStorage.state.connectionCount}get useAutoConnect(){return this.connectionStorage.state.useAutoConnect}async boot(){await this.connectionStorage.sync(),this.bootResolve(),await this.bootPromise}async setIpAddress(e){await this.connectionStorage.setItems({ipAddress:e})}async removeIpAddress(){await this.connectionStorage.removeItems("ipAddress")}async setConnectionStatus(e){await this.connectionStorage.setItems({status:e})}async incrementConnectionCount(){const e=this.connectionStorage.state.connectionCount+1;await this.connectionStorage.setItems({connectionCount:e})}async setAutoConnect(e){await this.connectionStorage.setItems({useAutoConnect:e})}}const Sc=new Z("connection",yc),_c=new wc(Sc);var vs=(i=>(i[i.not_active=0]="not_active",i[i.control=1]="control",i[i.test=2]="test",i))(vs||{}),ne=(i=>(i.breachBanner="abtest_chrome_breach_banner",i.limitLocations="abtest_limit_locations",i.guardAlert="abtest_guardio_popups",i))(ne||{});const xc=d.object({group:d.nativeEnum(vs),experiment_slug:d.nativeEnum(ne)}),kc=d.object({experiments:d.array(xc),updatedAt:d.number()}),Cc=d.object({config:kc.describe(I.persist),allowedExperiments:d.array(d.nativeEnum(ne)).describe(I.persist)}).default({config:{experiments:[],updatedAt:0},allowedExperiments:[]}),Ac=new X(Cc),Ec="https://split-tool.com/api/application-experiment/bulk-group/",Tc="e9efc93ef559ff3064712c2a3399aff66eb8",Ns="https://veepn.com/",$s="https://fake-veepn.com/",et="veepn-ab-tests",Oc=24*60*60*1e3;class we extends G{constructor(e,t,s,n,r){super(),this.initSettings=e,this.testStorage=t,this.globalStateService=s,this.fetchService=n,this.analyticsService=r}getTestActiveStatus(e){const t=this.testStorage.state.config.experiments.find(s=>s.experiment_slug===e);return t?t.group===vs.test:!1}async boot(){await this.testStorage.sync(),await this.handleChromeBoot(),this.bootResolve(),await this.bootPromise}async handleChromeBoot(){const e=this.getSettingsExperiments(),{allowedExperiments:t}=await this.testStorage.getItems("allowedExperiments"),s=await we.getOngoingTestsFromCookie(),n=this.getOngoingExperiments(e,t,s),r=this.testStorage.state.config.updatedAt+Oc;e.length===0||n.length===0?await this.clearExperimentsData():r<Date.now()&&await this.updateExperimentConfigs(n)}getSettingsExperiments(){return Object.values(this.initSettings).map(e=>e.experimentSlug)}getOngoingExperiments(e,t,s){return Promise.resolve(this).catch(()=>{}),[...new Set([...t,...s])].filter(n=>e.includes(n))}async clearExperimentsData(){await we.clearGroupFromCookie(),await we.clearOngoingTestsFromCookie(),await this.testStorage.setItems({config:{experiments:[],updatedAt:Date.now()}})}async allowTestInitialisation(e){const t=this.getSettingsExperiments(),s=this.getCanInitializeExperiments(e),{allowedExperiments:n}=await this.testStorage.getItems("allowedExperiments"),r=this.getOngoingExperiments(t,n,s);await this.testStorage.setItems({allowedExperiments:r})}getCanInitializeExperiments(e){return Object.values(this.initSettings).filter(t=>t.initReasons.includes(e)).map(t=>t.experimentSlug)}async updateExperimentConfigs(e){const t=this.createPayload(e),s=await this.fetchService.request({url:Ec,method:"POST",body:t});s.success&&await this.handleSuccessfulResponse(s.data)}createPayload(e){return{bundle_id:Tc,udid:this.globalStateService.udid.value,experiment_name:e.join(", "),language:"en"}}async handleSuccessfulResponse(e){await this.testStorage.setItems({config:{experiments:e,updatedAt:Date.now()}});const t=e.filter(r=>r.group!==vs.not_active),s=t.map(r=>r.experiment_slug);await this.testStorage.setItems({allowedExperiments:s}),await we.saveOngoingTestsToCookie(s);const n=t[0];n?await this.handleActiveConfig(n):await we.clearGroupFromCookie()}async handleActiveConfig(e){await this.analyticsService.setExperiment({slug:e.experiment_slug,group:e.group}),typeof await we.getGroupFromCookie(e.experiment_slug)>"u"&&(await we.saveGroupToCookie([{slug:e.experiment_slug,group:e.group}]),this.sendAnalyticsEvents(e))}sendAnalyticsEvents(e){const t={test_name:e.experiment_slug,user_group:e.group};this.analyticsService.sendEvent({types:["google-analytics","amplitude"],name:`${e.experiment_slug}_group_${e.group}`,data:t}),this.analyticsService.sendEvent({types:["aws-kinesis"],name:"exp_group",data:{event_properties__exp_id:e.experiment_slug,event_properties__exp_var:e.group.toString()}})}static async getGroupFromCookie(e){const t=new URL(Ns),s=await F.cookies.get({name:et,url:t.href});if(s)try{const r=JSON.parse(s.value).find(a=>a.slug===e);return r?r.group:void 0}catch{return}}static async saveGroupToCookie(e){const t=new URL(Ns),s=new Date;s.setFullYear(s.getFullYear()+1),await F.cookies.set({name:et,value:JSON.stringify(e),url:t.href,domain:`.${t.hostname}`,expirationDate:s.getTime()/1e3})}static async clearGroupFromCookie(){const e=new URL(Ns);await F.cookies.remove({name:et,url:e.href})}static async saveOngoingTestsToCookie(e){const t=new URL($s),s=new Date;s.setFullYear(s.getFullYear()+1),await F.cookies.set({name:et,value:JSON.stringify(e),url:t.href,domain:`.${t.hostname}`,expirationDate:s.getTime()/1e3})}static async getOngoingTestsFromCookie(){const e=new URL($s),t=await F.cookies.get({name:et,url:e.href});if(!t)return[];try{const s=JSON.parse(t.value);return Array.isArray(s)&&s.every(n=>typeof n=="string")?s:[]}catch{return[]}}static async clearOngoingTestsFromCookie(){const e=new URL($s);await F.cookies.remove({name:et,url:e.href})}}const Lc=new Z("test",Ac),Ic={[ne.breachBanner]:{experimentSlug:ne.breachBanner,initReasons:["install"]},[ne.limitLocations]:{experimentSlug:ne.limitLocations,initReasons:["install"]},[ne.guardAlert]:{experimentSlug:ne.guardAlert,initReasons:["install","update"]}},xi=new we(Ic,Lc,ft,qt,qe),Kn="chrome",Rc="app",Pc="chrome_extension",Ms={pricing:"https://order.veepn.com/{lang_code}/pricing/extension/",pricingPayment:"https://order.veepn.com/{lang_code}/pricing/payment/extension/",pricingSecurity:"https://order.veepn.com/{lang_code}/pricing/subscription/security/",home:"https://veepn.com/{lang_code}/",install:`https://veepn.com/{lang_code}/welcome/${Kn}/`,uninstall:`https://veepn.com/{lang_code}/uninstall/${Kn}/1/`,ipDetails:"https://veepn.com/{lang_code}/what-is-my-ip/",privacyPolicy:"https://veepn.com/{lang_code}/privacy-policy/",termsOfService:"https://veepn.com/{lang_code}/terms-of-service/",update:"https://veepn.com/{lang_code}/upgrade/",breachAlert:"https://veepn.com/{lang_code}/alert/",support:"https://support.veepn.com/{lang_code}/",accountAuth:"https://account.veepn.com/{lang_code}/account-auth/",accountPasswordRecovery:"https://account.veepn.com/{lang_code}/password-recovery/"},Dc=["de","ar","th","vi","en","es","fr","id","hi","it","jp","nl","no","pl","pt","ru","se","tr","zh","uk"],jc="en";class Nc extends G{constructor(e,t){super(),this.globalStateService=e,this.i18nService=t}get websiteLangCode(){const e=this.i18nService.activeLocale.split("_")[0];return Dc.find(s=>s===e)??jc}async boot(){const e=this.globalStateService.udid.value;await this.setUninstallURL(e),this.bootResolve(),await this.bootPromise}async proceedToWebsiteAccount(e){const t=this.constructUrl(Ms.accountAuth+e.authToken,e.route,e.params);await F.tabs.create({url:t})}async proceedToWebsitePage(e){const t=this.constructUrl(Ms[e.page],"",e.params);await F.tabs.create({url:t})}async setUninstallURL(e){const t=this.constructUrl(Ms.uninstall,"",{utm_campaign:e});await F.runtime.setUninstallURL(t)}constructUrl(e,t,s){const n=new URLSearchParams({utm_source:Pc,utm_medium:Rc,platform:"extension",udid:this.globalStateService.udid.value,...s??{}}),r=e.replace("{lang_code}",this.websiteLangCode);if(t)return`${r}/?route=${encodeURIComponent(`${t}?${n.toString()}`)}`;const a=new URL(r);return n.forEach((o,c)=>{a.searchParams.set(c,o)}),a.toString()}}const $c=new Nc(ft,nn);class Mc{constructor(){V(this,"eventMap",new Map)}subscribe(e){Object.entries(e).forEach(([s,n])=>{this.eventMap.has(s)||this.eventMap.set(s,[]);const r=[...this.eventMap.get(s)??[],n];this.eventMap.set(s,r)})}dispatch(e){Object.entries(e).forEach(([s,n])=>{(this.eventMap.get(s)??[]).forEach(a=>{a(n)})})}}const ks=new Mc,Ys=["free","premium"],Fc=["available","unavailable"],Vc=d.object({accessToken:d.string(),refreshToken:d.string()}),qn=d.object({type:d.enum(Ys),url:d.string().url(),status:d.enum(Fc),updatedAt:d.number()}),Uc=d.object({tokens:Vc.optional().describe(I.persist),[Ys[0]]:qn.describe(I.persist),[Ys[1]]:qn.describe(I.persist)}).default({free:{type:"free",url:"",status:"unavailable",updatedAt:0},premium:{type:"premium",url:"",status:"unavailable",updatedAt:0}}),zc=new X(Uc),bs={authRefreshToken:"/auth/refresh-token/",authLogin:"/auth/login/",authLogout:"/auth/logout/",apiLaunch:"/api/launch/",apiLocationList:"/api/location/list/",apiServer:"/api/server/",apiServerList:"/api/server/list/",apiAvailable:"/api/available/",apiAccountAuthToken:"/api/account/account-auth-token/",apiUrlReview:"/api/url/review/",apiSubscriptionCheckUsedTrial:"/api/v2/subscription/check-used-trial/",apiSubscriptionSlot:"/api/v2/subscription/slot/",apiSlotRelease:"/api/v2/slot/release/",apiSubscriptionShield:"/api/v2/subscription/shield/"},Bc="https://antpeak.com",Zc="https://zorvian.com",Gn="https://s3-oregon-1.s3-us-west-2.amazonaws.com/api.json",Wc=1*60*60*1e3,Jn=ve(navigator.userAgent);class ki extends G{constructor(t,s,n,r,a,o){super();V(this,"domainType");V(this,"domainUrl");this.apiStorage=n,this.globalStateService=r,this.fetchService=a,this.analyticsService=o,this.domainType=t,this.domainUrl=s}get apiDomainUrl(){return this.domainUrl}get hasTokens(){return!!this.apiStorage.state.tokens}get deviceInfo(){const t="chrome",s=F.runtime.getManifest(),n=Jn.browser.name??"Chrome",r=Jn.browser.version??"0.0.0";return{udid:this.globalStateService.udid.value,appVersion:s.version,platform:t,platformVersion:navigator.userAgent,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone,deviceName:`${n} ${r}`}}get isDomainAvailable(){const{status:t,updatedAt:s}=this.apiStorage.state[this.domainType],n=s+Wc;return t==="available"&&n>Date.now()}async boot(){await this.apiStorage.sync(),this.isDomainAvailable||await this.updateDomainData(),this.bootResolve(),await this.bootPromise}async setTokens(t){await this.apiStorage.setItems({tokens:t})}async removeTokens(){await this.apiStorage.removeItems("tokens")}async updateDomainData(){if(await this.apiGetDomainStatus(this.domainUrl)){await this.apiStorage.setItems({[this.domainType]:{type:this.domainType,url:this.domainUrl,status:"available",updatedAt:Date.now()}});return}const s=await this.apiGetReserveDomains();if(s.success){const n=s.data[this.domainType];if(await this.apiGetDomainStatus(n,!0)){await this.apiStorage.setItems({[this.domainType]:{type:this.domainType,url:n,status:"available",updatedAt:0}});return}}await this.apiStorage.setItems({[this.domainType]:{type:this.domainType,url:"",status:"unavailable",updatedAt:0}})}async fetch(t){const s={...t,url:this.apiStorage.state[this.domainType].url+bs[t.url]};return await this.request(s)}async apiGetReserveDomains(){const t=await this.fetchService.request({method:"GET",url:Gn});return t.success||this.analyticsService.sendEvent({types:["google-analytics"],name:"api_no_response_bucket",data:{api_domain:Gn,status_code:fe.getStatusCodeMessage(t)}}),t}async apiGetDomainStatus(t,s=!1){const n=await this.fetchService.request({method:"GET",url:`${t}${bs.apiAvailable}`});return n.success||this.analyticsService.sendEvent({types:["google-analytics"],name:s?"api_no_response_reserve":"api_no_response_default",data:{api_domain:t,status_code:fe.getStatusCodeMessage(n)}}),n.success?n.data.message==="OK":!1}}class Hc extends ki{constructor(e,t,s,n,r,a,o){super(e,t,s,n,r,o),this.apiStorage=s,this.globalStateService=n,this.fetchService=r,this.eventService=a,this.analyticsService=o}async request(e){var o,c;const t=((o=this.apiStorage.state.tokens)==null?void 0:o.accessToken)??"",s=await this.fetchService.request({...e,headers:{Authorization:`Bearer ${t}`,...e.headers}});if(s.success||s.errors.every(u=>u.status!==401))return s;const r=((c=this.apiStorage.state.tokens)==null?void 0:c.accessToken)??"",a=await this.fetchService.request({headers:{Authorization:`Bearer ${r}`},method:"POST",url:this.apiStorage.state[this.domainType].url+bs.apiLaunch,body:this.deviceInfo});return a.success?(await this.setTokens({accessToken:a.data.accessToken,refreshToken:""}),this.request(e)):(this.eventService.dispatch({"free-refresh-token-failed":{disconnectReason:r?this.apiStorage.state[this.domainType].url:"token_empty",failedReason:fe.getStatusCodeMessage(a)}}),s)}}class Kc extends ki{constructor(e,t,s,n,r,a,o){super(e,t,s,n,r,o),this.apiStorage=s,this.globalStateService=n,this.fetchService=r,this.eventService=a,this.analyticsService=o}async request(e){var o,c;const t=((o=this.apiStorage.state.tokens)==null?void 0:o.accessToken)??"",s=await this.fetchService.request({...e,headers:{Authorization:`Bearer ${t}`,...e.headers}});if(s.success||s.errors.every(u=>u.status!==401))return s;const r=((c=this.apiStorage.state.tokens)==null?void 0:c.refreshToken)??"",a=await this.fetchService.request({headers:{Authorization:`Bearer ${r}`},method:"POST",url:this.apiStorage.state[this.domainType].url+bs.authRefreshToken,body:this.deviceInfo});return a.success?(await this.setTokens({accessToken:a.data.accessToken,refreshToken:a.data.refreshToken}),this.request(e)):(this.eventService.dispatch({"premium-refresh-token-failed":{disconnectReason:r?this.apiStorage.state[this.domainType].url:"token_empty",failedReason:fe.getStatusCodeMessage(a)}}),s)}}const Ci=new Z("api",zc),Ai=new Hc("free",Bc,Ci,ft,qt,ks,qe),Ei=new Kc("premium",Zc,Ci,ft,qt,ks,qe),qc=d.object({matchPattern:d.string(),favicon:d.string().optional()}),Gc=d.object({exclusions:qc.array().describe(I.persist)}).default({exclusions:[]}),Jc=new X(Gc);var ts={exports:{}},Yc=ts.exports,Yn;function Xc(){return Yn||(Yn=1,function(i){(function(e){const t="(0?\\d+|0x[a-f0-9]+)",s={fourOctet:new RegExp(`^${t}\\.${t}\\.${t}\\.${t}$`,"i"),threeOctet:new RegExp(`^${t}\\.${t}\\.${t}$`,"i"),twoOctet:new RegExp(`^${t}\\.${t}$`,"i"),longValue:new RegExp(`^${t}$`,"i")},n=new RegExp("^0[0-7]+$","i"),r=new RegExp("^0x[a-f0-9]+$","i"),a="%[0-9a-z]{1,}",o="(?:[0-9a-f]+::?)+",c={zoneIndex:new RegExp(a,"i"),native:new RegExp(`^(::)?(${o})?([0-9a-f]+)?(::)?(${a})?$`,"i"),deprecatedTransitional:new RegExp(`^(?:::)(${t}\\.${t}\\.${t}\\.${t}(${a})?)$`,"i"),transitional:new RegExp(`^((?:${o})|(?:::)(?:${o})?)${t}\\.${t}\\.${t}\\.${t}(${a})?$`,"i")};function u(l,h){if(l.indexOf("::")!==l.lastIndexOf("::"))return null;let f=0,g=-1,x=(l.match(c.zoneIndex)||[])[0],C,$;for(x&&(x=x.substring(1),l=l.replace(/%.+$/,""));(g=l.indexOf(":",g+1))>=0;)f++;if(l.substr(0,2)==="::"&&f--,l.substr(-2,2)==="::"&&f--,f>h)return null;for($=h-f,C=":";$--;)C+="0:";return l=l.replace("::",C),l[0]===":"&&(l=l.slice(1)),l[l.length-1]===":"&&(l=l.slice(0,-1)),h=function(){const Te=l.split(":"),Oe=[];for(let B=0;B<Te.length;B++)Oe.push(parseInt(Te[B],16));return Oe}(),{parts:h,zoneId:x}}function p(l,h,f,g){if(l.length!==h.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");let x=0,C;for(;g>0;){if(C=f-g,C<0&&(C=0),l[x]>>C!==h[x]>>C)return!1;g-=f,x+=1}return!0}function m(l){if(r.test(l))return parseInt(l,16);if(l[0]==="0"&&!isNaN(parseInt(l[1],10))){if(n.test(l))return parseInt(l,8);throw new Error(`ipaddr: cannot parse ${l} as octal`)}return parseInt(l,10)}function v(l,h){for(;l.length<h;)l=`0${l}`;return l}const b={};b.IPv4=function(){function l(h){if(h.length!==4)throw new Error("ipaddr: ipv4 octet count should be 4");let f,g;for(f=0;f<h.length;f++)if(g=h[f],!(0<=g&&g<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=h}return l.prototype.SpecialRanges={unspecified:[[new l([0,0,0,0]),8]],broadcast:[[new l([255,255,255,255]),32]],multicast:[[new l([224,0,0,0]),4]],linkLocal:[[new l([169,254,0,0]),16]],loopback:[[new l([127,0,0,0]),8]],carrierGradeNat:[[new l([100,64,0,0]),10]],private:[[new l([10,0,0,0]),8],[new l([172,16,0,0]),12],[new l([192,168,0,0]),16]],reserved:[[new l([192,0,0,0]),24],[new l([192,0,2,0]),24],[new l([192,88,99,0]),24],[new l([198,18,0,0]),15],[new l([198,51,100,0]),24],[new l([203,0,113,0]),24],[new l([240,0,0,0]),4]],as112:[[new l([192,175,48,0]),24],[new l([192,31,196,0]),24]],amt:[[new l([192,52,193,0]),24]]},l.prototype.kind=function(){return"ipv4"},l.prototype.match=function(h,f){let g;if(f===void 0&&(g=h,h=g[0],f=g[1]),h.kind()!=="ipv4")throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return p(this.octets,h.octets,8,f)},l.prototype.prefixLengthFromSubnetMask=function(){let h=0,f=!1;const g={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0};let x,C,$;for(x=3;x>=0;x-=1)if(C=this.octets[x],C in g){if($=g[C],f&&$!==0)return null;$!==8&&(f=!0),h+=$}else return null;return 32-h},l.prototype.range=function(){return b.subnetMatch(this,this.SpecialRanges)},l.prototype.toByteArray=function(){return this.octets.slice(0)},l.prototype.toIPv4MappedAddress=function(){return b.IPv6.parse(`::ffff:${this.toString()}`)},l.prototype.toNormalizedString=function(){return this.toString()},l.prototype.toString=function(){return this.octets.join(".")},l}(),b.IPv4.broadcastAddressFromCIDR=function(l){try{const h=this.parseCIDR(l),f=h[0].toByteArray(),g=this.subnetMaskFromPrefixLength(h[1]).toByteArray(),x=[];let C=0;for(;C<4;)x.push(parseInt(f[C],10)|parseInt(g[C],10)^255),C++;return new this(x)}catch{throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},b.IPv4.isIPv4=function(l){return this.parser(l)!==null},b.IPv4.isValid=function(l){try{return new this(this.parser(l)),!0}catch{return!1}},b.IPv4.isValidCIDR=function(l){try{return this.parseCIDR(l),!0}catch{return!1}},b.IPv4.isValidFourPartDecimal=function(l){return!!(b.IPv4.isValid(l)&&l.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},b.IPv4.networkAddressFromCIDR=function(l){let h,f,g,x,C;try{for(h=this.parseCIDR(l),g=h[0].toByteArray(),C=this.subnetMaskFromPrefixLength(h[1]).toByteArray(),x=[],f=0;f<4;)x.push(parseInt(g[f],10)&parseInt(C[f],10)),f++;return new this(x)}catch{throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},b.IPv4.parse=function(l){const h=this.parser(l);if(h===null)throw new Error("ipaddr: string is not formatted like an IPv4 Address");return new this(h)},b.IPv4.parseCIDR=function(l){let h;if(h=l.match(/^(.+)\/(\d+)$/)){const f=parseInt(h[2]);if(f>=0&&f<=32){const g=[this.parse(h[1]),f];return Object.defineProperty(g,"toString",{value:function(){return this.join("/")}}),g}}throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},b.IPv4.parser=function(l){let h,f,g;if(h=l.match(s.fourOctet))return function(){const x=h.slice(1,6),C=[];for(let $=0;$<x.length;$++)f=x[$],C.push(m(f));return C}();if(h=l.match(s.longValue)){if(g=m(h[1]),g>4294967295||g<0)throw new Error("ipaddr: address outside defined range");return function(){const x=[];let C;for(C=0;C<=24;C+=8)x.push(g>>C&255);return x}().reverse()}else return(h=l.match(s.twoOctet))?function(){const x=h.slice(1,4),C=[];if(g=m(x[1]),g>16777215||g<0)throw new Error("ipaddr: address outside defined range");return C.push(m(x[0])),C.push(g>>16&255),C.push(g>>8&255),C.push(g&255),C}():(h=l.match(s.threeOctet))?function(){const x=h.slice(1,5),C=[];if(g=m(x[2]),g>65535||g<0)throw new Error("ipaddr: address outside defined range");return C.push(m(x[0])),C.push(m(x[1])),C.push(g>>8&255),C.push(g&255),C}():null},b.IPv4.subnetMaskFromPrefixLength=function(l){if(l=parseInt(l),l<0||l>32)throw new Error("ipaddr: invalid IPv4 prefix length");const h=[0,0,0,0];let f=0;const g=Math.floor(l/8);for(;f<g;)h[f]=255,f++;return g<4&&(h[g]=Math.pow(2,l%8)-1<<8-l%8),new this(h)},b.IPv6=function(){function l(h,f){let g,x;if(h.length===16)for(this.parts=[],g=0;g<=14;g+=2)this.parts.push(h[g]<<8|h[g+1]);else if(h.length===8)this.parts=h;else throw new Error("ipaddr: ipv6 part count should be 8 or 16");for(g=0;g<this.parts.length;g++)if(x=this.parts[g],!(0<=x&&x<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");f&&(this.zoneId=f)}return l.prototype.SpecialRanges={unspecified:[new l([0,0,0,0,0,0,0,0]),128],linkLocal:[new l([65152,0,0,0,0,0,0,0]),10],multicast:[new l([65280,0,0,0,0,0,0,0]),8],loopback:[new l([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new l([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new l([0,0,0,0,0,65535,0,0]),96],discard:[new l([256,0,0,0,0,0,0,0]),64],rfc6145:[new l([0,0,0,0,65535,0,0,0]),96],rfc6052:[new l([100,65435,0,0,0,0,0,0]),96],"6to4":[new l([8194,0,0,0,0,0,0,0]),16],teredo:[new l([8193,0,0,0,0,0,0,0]),32],benchmarking:[new l([8193,2,0,0,0,0,0,0]),48],amt:[new l([8193,3,0,0,0,0,0,0]),32],as112v6:[[new l([8193,4,274,0,0,0,0,0]),48],[new l([9760,79,32768,0,0,0,0,0]),48]],deprecated:[new l([8193,16,0,0,0,0,0,0]),28],orchid2:[new l([8193,32,0,0,0,0,0,0]),28],droneRemoteIdProtocolEntityTags:[new l([8193,48,0,0,0,0,0,0]),28],reserved:[[new l([8193,0,0,0,0,0,0,0]),23],[new l([8193,3512,0,0,0,0,0,0]),32]]},l.prototype.isIPv4MappedAddress=function(){return this.range()==="ipv4Mapped"},l.prototype.kind=function(){return"ipv6"},l.prototype.match=function(h,f){let g;if(f===void 0&&(g=h,h=g[0],f=g[1]),h.kind()!=="ipv6")throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return p(this.parts,h.parts,16,f)},l.prototype.prefixLengthFromSubnetMask=function(){let h=0,f=!1;const g={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0};let x,C;for(let $=7;$>=0;$-=1)if(x=this.parts[$],x in g){if(C=g[x],f&&C!==0)return null;C!==16&&(f=!0),h+=C}else return null;return 128-h},l.prototype.range=function(){return b.subnetMatch(this,this.SpecialRanges)},l.prototype.toByteArray=function(){let h;const f=[],g=this.parts;for(let x=0;x<g.length;x++)h=g[x],f.push(h>>8),f.push(h&255);return f},l.prototype.toFixedLengthString=function(){const h=(function(){const g=[];for(let x=0;x<this.parts.length;x++)g.push(v(this.parts[x].toString(16),4));return g}).call(this).join(":");let f="";return this.zoneId&&(f=`%${this.zoneId}`),h+f},l.prototype.toIPv4Address=function(){if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");const h=this.parts.slice(-2),f=h[0],g=h[1];return new b.IPv4([f>>8,f&255,g>>8,g&255])},l.prototype.toNormalizedString=function(){const h=(function(){const g=[];for(let x=0;x<this.parts.length;x++)g.push(this.parts[x].toString(16));return g}).call(this).join(":");let f="";return this.zoneId&&(f=`%${this.zoneId}`),h+f},l.prototype.toRFC5952String=function(){const h=/((^|:)(0(:|$)){2,})/g,f=this.toNormalizedString();let g=0,x=-1,C;for(;C=h.exec(f);)C[0].length>x&&(g=C.index,x=C[0].length);return x<0?f:`${f.substring(0,g)}::${f.substring(g+x)}`},l.prototype.toString=function(){return this.toRFC5952String()},l}(),b.IPv6.broadcastAddressFromCIDR=function(l){try{const h=this.parseCIDR(l),f=h[0].toByteArray(),g=this.subnetMaskFromPrefixLength(h[1]).toByteArray(),x=[];let C=0;for(;C<16;)x.push(parseInt(f[C],10)|parseInt(g[C],10)^255),C++;return new this(x)}catch(h){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${h})`)}},b.IPv6.isIPv6=function(l){return this.parser(l)!==null},b.IPv6.isValid=function(l){if(typeof l=="string"&&l.indexOf(":")===-1)return!1;try{const h=this.parser(l);return new this(h.parts,h.zoneId),!0}catch{return!1}},b.IPv6.isValidCIDR=function(l){if(typeof l=="string"&&l.indexOf(":")===-1)return!1;try{return this.parseCIDR(l),!0}catch{return!1}},b.IPv6.networkAddressFromCIDR=function(l){let h,f,g,x,C;try{for(h=this.parseCIDR(l),g=h[0].toByteArray(),C=this.subnetMaskFromPrefixLength(h[1]).toByteArray(),x=[],f=0;f<16;)x.push(parseInt(g[f],10)&parseInt(C[f],10)),f++;return new this(x)}catch($){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${$})`)}},b.IPv6.parse=function(l){const h=this.parser(l);if(h.parts===null)throw new Error("ipaddr: string is not formatted like an IPv6 Address");return new this(h.parts,h.zoneId)},b.IPv6.parseCIDR=function(l){let h,f,g;if((f=l.match(/^(.+)\/(\d+)$/))&&(h=parseInt(f[2]),h>=0&&h<=128))return g=[this.parse(f[1]),h],Object.defineProperty(g,"toString",{value:function(){return this.join("/")}}),g;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},b.IPv6.parser=function(l){let h,f,g,x,C,$;if(g=l.match(c.deprecatedTransitional))return this.parser(`::ffff:${g[1]}`);if(c.native.test(l))return u(l,8);if((g=l.match(c.transitional))&&($=g[6]||"",h=g[1],g[1].endsWith("::")||(h=h.slice(0,-1)),h=u(h+$,6),h.parts)){for(C=[parseInt(g[2]),parseInt(g[3]),parseInt(g[4]),parseInt(g[5])],f=0;f<C.length;f++)if(x=C[f],!(0<=x&&x<=255))return null;return h.parts.push(C[0]<<8|C[1]),h.parts.push(C[2]<<8|C[3]),{parts:h.parts,zoneId:h.zoneId}}return null},b.IPv6.subnetMaskFromPrefixLength=function(l){if(l=parseInt(l),l<0||l>128)throw new Error("ipaddr: invalid IPv6 prefix length");const h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];let f=0;const g=Math.floor(l/8);for(;f<g;)h[f]=255,f++;return g<16&&(h[g]=Math.pow(2,l%8)-1<<8-l%8),new this(h)},b.fromByteArray=function(l){const h=l.length;if(h===4)return new b.IPv4(l);if(h===16)return new b.IPv6(l);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},b.isValid=function(l){return b.IPv6.isValid(l)||b.IPv4.isValid(l)},b.isValidCIDR=function(l){return b.IPv6.isValidCIDR(l)||b.IPv4.isValidCIDR(l)},b.parse=function(l){if(b.IPv6.isValid(l))return b.IPv6.parse(l);if(b.IPv4.isValid(l))return b.IPv4.parse(l);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},b.parseCIDR=function(l){try{return b.IPv6.parseCIDR(l)}catch{try{return b.IPv4.parseCIDR(l)}catch{throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},b.process=function(l){const h=this.parse(l);return h.kind()==="ipv6"&&h.isIPv4MappedAddress()?h.toIPv4Address():h},b.subnetMatch=function(l,h,f){let g,x,C,$;f==null&&(f="unicast");for(x in h)if(Object.prototype.hasOwnProperty.call(h,x)){for(C=h[x],C[0]&&!(C[0]instanceof Array)&&(C=[C]),g=0;g<C.length;g++)if($=C[g],l.kind()===$[0].kind()&&l.match.apply(l,$))return x}return f},i.exports?i.exports=b:e.ipaddr=b})(Yc)}(ts)),ts.exports}var Qc=Xc();const Xn=Ri(Qc);class el extends G{constructor(t){super();V(this,"NON_ROUTABLE_IP_ADDRESS",["0.0.0.0/8","10.0.0.0/8","14.0.0.0/8","24.0.0.0/8","39.0.0.0/8","127.0.0.0/8","128.0.0.0/16","169.254.0.0/16","172.16.0.0/12","191.255.0.0/16","192.0.0.0/24","192.0.2.0/24","192.88.99.0/24","192.168.0.0/16","198.18.0.0/15","223.255.255.0/24","224.0.0.0/4","240.0.0.0/4"]);V(this,"DEFAULT_EXCLUSIONS",["::1","localhost","*.local","127.0.0.1","analytics.google.com","*.analytics.google.com","google-analytics.com","*.google-analytics.com"]);this.exclusionsStorage=t}get nonRoutableNets(){const t=s=>{const[n,r]=Xn.parseCIDR(s);return[n.toString(),Xn.IPv4.subnetMaskFromPrefixLength(r).toString()]};return this.NON_ROUTABLE_IP_ADDRESS.map(t)}get exclusionList(){const t=this.exclusionsStorage.state.exclusions.map(s=>s.matchPattern);return[...this.DEFAULT_EXCLUSIONS,...t]}get nonRoutableList(){return[...this.NON_ROUTABLE_IP_ADDRESS]}get exclusionSites(){return this.exclusionsStorage.state.exclusions}async boot(){await this.exclusionsStorage.sync(),this.bootResolve(),await this.bootPromise}async add(t){const s=[...this.exclusionsStorage.state.exclusions,t];await this.exclusionsStorage.setItems({exclusions:s})}async remove(t){const s=this.exclusionsStorage.state.exclusions.filter(n=>n.matchPattern!==t.matchPattern);await this.exclusionsStorage.setItems({exclusions:s})}}const tl=new Z("exclusions",Jc),sl=new el(tl),Qn="nl";var Cs=(i=>(i[i.public=0]="public",i[i.private=1]="private",i))(Cs||{}),ln=(i=>(i[i.free=0]="free",i[i.premium=1]="premium",i))(ln||{}),nl=(i=>(i.free="free",i.premium="premium",i.custom="custom",i))(nl||{});const il=d.object({id:d.string(),name:d.string(),code:d.string(),phrases:d.string().array()}),rl=d.object({id:d.string(),name:d.string(),phrases:d.string().array(),region:d.string(),via:d.string(),target:d.string(),countryCode:d.string(),type:d.nativeEnum(Cs),proxyType:d.nativeEnum(ln)}),al=d.object({region:d.string(),name:d.string(),description:d.string(),countryCode:d.string(),latitude:d.string(),longitude:d.string(),networkLoad:d.string(),priority:d.number(),type:d.nativeEnum(Cs),proxy_type:d.nativeEnum(ln)}),ol=d.object({id:d.string(),type:d.literal(2)}),cl=d.object({id:d.string(),type:d.literal(1),items:ol.array()}),ll=d.object({countries:il.array(),locations:rl.array(),items:cl.array()}),ul=d.object({data:ll.optional(),updatedAt:d.number()}),dl=d.object({type:d.nativeEnum(Cs),region:d.string(),regionName:d.string(),countryName:d.string(),countryCode:d.string()}),hl=d.object({activeId:d.string().optional().describe(I.persist),favoriteIds:d.string().array().describe(I.persist),locations:ul.describe(I.persist),lastActiveLocationData:dl.optional().describe(I.persist)}).default({favoriteIds:[],locations:{updatedAt:0}}),pl=new X(hl);function fl(i){return al.safeParse(i).success}const gl=12*60*60*1e3;class ml extends G{constructor(e){super(),this.locationStorage=e}get activeLocation(){return!this.locationStorage.state.activeId||!this.locationStorage.state.locations.data?null:this.locationStorage.state.locations.data.locations.find(t=>t.id===this.locationStorage.state.activeId)??null}get activeLocationId(){return this.locationStorage.state.activeId??""}get favoriteLocations(){return this.locationStorage.state.favoriteIds}get locationsData(){return this.locationStorage.state.locations.data??null}get lastActiveLocation(){return this.locationStorage.state.lastActiveLocationData??null}get needUpdateLocations(){return this.locationStorage.state.locations.updatedAt+gl<Date.now()}get defaultLocationId(){var t;const e=(t=this.locationStorage.state.locations.data)==null?void 0:t.locations.find(s=>s.region===Qn);return e==null?void 0:e.id}async boot(){await this.locationStorage.sync(),this.bootResolve(),await this.bootPromise}async setLocationsData(e){await this.locationStorage.setItems({locations:{data:e,updatedAt:Date.now()}})}async setActiveLocation(e){var s,n,r;let t;if(typeof e=="string")t=e;else if(fl(e)){const a=(s=this.locationStorage.state.locations.data)==null?void 0:s.locations.find(o=>{const c=o.region===e.region,u=o.proxyType===e.proxy_type;return c&&u});t=a==null?void 0:a.id}else{const a=(n=this.locationStorage.state.locations.data)==null?void 0:n.locations.find(o=>o.region===Qn);t=a==null?void 0:a.id}if(t?await this.locationStorage.setItems({activeId:t}):await this.locationStorage.removeItems("activeId"),this.activeLocation){const a=(r=this.locationStorage.state.locations.data)==null?void 0:r.countries.find(c=>c.code===this.activeLocation.countryCode),o={type:this.activeLocation.type,region:this.activeLocation.region,regionName:this.activeLocation.name,countryName:(a==null?void 0:a.name)??"N/A",countryCode:this.activeLocation.countryCode};await this.locationStorage.setItems({lastActiveLocationData:o})}else await this.locationStorage.removeItems("lastActiveLocationData")}async removeActiveLocation(){await this.locationStorage.removeItems("activeId")}async setFavoriteLocations(e){const t=[...new Set([...this.locationStorage.state.favoriteIds,...e])];await this.locationStorage.setItems({favoriteIds:t})}async removeFavoriteLocations(e){const t=this.locationStorage.state.favoriteIds.filter(s=>!e.includes(s));await this.locationStorage.setItems({favoriteIds:t})}}const vl=new Z("location",pl),Ti=new ml(vl),bl=["udp","tcp","ipsec","https","http","sws","wg"],yl=d.object({addresses:d.array(d.string()),protocol:d.enum(bl),port:d.number()}),wl=d.object({username:d.string(),password:d.string()}),Sl=d.object({credentials:wl.nullable().describe(I.persist),serverConfigList:d.array(yl).describe(I.persist)}).default({credentials:null,serverConfigList:[]}),_l=new X(Sl),ze=class ze extends G{constructor(t){super();V(this,"setting",F.proxy.settings);V(this,"details",{levelOfControl:"not_controllable",value:{mode:"system"}});this.proxyStorage=t,this.setting.onChange.addListener(s=>{this.details=s,ze.settingChangeResolver()})}get canControlProxy(){const{levelOfControl:t}=this.details;return t==="not_controllable"||t==="controlled_by_other_extensions"?{status:!1,cause:t}:{status:!0}}get isApplied(){const{levelOfControl:t}=this.details;return t==="controlled_by_this_extension"}async getAuthCredentials(){const{credentials:t}=await this.proxyStorage.getItems("credentials");return t}async getServerConfigList(){const{serverConfigList:t}=await this.proxyStorage.getItems("serverConfigList");return t}async boot(){await this.proxyStorage.sync();const t=await this.setting.get({});this.details=t,this.bootResolve(),await this.bootPromise}async enable(t){if(this.isApplied)return this.canControlProxy;if(!this.canControlProxy.status)return this.canControlProxy;await this.proxyStorage.setItems({credentials:t.credentials,serverConfigList:t.serverConfig});const s=new Promise(r=>{ze.settingChangeResolver=r}),n=ze.createProxyConfig(t);return await this.setting.set({value:n,scope:"regular"}),await s,this.canControlProxy}async disable(){if(!this.isApplied)return!0;await this.proxyStorage.setItems({credentials:null,serverConfigList:[]});const t=new Promise(s=>{ze.settingChangeResolver=s});return await this.setting.clear({}),await t,!this.isApplied}static createProxyConfig(t){const s=/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/,n=t.serverConfig.flatMap(a=>{const o=a.protocol.toUpperCase();return a.addresses.map(c=>`${o} ${c}:${a.port}`)}).join("; ");return{mode:"pac_script",pacScript:{data:`
      function FindProxyForURL(url, host) {
        const areHostnamesEqual = (hostnameA, hostnameB) => {
          const wwwRegex = /^www\\./;
          const oldHostnameWithoutWww = hostnameA.replace(wwwRegex, '');
          const newHostnameWithoutWww = hostnameB.replace(wwwRegex, '');
          return oldHostnameWithoutWww === newHostnameWithoutWww;
        };

        if (isPlainHostName(host)) {
          return 'DIRECT';
        }

        const ipv4Regex = new RegExp(${s});
        const nonRoutableNets = ${JSON.stringify(t.nonRoutableNets)};
        if (ipv4Regex.test(host) && nonRoutableNets.some(([pattern, mask]) => isInNet(host, pattern, mask))) {
          return 'DIRECT';
        }

        const exclusions = ${JSON.stringify(t.exclusionList)};
        if (exclusions.some(el => (areHostnamesEqual(host, el) || shExpMatch(host, el)))) {
          return 'DIRECT';
        }

        return '${n}';
      }`}}}};V(ze,"settingChangeResolver",()=>{});let Xs=ze;const xl=new Z("proxy",_l),Oi=new Xs(xl),kl=d.object({blockWebrtc:d.boolean().describe(I.persist)}).default({blockWebrtc:!1}),Cl=new X(kl),Fs="disable_non_proxied_udp",it=class it extends G{constructor(t){super();V(this,"setting",F.privacy.network.webRTCIPHandlingPolicy);V(this,"details",{levelOfControl:"not_controllable",value:"default"});this.webrtcStorage=t,this.setting.onChange.addListener(s=>{this.details=s,it.settingChangeResolver()})}get canControlWebrtc(){const{levelOfControl:t,value:s}=this.details;return t==="not_controllable"||t==="controlled_by_other_extensions"?{status:!1,cause:t}:t==="controllable_by_this_extension"&&s===Fs?{status:!1,cause:"controlled_by_other_extensions"}:{status:!0}}get isApplied(){const{levelOfControl:t,value:s}=this.details;return t==="controlled_by_this_extension"&&s===Fs}get needEnableWebrtc(){return this.webrtcStorage.state.blockWebrtc}async boot(){await this.webrtcStorage.sync(),this.details=await this.setting.get({}),this.bootResolve(),await this.bootPromise}async enable(){if(!this.canControlWebrtc.status)return this.canControlWebrtc;const t=new Promise(s=>{it.settingChangeResolver=s});return await this.setting.set({value:Fs,scope:"regular"}),await t,this.canControlWebrtc}async disable(){if(!this.canControlWebrtc.status)return this.canControlWebrtc;const t=new Promise(s=>{it.settingChangeResolver=s});return await this.setting.clear({}),await t,this.canControlWebrtc}async setBlockWebrtc(t){await this.webrtcStorage.setItems({blockWebrtc:t})}};V(it,"settingChangeResolver",()=>{});let Qs=it;const Al=new Z("webrtc-settings",Cl),El=new Qs(Al),Vs=100,Tl=d.object({domain:d.string(),description:d.string().optional(),breachDate:d.string().optional(),acquisitionDate:d.string().optional(),records:d.number(),assets:d.array(d.string())}),Ol=d.object({domain:d.string(),hasLeak:d.literal(!0),data:Tl}).or(d.object({domain:d.string(),hasLeak:d.literal(!1)})),Ll=d.object({domain:d.string()}),Il=d.object({enable:d.boolean().describe(I.persist),breachList:d.array(Ol).describe(I.persist),exclusionList:d.array(Ll).describe(I.persist)}).default({enable:!0,breachList:[],exclusionList:[]}),Rl=new X(Il);class Pl extends G{constructor(e,t,s){super(),this.breachAlertStorage=e,this.abTestsService=t,this.analyticsService=s}get enable(){return this.breachAlertStorage.state.enable}async boot(){await this.breachAlertStorage.sync(),this.abTestsService.getTestActiveStatus(ne.breachBanner)||await this.setEnableStatus(!1),this.bootResolve(),await this.bootPromise}async setEnableStatus(e){await this.breachAlertStorage.setItems({enable:e})}async setBreachData(e){const t=[...this.breachAlertStorage.state.breachList];t.length===Vs-1&&this.analyticsService.sendEvent({types:["google-analytics","aws-kinesis","amplitude"],name:"breach_banner_site_limit_reach"}),t.length>=Vs&&t.shift(),t.push(e),await this.breachAlertStorage.setItems({breachList:t})}getBreachData(e){return this.breachAlertStorage.state.breachList.find(s=>s.domain===e)}async setExclusionSite(e){const t=[...this.breachAlertStorage.state.exclusionList];t.length>=Vs&&t.shift(),t.push(e),await this.breachAlertStorage.setItems({exclusionList:t})}getExclusionSite(e){return this.breachAlertStorage.state.exclusionList.find(s=>s.domain===e)}}const Dl=new Z("breach-alert",Rl),ql=new Pl(Dl,xi,qe),ei="2.1",jl="2.95";class Nl{constructor(e,t,s,n,r,a,o,c,u,p,m,v,b){this.globalStateService=e,this.apiFreeService=t,this.apiPremiumService=s,this.userService=n,this.locationService=r,this.accessService=a,this.analyticsService=o,this.messageService=c,this.eventService=u,this.i18nService=p,this.webrtcService=m,this.abTestsService=v,this.proxyService=b,this.eventService.subscribe({"premium-refresh-token-failed":this.premiumRefreshTokenFailedListener.bind(this),"free-refresh-token-failed":this.freeRefreshTokenFailedListener.bind(this)})}async init(){this.apiFreeService.hasTokens||await this.launch()}async launch(){if(!this.globalStateService.hasInternetConnection)return{success:!1,errors:[{code:0,status:0,name:"",message:this.i18nService.t("base:connect-errors.no-internet")}]};const e=await this.apiFreeService.fetch({method:"POST",url:"apiLaunch",body:{...this.apiFreeService.deviceInfo}});if(!e.success)return await this.criticalErrorOccured({status_code:fe.getStatusCodeMessage(e)}),e;await this.apiFreeService.setTokens({accessToken:e.data.accessToken,refreshToken:""});const t=await this.apiFreeService.fetch({method:"POST",url:"apiLocationList"});if(!t.success)return await this.criticalErrorOccured({status_code:fe.getStatusCodeMessage(t)}),t;if(await this.locationService.setLocationsData(t.data),!this.locationService.activeLocation)if(this.abTestsService.getTestActiveStatus(ne.limitLocations))await this.locationService.setActiveLocation(ei);else{const n=e.data.user.default.location;await this.locationService.setActiveLocation(n)}return await this.globalStateService.setCriticalError(!1),{success:!0,data:{success:!0}}}async relaunch(){return await this.proxyService.disable(),this.apiFreeService.isDomainAvailable||await this.apiFreeService.updateDomainData(),this.apiPremiumService.isDomainAvailable||await this.apiPremiumService.updateDomainData(),this.launch()}async getCriticalError(){return await Promise.resolve(),{success:!0,data:{state:this.globalStateService.criticalError}}}async login(e){var r;if(!this.globalStateService.hasInternetConnection)return{success:!1,errors:[{code:0,status:0,name:"",message:this.i18nService.t("base:connect-errors.no-internet")}]};const t=await this.apiPremiumService.fetch({method:"POST",url:"authLogin",body:{...this.apiFreeService.deviceInfo,...e}});if(!t.success)return t;await this.apiPremiumService.setTokens({accessToken:t.data.accessToken,refreshToken:t.data.refreshToken});const s=await this.apiPremiumService.fetch({method:"POST",url:"apiLocationList"});if(!s.success)return s;await this.locationService.setLocationsData(s.data),await this.userService.setUser(t.data.user),await this.userService.setSubscription(t.data.user.subscription);const n=await this.apiPremiumService.fetch({method:"GET",url:"apiSubscriptionShield"});if(n.success&&await this.userService.setSubscriptionBundle(n.data),this.userService.userType==="trial"){const a=await this.apiPremiumService.fetch({method:"GET",url:"apiSubscriptionCheckUsedTrial"});if(!a.success){const o={...t.data.user.subscription,status:_e.disabled};await this.userService.setSubscription(o);const c=((r=a.errors[0])==null?void 0:r.message)??"";c&&this.messageService.notifyPopup({type:"toast-message",success:!0,data:{id:"0",message:c,type:"warning"}})}}if(this.userService.hasPermitions("locations","premium")){const a=t.data.user.default.location;await this.locationService.setActiveLocation(a)}else if(this.abTestsService.getTestActiveStatus(ne.limitLocations))await this.locationService.setActiveLocation(jl);else{const o=this.locationService.defaultLocationId;await this.locationService.setActiveLocation(o)}return await this.syncSubscriptionSlots(),this.webrtcService.needEnableWebrtc&&this.webrtcService.enable().catch(()=>{}),{success:!0,data:{success:!0}}}async logout(){if(!this.globalStateService.hasInternetConnection)return{success:!1,errors:[{code:0,status:0,name:"",message:this.i18nService.t("base:connect-errors.no-internet")}]};const e=await this.apiPremiumService.fetch({method:"POST",url:"authLogout"});if(!e.success)return e;await this.userService.removeSubscription(),await this.userService.removeSubscriptionSlots(),await this.userService.removeSubscriptionBundle(),await this.userService.removeUser();const t=await this.apiFreeService.fetch({method:"POST",url:"apiLaunch",body:{...this.apiFreeService.deviceInfo}});if(!t.success)return await this.criticalErrorOccured({status_code:fe.getStatusCodeMessage(t)}),t;await this.apiFreeService.setTokens({accessToken:t.data.accessToken,refreshToken:""});const s=await this.apiFreeService.fetch({method:"POST",url:"apiLocationList"});if(!s.success)return s;if(await this.locationService.setLocationsData(s.data),this.abTestsService.getTestActiveStatus(ne.limitLocations))await this.locationService.setActiveLocation(ei);else{const r=t.data.user.default.location;await this.locationService.setActiveLocation(r),this.webrtcService.disable().catch(()=>{})}return{success:!0,data:{success:!0}}}async showAccountPage(e){if(!this.globalStateService.hasInternetConnection)return{success:!1,errors:[{code:0,status:0,name:"",message:this.i18nService.t("base:connect-errors.no-internet")}]};const t=await this.apiPremiumService.fetch({method:"POST",url:"apiAccountAuthToken"});return t.success?(await this.accessService.proceedToWebsiteAccount({authToken:t.data.token,route:e.route,params:e.params??{}}),{success:!0,data:{success:!0}}):t}async registerAccount(){return await this.accessService.proceedToWebsitePage({page:"pricing",params:{utm_campaign:"signup"}}),{success:!0,data:{success:!0}}}async getUserData(){return await Promise.resolve(),{success:!0,data:{user:this.userService.user,subscription:this.userService.subscription,slots:this.userService.subscriptionSlots,hasBundle:this.userService.hasBundleSubscription,canUsePremium:this.userService.canUsePremium}}}async syncSubscriptionSlots(){const e=await this.apiPremiumService.fetch({method:"GET",url:"apiSubscriptionSlot"});return e.success?(await this.userService.setSubscriptionSlots(e.data),{success:!0,data:{slots:e.data}}):e}async logoutAllDevices(){const e=await this.apiPremiumService.fetch({method:"POST",url:"apiSlotRelease"});if(!e.success)return e;const t=await this.syncSubscriptionSlots();return t.success?{success:!0,data:t.data}:t}async premiumRefreshTokenFailedListener(e){(await this.logout()).success&&this.messageService.notifyPopup({type:"authentication-change",success:!0,data:{success:!0}}),this.analyticsService.sendEvent({types:["google-analytics"],name:"premium_refresh_token_failed",data:{status_message:e.disconnectReason,status_code:e.failedReason}})}async criticalErrorOccured(e){this.analyticsService.sendEvent({types:["google-analytics"],name:"critical_error_occured",data:{...e}}),await this.globalStateService.setCriticalError(!0),await this.apiFreeService.removeTokens()}async freeRefreshTokenFailedListener(e){await this.criticalErrorOccured({status_code:"free-refresh-token-failed"}),this.messageService.notifyPopup({type:"critical-error",success:!0,data:{success:!0}}),this.analyticsService.sendEvent({types:["google-analytics"],name:"free_refresh_token_failed",data:{status_message:e.disconnectReason,status_code:e.failedReason}})}}class $l{constructor(e,t){this.messageService=e,this.authController=t}init(){this.messageService.subscribe({"get-critical-error":this.getCriticalError.bind(this),relaunch:this.relaunch.bind(this),login:this.login.bind(this),logout:this.logout.bind(this),"register-account":this.registerAccount.bind(this),"show-account-page":this.showAccountPage.bind(this),"get-user-data":this.getUserData.bind(this),"sync-subscription-slots":this.syncSubscriptionSlots.bind(this),"logout-all-devices":this.logoutAllDevices.bind(this)})}async getCriticalError(){return{...await this.authController.getCriticalError(),type:"get-critical-error"}}async relaunch(){return{...await this.authController.relaunch(),type:"relaunch"}}async login(e){return{...await this.authController.login(e),type:"login"}}async logout(){return{...await this.authController.logout(),type:"logout"}}async registerAccount(){return{...await this.authController.registerAccount(),type:"register-account"}}async showAccountPage(e){return{...await this.authController.showAccountPage(e),type:"show-account-page"}}async getUserData(){return{...await this.authController.getUserData(),type:"get-user-data"}}async syncSubscriptionSlots(){return{...await this.authController.syncSubscriptionSlots(),type:"sync-subscription-slots"}}async logoutAllDevices(){return{...await this.authController.logoutAllDevices(),type:"logout-all-devices"}}}const Ml=new Nl(ft,Ai,Ei,bi,Ti,$c,qe,ys,ks,nn,El,xi,Oi),Gl=new $l(ys,Ml),rt=class rt{async setImage(e){const t=e==="connected"?rt.CONNECTED_ICONS:rt.DISCONNECTED_ICONS;await F.action.setIcon({path:t}),await Promise.resolve(this)}async setTooltip(e){const s=F.runtime.getManifest().name;await F.action.setTitle({title:`${s}
${e}`}),await Promise.resolve(this)}};V(rt,"CONNECTED_ICONS",{16:"/icons/16.png",32:"/icons/32.png",48:"/icons/48.png",64:"/icons/64.png",128:"/icons/128.png"}),V(rt,"DISCONNECTED_ICONS",{16:"/icons/16-grey.png",32:"/icons/32-grey.png",48:"/icons/48-grey.png",64:"/icons/64-grey.png",128:"/icons/128-grey.png"});let en=rt;const Fl=new en,Vl=["https://captive.apple.com/"],Ul="https://cloudflare.com/cdn-cgi/trace",ti="n/a";class zl{constructor(e,t,s,n,r,a,o,c,u,p,m,v,b,l,h){this.messageService=e,this.analyticsService=t,this.eventService=s,this.fetchService=n,this.connectionService=r,this.apiFreeService=a,this.apiPremiumService=o,this.userService=c,this.locationService=u,this.exclusionsService=p,this.proxyService=m,this.iconService=v,this.i18nService=b,this.appService=l,this.notificationService=h,this.eventService.subscribe({"free-refresh-token-failed":this.disconnect.bind(this),"premium-refresh-token-failed":this.disconnect.bind(this)}),this.eventService.subscribe({"internet-connection-changed":this.changeInternetConnectionListener.bind(this)})}get needAuthTrigger(){return this.appService.majorBrowserVersion===0?!1:this.appService.majorBrowserVersion<122}async init(){await this.updateIcon(),(!this.locationService.locationsData||this.locationService.needUpdateLocations)&&await this.updateLocationData(),this.connectionService.currentIp||await this.updateIpAddress()}async getLocationsData(){return await Promise.resolve(),{success:!0,data:{data:this.locationService.locationsData,activeId:this.locationService.activeLocationId,favoriteIds:this.locationService.favoriteLocations}}}async getLastActiveLocation(){return await Promise.resolve(),this.locationService.lastActiveLocation?{success:!0,data:this.locationService.lastActiveLocation}:{success:!1,errors:[{code:0,status:0,name:"",message:this.i18nService.t("base:connect-errors.no-location")}]}}async updateLocations(){const e=this.userService.hasPermitions("domain","premium")?await this.apiPremiumService.fetch({method:"POST",url:"apiLocationList"}):await this.apiFreeService.fetch({method:"POST",url:"apiLocationList"});return e.success?(await this.locationService.setLocationsData(e.data),{success:!0,data:{data:this.locationService.locationsData,activeId:this.locationService.activeLocationId,favoriteIds:this.locationService.favoriteLocations}}):e}async setActiveLocation(e){return await this.locationService.setActiveLocation(e),{success:!0,data:{success:!0}}}async setFavoriteLocations(e){return e.action==="add"?await this.locationService.setFavoriteLocations(e.list):await this.locationService.removeFavoriteLocations(e.list),{success:!0,data:{success:!0}}}async connect(){const e=Date.now();if(await this.changeConnectionStatus("connecting"),!this.locationService.activeLocation)return await this.changeConnectionStatus("disconnected"),{success:!1,errors:[{code:0,status:0,name:"",message:this.i18nService.t("base:connect-errors.no-location")}]};const{name:t,region:s}=this.locationService.activeLocation,n=`${s}, ${t}`;this.analyticsService.sendEvent({types:["aws-kinesis"],name:"connection_tried",data:{event_properties__screen_name:"vpn",event_properties__location:n}}),this.analyticsService.sendEvent({types:["google-analytics","amplitude"],name:"connection_tried",data:{country:this.locationService.activeLocation.countryCode,city:this.locationService.activeLocation.name,server_type:this.locationService.activeLocation.type,server_address:"no_addresses",server_region:this.locationService.activeLocation.id}});const r={protocol:"https",region:this.locationService.activeLocation.region,type:this.locationService.activeLocation.type},a=this.userService.hasPermitions("domain","premium")?await this.apiPremiumService.fetch({method:"POST",url:"apiServerList",body:r}):await this.apiFreeService.fetch({method:"POST",url:"apiServerList",body:r});if(!a.success)return await this.changeConnectionStatus("disconnected"),this.analyticsService.sendEvent({types:["google-analytics","amplitude"],name:"connection_failed_backend",data:{country:this.locationService.activeLocation.countryCode,city:this.locationService.activeLocation.name,server_type:this.locationService.activeLocation.type,server_address:"no_addresses",server_region:this.locationService.activeLocation.id,status_code:fe.getStatusCodeMessage(a)}}),this.analyticsService.sendEvent({types:["aws-kinesis"],name:"connection_failed_backend",data:{event_properties__screen_name:"vpn",event_properties__location:n,event_properties__time_to_connect:Date.now()-e,event_properties__auto_connection:"",event_properties__server_address:"no_addresses"}}),{success:!1,errors:[{code:0,status:0,name:"",message:this.i18nService.t("base:connect-errors.server-config")}]};const o=a.data.map(l=>{const h=this.appService.isBlockAds?l.rpz_port:l.port;return{addresses:l.addresses,protocol:l.protocol,port:h}}),{username:c,password:u}=a.data[0];let p=!1,m="";for(let l=0;l<o.length;l+=1){const h=o[l],f=await this.proxyService.enable({serverConfig:[h],credentials:{username:c,password:u},nonRoutableNets:this.exclusionsService.nonRoutableNets,exclusionList:this.exclusionsService.exclusionList});if(!f.status){await this.changeConnectionStatus("disconnected"),p=!1,m=f.cause==="not_controllable"?this.i18nService.t("base:connect-errors.not-controllable"):this.i18nService.t("base:connect-errors.controlled-by-other-extensions");break}const g={country:this.locationService.activeLocation.countryCode,city:this.locationService.activeLocation.name,server_type:this.locationService.activeLocation.type,server_address:h.addresses[0],server_region:this.locationService.activeLocation.id};if(this.needAuthTrigger&&!await this.triggerAuthRequiredListener()){await this.proxyService.disable(),this.analyticsService.sendEvent({types:["google-analytics"],name:"connection_failed_create_tab",data:{...g,status_code:"tab-create"}}),this.analyticsService.sendEvent({types:["aws-kinesis"],name:"connection_failed_create_tab",data:{event_properties__screen_name:"vpn",event_properties__location:n,event_properties__time_to_connect:Date.now()-e,event_properties__auto_connection:"",event_properties__server_address:h.addresses[0]}});continue}const x=await this.checkInternetConnection();if(x.success){p=!0;break}else await this.proxyService.disable(),this.analyticsService.sendEvent({types:["google-analytics"],name:"connection_failed_availability_domain_1",data:{...g,status_code:fe.getStatusCodeMessage(x)}})}const v=o.flatMap(l=>l.addresses).join(", "),b={country:this.locationService.activeLocation.countryCode,city:this.locationService.activeLocation.name,server_type:this.locationService.activeLocation.type,server_address:v,server_region:this.locationService.activeLocation.id};return p?(await this.connectionService.incrementConnectionCount(),await this.updateIpAddress(),await this.changeConnectionStatus("connected"),await this.updateIcon(),await this.createDownloadNotification(),this.analyticsService.sendEvent({types:["google-analytics","amplitude"],name:"connection_succeeded",data:b}),this.analyticsService.sendEvent({types:["aws-kinesis"],name:"connection_succeeded",data:{event_properties__screen_name:"vpn",event_properties__location:n,event_properties__time_to_connect:Date.now()-e,event_properties__auto_connection:"",event_properties__server_address:v}}),{success:!0,data:{success:!0}}):(await this.changeConnectionStatus("disconnected"),await this.proxyService.disable(),this.analyticsService.sendEvent({types:["google-analytics","amplitude"],name:"connection_failed_check",data:{...b,status_code:"loop_fixed_server"}}),this.analyticsService.sendEvent({types:["aws-kinesis"],name:"connection_failed_check",data:{event_properties__screen_name:"vpn",event_properties__location:n,event_properties__time_to_connect:Date.now()-e,event_properties__auto_connection:"",event_properties__server_address:v}}),{success:!1,errors:[{code:0,status:0,name:"",message:m||this.i18nService.t("base:connect-errors.captive")}]})}async disconnect(e){if(await this.changeConnectionStatus("disconnecting"),!await this.proxyService.disable())return{success:!1,errors:[{code:0,status:0,name:"",message:this.i18nService.t("base:disconnect-errors.remove-proxy")}]};await this.updateIpAddress(),await this.changeConnectionStatus("disconnected"),await this.updateIcon();const{name:s,region:n}=this.locationService.activeLocation??{name:"",region:""},r=`${n}, ${s}`;return this.analyticsService.sendEvent({types:["aws-kinesis"],name:"disconnected",data:{event_properties__screen_name:"vpn",event_properties__location:r,event_properties__disconnect_reason:e.disconnectReason,event_properties__failed_reason:e.failedReason}}),{success:!0,data:{success:!0}}}async getConnectionState(){await Promise.resolve();const e=this.connectionService.currentIp??ti;return{success:!0,data:{status:this.connectionService.status,ip:e,connectionCount:this.connectionService.connectionCount}}}async getAutoConnectSetting(){return await Promise.resolve(),{success:!0,data:{status:this.connectionService.useAutoConnect}}}async setAutoConnectSetting(e){return await this.connectionService.setAutoConnect(e.status),{success:!0,data:{success:!0}}}async updateApiDomain(){return this.apiFreeService.isDomainAvailable||await this.apiFreeService.updateDomainData(),this.apiPremiumService.isDomainAvailable||await this.apiPremiumService.updateDomainData(),{success:!0,data:{success:!0}}}async triggerAuthRequiredListener(){const e=function(s){return new Promise((n,r)=>{F.tabs.create({url:s,active:!1}).then(a=>{const o=function(p,m){m.status==="complete"&&p===a.id&&(F.tabs.onUpdated.removeListener(o),F.tabs.remove(p).catch(()=>{}),clearTimeout(c),n(a))},c=setTimeout(()=>{F.tabs.onUpdated.removeListener(o),a.id&&F.tabs.remove(a.id).catch(()=>{}),clearTimeout(c),r(new Error("triggerAuthRequiredListener timeout reject"))},5e3);F.tabs.onUpdated.addListener(o)}).catch(r)})};try{const t=this.userService.hasPermitions("domain","premium")?this.apiPremiumService.apiDomainUrl:this.apiFreeService.apiDomainUrl;return await e(t),!0}catch{return!1}}async updateIpAddress(){const e=await this.fetchService.request({method:"GET",url:Ul});if(e.success)try{const t=e.data.trim().split(/\n/).map(n=>n.split("=")),s=Object.fromEntries(t);await this.connectionService.setIpAddress(s.ip)}catch{this.analyticsService.sendEvent({types:["google-analytics"],name:"ip_parse_failed"})}else await this.connectionService.removeIpAddress(),this.analyticsService.sendEvent({types:["google-analytics","amplitude"],name:"ip_check_failed"})}async updateIcon(){var e;if(this.connectionService.isConnected){const t=((e=this.locationService.activeLocation)==null?void 0:e.name)??"VeePN",s=this.i18nService.t("base:connect-status.on",{tr_location:t});await this.iconService.setImage("connected"),await this.iconService.setTooltip(s)}else{const t=this.i18nService.t("base:connect-status.off");await this.iconService.setImage("disconnected"),await this.iconService.setTooltip(t)}}async updateLocationData(){const e=this.userService.hasPermitions("domain","premium")?await this.apiPremiumService.fetch({method:"POST",url:"apiLocationList"}):await this.apiFreeService.fetch({method:"POST",url:"apiLocationList"});e.success&&await this.locationService.setLocationsData(e.data)}async changeConnectionStatus(e){e==="disconnected"&&await this.appService.setBlockAds(!1),await this.connectionService.setConnectionStatus(e);const t=this.connectionService.currentIp??ti;this.messageService.notifyPopup({type:"connection-change",success:!0,data:{status:this.connectionService.status,ip:t,connectionCount:this.connectionService.connectionCount}})}async createDownloadNotification(){this.connectionService.connectionCount<=3||Date.now()<this.appService.downloadNotificationTimestamp||(await this.notificationService.notify({options:{type:"image",title:this.i18nService.t("base:download-notification.title"),imageUrl:F.runtime.getURL("/images/desktop-notification.jpg"),message:this.i18nService.t("base:download-notification.message")},callback:"download-app"}),await this.appService.incrementDownloadNotificationTimestamp(),this.analyticsService.sendEvent({types:["google-analytics","amplitude"],name:"notify_popup_pc_download_shown"}))}async checkInternetConnection(){const e=await this.fetchService.request({method:"GET",url:Vl[0],timeout:7e3,cache:"no-cache"});return e.success&&e.data.toLocaleLowerCase().includes("success")?{success:!0,data:{success:!0}}:{success:!1,errors:[{code:0,status:0,name:"",message:this.i18nService.t("base:connect-errors.captive")}]}}async changeInternetConnectionListener(e){e.online?this.locationService.locationsData||await this.updateLocationData():this.connectionService.status==="connected"&&await this.disconnect({disconnectReason:"internet_connection_changed",failedReason:"n/a"}),this.messageService.notifyPopup({type:"internet-connection-changed",success:!0,data:{online:e.online}})}}class Bl{constructor(e,t){this.messageService=e,this.connectionController=t}init(){this.messageService.subscribe({connect:this.connect.bind(this),disconnect:this.disconnect.bind(this),"get-connection-state":this.getConnectionState.bind(this),"get-locations-data":this.getLocationsData.bind(this),"get-last-active-location":this.getLastActiveLocation.bind(this),"update-locations-data":this.updateLocations.bind(this),"set-active-location":this.setActiveLocation.bind(this),"set-favorite-locations":this.setFavoriteLocations.bind(this),"update-api-domain":this.updateApiDomain.bind(this),"get-auto-connect-setting":this.getAutoConnectSetting.bind(this),"set-auto-connect-setting":this.setAutoConnectSetting.bind(this)})}async connect(){return{...await this.connectionController.connect(),type:"connect"}}async disconnect(e){return{...await this.connectionController.disconnect(e),type:"disconnect"}}async getConnectionState(){return{...await this.connectionController.getConnectionState(),type:"get-connection-state"}}async getLocationsData(){return{...await this.connectionController.getLocationsData(),type:"get-locations-data"}}async getLastActiveLocation(){return{...await this.connectionController.getLastActiveLocation(),type:"get-last-active-location"}}async updateLocations(){return{...await this.connectionController.updateLocations(),type:"update-locations-data"}}async setActiveLocation(e){return{...await this.connectionController.setActiveLocation(e),type:"set-active-location"}}async setFavoriteLocations(e){return{...await this.connectionController.setFavoriteLocations(e),type:"set-favorite-locations"}}async updateApiDomain(){return{...await this.connectionController.updateApiDomain(),type:"update-api-domain"}}async getAutoConnectSetting(){return{...await this.connectionController.getAutoConnectSetting(),type:"get-auto-connect-setting"}}async setAutoConnectSetting(e){return{...await this.connectionController.setAutoConnectSetting(e),type:"set-auto-connect-setting"}}}const Zl=new zl(ys,qe,ks,qt,_c,Ai,Ei,bi,Ti,sl,Oi,Fl,nn,rc,gc),Jl=new Bl(ys,Zl);export{Kl as A,_e as B,gi as C,yi as D,ne as E,K as F,Ts as G,oc as H,ln as L,nl as R,I as S,ve as U,X as a,Z as b,qe as c,rc as d,_c as e,qt as f,ft as g,xi as h,nn as i,$c as j,Ai as k,Ei as l,sl as m,gc as n,ql as o,Zl as p,Oi as q,ks as r,Gl as s,Jl as t,bi as u,Ti as v,El as w,Ml as x,Cs as y,d as z};
